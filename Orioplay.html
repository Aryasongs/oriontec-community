<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>OrioPlay Reels</title>
  <style>
    body {
      margin: 0;
      background: black;
      font-family: Arial, sans-serif;
      overflow: hidden;
    }
    .reel-container {
      height: 100vh;
      overflow-y: scroll;
      scroll-snap-type: y mandatory;
    }
    .reel {
      position: relative;
      height: 100vh;
      scroll-snap-align: start;
    }
    video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .actions {
      position: absolute;
      bottom: 60px;
      right: 20px;
      color: white;
      text-align: center;
    }
    .action-btn {
      margin: 10px 0;
      font-size: 20px;
      cursor: pointer;
    }
    .comments {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      background: rgba(0,0,0,0.4);
      color: white;
      padding: 10px;
      font-size: 14px;
    }
  </style>
</head>
<body>

<div class="reel-container" id="reelContainer"></div>

<script>
const videos = [
  {url: "https://community.oriontec.xyz/AQMz7l-cbcOcNYT-F98p0tPeXpKNjd1C90HzaL4k-_e1HlXEMOXyJcmLTRXgsR85xblB-KEK6L-cfmKZTn1ne3LU43Pp6y1-r0FpoAA.mp4"},
  {url: "https://community.oriontec.xyz/AQO8Id8yrvrtLFsQ3em-7eGeNKC0SWYQDCnGgPe6fRKWPRzc2jNrSiS6_6hfXzCbCiMhg-4fMBBPdZnw7I4FFDcKc8aSiNuvkHIpklY.mp4"},
  {url: "https://community.oriontec.xyz/AQNI48SC1msBhQKuxyjeRYSo_3KKBsZ7sJU7evYodvwwNkKzx15RpfQD6bmIws9SqkKXumHfmm1_Zpse3sGfTN12qbr_LAAtNihZCj8.mp4"},
  {url: "https://community.oriontec.xyz/AQNbGZpSZMrNlMTvlvyPCOFT_O19Oo77mPkwY_xmkp_Uijj5mB77PX0yNXv5ziWG93v_xBuK9vhgms6h1c6-XZhP5P_ziDJmnz1DkIU.mp4"},
  {url: "https://community.oriontec.xyz/AQM-uzNKIG53Qn8OIE6C8ke-zbxFn4kS-LWhPln2JkRe0TV1-XKRidGM_MX5xoafOo3CftfOJmU--d93RSDAMZbJEvCuvVOtWe_7-6g.mp4"},
  {url: "https://community.oriontec.xyz/AQMfYCk6cglI-EYVM_ikXiPDHu6AI0G5n63OfIlOlGB1mPStMS9-S3p4GZUMqKe7tHnS_y2LZU4We9ZFos7lwyAyTKZ2y9KHK7fwqDg.mp4"},
  {url: "https://community.oriontec.xyz/AQNmookkwQ4zcFJa6WmnPpWtwPlAAhAs1NqUv4OO81rHqj4_-2rNmKYQL9EoUflZFM9CUJdKNCjX3JeXqCFHxky9YG-r85gHXVuFqDM.mp4"},
  {url: "https://community.oriontec.xyz/AQOJk_n-zCbInDwXSaeQhdHKZswXi5iUwDsE6961Vk4leC0kjU5Ji2oYoNojQy-ehbSi0oiB86CU15kBD0SdlvpI8NsrIw2Vo5ne0AY.mp4"},
  {url: "https://community.oriontec.xyz/AQOrFzZWJ0gGJbq2LbuH2rKMSQPkaEvLT2Tm5zpY3A3aP7vTvC13rcGDFjNbqYiqPRykI409W56EOGlFfrA-InKAu0sjC_rUlhgbUo4.mp4"},
];

const container = document.getElementById('reelContainer');

function loadReels() {
  videos.forEach((vid, index) => {
    const reel = document.createElement('div');
    reel.className = 'reel';
    reel.id = `video${index}`;

    const video = document.createElement('video');
    video.src = vid.url;
    video.controls = false;
    video.loop = true;
    video.muted = false;
    video.setAttribute("playsinline", true);

    const actions = document.createElement('div');
    actions.className = 'actions';
    actions.innerHTML = `
      <div class="action-btn" onclick="likeVideo(${index})">‚ù§Ô∏è <span id="like${index}">0</span></div>
      <div class="action-btn" onclick="commentVideo(${index})">üí¨ <span id="comment${index}">0</span></div>
    `;

    const comments = document.createElement('div');
    comments.className = 'comments';
    comments.innerText = "üî• Awesome video! Scroll down for more.";

    reel.appendChild(video);
    reel.appendChild(actions);
    reel.appendChild(comments);
    container.appendChild(reel);
  });
}
loadReels();

let lastPlayed = null;

function handleScroll() {
  const reels = document.querySelectorAll(".reel");
  reels.forEach((reel, index) => {
    const rect = reel.getBoundingClientRect();
    if (rect.top >= 0 && rect.bottom <= window.innerHeight + 300) {
      const video = reel.querySelector("video");
      if (lastPlayed && lastPlayed !== video) lastPlayed.pause();
      video.play();
      lastPlayed = video;

      // Update URL
      location.hash = `video${index}`;
    } else {
      const video = reel.querySelector("video");
      video.pause();
    }
  });

  // Loop to top after last video
  if (window.scrollY + window.innerHeight >= container.scrollHeight - 10) {
    setTimeout(() => container.scrollTo(0, 0), 1000);
  }
}
container.addEventListener("scroll", handleScroll);

// Handle incoming URL hash (deep link)
window.onload = () => {
  loadLikesAndComments();
  if (location.hash) {
    const id = location.hash.replace("#", "");
    const el = document.getElementById(id);
    if (el) el.scrollIntoView();
  }
};

function likeVideo(index) {
  const likeCount = document.getElementById(`like${index}`);
  likeCount.innerText = parseInt(likeCount.innerText) + 1;
}
function commentVideo(index) {
  const commentCount = document.getElementById(`comment${index}`);
  commentCount.innerText = parseInt(commentCount.innerText) + 1;
}
function loadLikesAndComments() {
  for (let i = 0; i < videos.length; i++) {
    document.getElementById(`like${i}`).innerText = Math.floor(Math.random() * 100);
    document.getElementById(`comment${i}`).innerText = Math.floor(Math.random() * 50);
  }
}
</script>

</body>
</html>
