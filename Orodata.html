<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VentureScope - Business Intelligence Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .profile-card { background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); }
        .funding-chart { height: 300px; }
        .nav-item { transition: all 0.2s ease; }
        .nav-item:hover { background-color: rgba(255,255,255,0.1); }
        .search-dropdown { max-height: 300px; overflow-y: auto; }
        .employee-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem; }
        .news-item { border-left: 4px solid #667eea; }
        .diversity-tag { background: linear-gradient(45deg, #ff6b6b, #feca57); }
        .loading-spinner { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .modal-backdrop { backdrop-filter: blur(4px); }
        .form-section { border-left: 3px solid #667eea; }
        .stats-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .industry-tag { background: linear-gradient(45deg, #667eea, #764ba2); }
        .role-badge { background: linear-gradient(45deg, #4ecdc4, #44a08d); }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="gradient-bg text-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <div class="w-8 h-8 bg-white rounded-lg flex items-center justify-center">
                            <i class="fas fa-chart-network text-purple-600"></i>
                        </div>
                        <span class="text-xl font-bold">VentureScope</span>
                    </div>
                    <div class="hidden md:flex space-x-1">
                        <button onclick="showSection('dashboard')" class="nav-item px-3 py-2 rounded-md text-sm font-medium">Dashboard</button>
                        <button onclick="showSection('companies')" class="nav-item px-3 py-2 rounded-md text-sm font-medium">Companies</button>
                        <button onclick="showSection('people')" class="nav-item px-3 py-2 rounded-md text-sm font-medium">People</button>
                        <button onclick="showSection('investors')" class="nav-item px-3 py-2 rounded-md text-sm font-medium">Investors</button>
                        <button onclick="showSection('schools')" class="nav-item px-3 py-2 rounded-md text-sm font-medium">Schools</button>
                    </div>
                </div>
                
                <!-- Search Bar -->
                <div class="flex-1 max-w-lg mx-4 relative">
                    <div class="relative">
                        <input type="text" id="globalSearch" placeholder="Search companies, people, investors..." 
                               class="w-full px-4 py-2 pl-10 pr-4 text-gray-900 bg-white rounded-lg focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                    <div id="searchResults" class="search-dropdown absolute top-full left-0 right-0 bg-white rounded-lg shadow-lg mt-1 hidden z-50"></div>
                </div>

                <div class="flex items-center space-x-4">
                    <div id="authSection" class="flex items-center space-x-2">
                        <button onclick="showAuthModal()" class="bg-white text-purple-600 px-4 py-2 rounded-lg font-medium hover:bg-gray-100 transition">
                            Sign In
                        </button>
                    </div>
                    <div id="userSection" class="hidden flex items-center space-x-2">
                        <img id="userAvatar" class="w-8 h-8 rounded-full" src="" alt="User">
                        <span id="userName" class="font-medium"></span>
                        <button onclick="signOut()" class="text-sm hover:text-gray-200">Sign Out</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Dashboard Section -->
        <div id="dashboardSection" class="section">
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-gray-900 mb-2">Welcome to VentureScope</h1>
                <p class="text-gray-600">Discover companies, connect with professionals, and track the business ecosystem</p>
            </div>

            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="stats-card text-white p-6 rounded-xl">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-white/80 text-sm">Total Companies</p>
                            <p class="text-2xl font-bold" id="totalCompanies">0</p>
                        </div>
                        <i class="fas fa-building text-2xl text-white/60"></i>
                    </div>
                </div>
                <div class="bg-green-500 text-white p-6 rounded-xl">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-white/80 text-sm">Active Professionals</p>
                            <p class="text-2xl font-bold" id="totalPeople">0</p>
                        </div>
                        <i class="fas fa-users text-2xl text-white/60"></i>
                    </div>
                </div>
                <div class="bg-orange-500 text-white p-6 rounded-xl">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-white/80 text-sm">Investment Firms</p>
                            <p class="text-2xl font-bold" id="totalInvestors">0</p>
                        </div>
                        <i class="fas fa-chart-line text-2xl text-white/60"></i>
                    </div>
                </div>
                <div class="bg-blue-500 text-white p-6 rounded-xl">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-white/80 text-sm">Educational Institutions</p>
                            <p class="text-2xl font-bold" id="totalSchools">0</p>
                        </div>
                        <i class="fas fa-graduation-cap text-2xl text-white/60"></i>
                    </div>
                </div>
            </div>

            <!-- Featured Companies -->
            <div class="bg-white rounded-xl shadow-sm p-6 mb-8">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-semibold text-gray-900">Featured Companies</h2>
                    <button onclick="showSection('companies')" class="text-purple-600 hover:text-purple-700 font-medium">View All</button>
                </div>
                <div id="featuredCompanies" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
            </div>

            <!-- Recent Activity -->
            <div class="bg-white rounded-xl shadow-sm p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-6">Recent Activity</h2>
                <div id="recentActivity" class="space-y-4"></div>
            </div>
        </div>

        <!-- Companies Section -->
        <div id="companiesSection" class="section hidden">
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-3xl font-bold text-gray-900">Companies</h1>
                <button onclick="showAddCompanyModal()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition">
                    <i class="fas fa-plus mr-2"></i>Add Company
                </button>
            </div>

            <!-- Filters -->
            <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <select id="industryFilter" class="border border-gray-300 rounded-lg px-3 py-2">
                        <option value="">All Industries</option>
                        <option value="Technology">Technology</option>
                        <option value="Healthcare">Healthcare</option>
                        <option value="Finance">Finance</option>
                        <option value="Education">Education</option>
                        <option value="Retail">Retail</option>
                    </select>
                    <select id="sizeFilter" class="border border-gray-300 rounded-lg px-3 py-2">
                        <option value="">All Sizes</option>
                        <option value="1-10">1-10 employees</option>
                        <option value="11-50">11-50 employees</option>
                        <option value="51-200">51-200 employees</option>
                        <option value="201-500">201-500 employees</option>
                        <option value="501+">501+ employees</option>
                    </select>
                    <select id="locationFilter" class="border border-gray-300 rounded-lg px-3 py-2">
                        <option value="">All Locations</option>
                        <option value="San Francisco">San Francisco</option>
                        <option value="New York">New York</option>
                        <option value="London">London</option>
                        <option value="Berlin">Berlin</option>
                    </select>
                    <button onclick="applyFilters()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition">
                        Apply Filters
                    </button>
                </div>
            </div>

            <!-- Companies Grid -->
            <div id="companiesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </div>

        <!-- People Section -->
        <div id="peopleSection" class="section hidden">
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-3xl font-bold text-gray-900">Professionals</h1>
                <button onclick="showAddPersonModal()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition">
                    <i class="fas fa-plus mr-2"></i>Add Profile
                </button>
            </div>
            <div id="peopleGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </div>

        <!-- Investors Section -->
        <div id="investorsSection" class="section hidden">
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-3xl font-bold text-gray-900">Investment Firms</h1>
                <button onclick="showAddInvestorModal()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition">
                    <i class="fas fa-plus mr-2"></i>Add Investor
                </button>
            </div>
            <div id="investorsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </div>

        <!-- Schools Section -->
        <div id="schoolsSection" class="section hidden">
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-3xl font-bold text-gray-900">Educational Institutions</h1>
                <button onclick="showAddSchoolModal()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition">
                    <i class="fas fa-plus mr-2"></i>Add School
                </button>
            </div>
            <div id="schoolsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </div>
    </div>

    <!-- Company Detail Modal -->
    <div id="companyModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-6xl w-full max-h-screen overflow-y-auto">
            <div id="companyModalContent"></div>
        </div>
    </div>

    <!-- Person Detail Modal -->
    <div id="personModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-4xl w-full max-h-screen overflow-y-auto">
            <div id="personModalContent"></div>
        </div>
    </div>

    <!-- Add Company Modal -->
    <div id="addCompanyModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-4xl w-full max-h-screen overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-900">Add New Company</h2>
                    <button onclick="closeModal('addCompanyModal')" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <form id="addCompanyForm" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Company Name *</label>
                            <input type="text" name="name" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Legal Name</label>
                            <input type="text" name="legalName" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Company Type</label>
                            <select name="type" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="For Profit">For Profit</option>
                                <option value="Nonprofit">Nonprofit</option>
                                <option value="Government">Government</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Founded Date</label>
                            <input type="date" name="foundedDate" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Number of Employees</label>
                            <select name="employeeCount" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="1-10">1-10</option>
                                <option value="11-50">11-50</option>
                                <option value="51-200">51-200</option>
                                <option value="201-500">201-500</option>
                                <option value="501-1000">501-1000</option>
                                <option value="1001+">1001+</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Website</label>
                            <input type="url" name="website" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Industry</label>
                            <select name="industry" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="Technology">Technology</option>
                                <option value="Healthcare">Healthcare</option>
                                <option value="Finance">Finance</option>
                                <option value="Education">Education</option>
                                <option value="Retail">Retail</option>
                                <option value="Manufacturing">Manufacturing</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Location</label>
                            <input type="text" name="location" placeholder="City, Country" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                        <textarea name="description" rows="4" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"></textarea>
                    </div>
                    <div class="flex justify-end space-x-4">
                        <button type="button" onclick="closeModal('addCompanyModal')" class="px-4 py-2 text-gray-600 hover:text-gray-800">Cancel</button>
                        <button type="submit" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition">Add Company</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Person Modal -->
    <div id="addPersonModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-4xl w-full max-h-screen overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-900">Add Professional Profile</h2>
                    <button onclick="closeModal('addPersonModal')" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <form id="addPersonForm" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Full Name *</label>
                            <input type="text" name="name" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Current Title</label>
                            <input type="text" name="title" placeholder="e.g., CEO at TechCorp" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Company</label>
                            <input type="text" name="company" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Location</label>
                            <input type="text" name="location" placeholder="City, Country" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">LinkedIn URL</label>
                            <input type="url" name="linkedin" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                            <input type="email" name="email" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Bio</label>
                        <textarea name="bio" rows="4" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"></textarea>
                    </div>
                    <div class="flex justify-end space-x-4">
                        <button type="button" onclick="closeModal('addPersonModal')" class="px-4 py-2 text-gray-600 hover:text-gray-800">Cancel</button>
                        <button type="submit" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition">Add Profile</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-md w-full">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-900">Sign In to VentureScope</h2>
                    <button onclick="closeModal('authModal')" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <div class="text-center">
                    <p class="text-gray-600 mb-6">Connect with Google to access all features</p>
                    <button onclick="signInWithGoogle()" class="w-full bg-white border border-gray-300 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-50 transition flex items-center justify-center space-x-3 shadow-sm">
                        <svg class="w-5 h-5" viewBox="0 0 24 24">
                            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                        </svg>
                        <span class="font-medium">Continue with Google</span>
                    </button>
                    <p class="text-xs text-gray-500 mt-4">By signing in, you agree to our Terms of Service and Privacy Policy</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyB8LHDAPglInvEBL1rxpuR_1QWQi98N18M",
            authDomain: "companiesdata-ed512.firebaseapp.com",
            databaseURL: "https://companiesdata-ed512-default-rtdb.firebaseio.com",
            projectId: "companiesdata-ed512",
            storageBucket: "companiesdata-ed512.firebasestorage.app",
            messagingSenderId: "348949569607",
            appId: "1:348949569607:web:a41066ac5c538efcde5162"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const database = firebase.database();
        const storage = firebase.storage();

        // Global variables
        let currentUser = null;
        let allCompanies = [];
        let allPeople = [];
        let allInvestors = [];
        let allSchools = [];

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupEventListeners();
            loadSampleData();
        });

        function initializeApp() {
            // Auth state observer
            auth.onAuthStateChanged(user => {
                currentUser = user;
                updateAuthUI();
                if (user) {
                    loadUserData();
                }
            });

            // Show dashboard by default
            showSection('dashboard');
        }

        function setupEventListeners() {
            // Global search
            document.getElementById('globalSearch').addEventListener('input', handleGlobalSearch);
            
            // Forms
            document.getElementById('addCompanyForm').addEventListener('submit', handleAddCompany);
            document.getElementById('addPersonForm').addEventListener('submit', handleAddPerson);

            // Close modals on backdrop click
            document.querySelectorAll('.modal-backdrop').forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.classList.add('hidden');
                    }
                });
            });
        }

        function loadSampleData() {
            // Sample companies
            const sampleCompanies = [
                {
                    id: 'comp1',
                    name: 'TechFlow Solutions',
                    legalName: 'TechFlow Solutions Inc.',
                    type: 'For Profit',
                    foundedDate: '2020-03-15',
                    employeeCount: '51-200',
                    website: 'https://techflow.com',
                    industry: 'Technology',
                    location: 'San Francisco, CA',
                    description: 'AI-powered workflow automation platform helping businesses streamline operations.',
                    logo: '🚀',
                    totalFunding: 15000000,
                    fundingRounds: [
                        { date: '2021-06-01', type: 'Series A', amount: 5000000, investors: ['Venture Capital Partners'] },
                        { date: '2022-11-15', type: 'Series B', amount: 10000000, investors: ['Growth Equity Fund', 'Tech Ventures'] }
                    ],
                    employees: [
                        { name: 'Sarah Chen', title: 'CEO & Founder', startDate: '2020-03-15', current: true },
                        { name: 'Michael Rodriguez', title: 'CTO', startDate: '2020-05-01', current: true }
                    ],
                    news: [
                        { date: '2023-01-15', headline: 'TechFlow Raises $10M Series B', category: 'Funding' },
                        { date: '2023-03-20', headline: 'Named Best AI Startup 2023', category: 'Award' }
                    ]
                },
                {
                    id: 'comp2',
                    name: 'HealthTech Innovations',
                    legalName: 'HealthTech Innovations LLC',
                    type: 'For Profit',
                    foundedDate: '2019-08-10',
                    employeeCount: '11-50',
                    website: 'https://healthtech-innovations.com',
                    industry: 'Healthcare',
                    location: 'Boston, MA',
                    description: 'Digital health platform connecting patients with personalized care solutions.',
                    logo: '🏥',
                    totalFunding: 8000000,
                    fundingRounds: [
                        { date: '2020-04-01', type: 'Seed', amount: 2000000, investors: ['Health Ventures'] },
                        { date: '2022-01-15', type: 'Series A', amount: 6000000, investors: ['Medical Innovation Fund'] }
                    ],
                    employees: [
                        { name: 'Dr. Emily Watson', title: 'CEO', startDate: '2019-08-10', current: true },
                        { name: 'James Park', title: 'Head of Product', startDate: '2020-01-15', current: true }
                    ]
                },
                {
                    id: 'comp3',
                    name: 'EduLearn Platform',
                    legalName: 'EduLearn Platform Corp',
                    type: 'For Profit',
                    foundedDate: '2021-01-20',
                    employeeCount: '1-10',
                    website: 'https://edulearn.com',
                    industry: 'Education',
                    location: 'Austin, TX',
                    description: 'Interactive learning platform for K-12 students with AI-powered personalization.',
                    logo: '📚',
                    totalFunding: 3000000,
                    fundingRounds: [
                        { date: '2021-09-01', type: 'Pre-Seed', amount: 500000, investors: ['Education Angels'] },
                        { date: '2022-06-15', type: 'Seed', amount: 2500000, investors: ['Learning Ventures', 'EdTech Fund'] }
                    ],
                    employees: [
                        { name: 'Alex Thompson', title: 'Founder & CEO', startDate: '2021-01-20', current: true }
                    ]
                }
            ];

            // Sample people
            const samplePeople = [
                {
                    id: 'person1',
                    name: 'Sarah Chen',
                    title: 'CEO & Founder at TechFlow Solutions',
                    company: 'TechFlow Solutions',
                    location: 'San Francisco, CA',
                    bio: 'Serial entrepreneur with 10+ years in AI and automation. Previously founded two successful startups.',
                    linkedin: 'https://linkedin.com/in/sarahchen',
                    email: 'sarah@techflow.com',
                    avatar: '👩‍💼',
                    experience: [
                        { company: 'TechFlow Solutions', role: 'CEO & Founder', startDate: '2020-03-15', current: true },
                        { company: 'Previous Startup', role: 'CTO', startDate: '2017-01-01', endDate: '2020-02-28' }
                    ],
                    education: [
                        { school: 'Stanford University', degree: 'MS Computer Science', year: '2016' },
                        { school: 'UC Berkeley', degree: 'BS Engineering', year: '2014' }
                    ]
                },
                {
                    id: 'person2',
                    name: 'Dr. Emily Watson',
                    title: 'CEO at HealthTech Innovations',
                    company: 'HealthTech Innovations',
                    location: 'Boston, MA',
                    bio: 'Medical doctor turned entrepreneur, passionate about improving healthcare accessibility through technology.',
                    linkedin: 'https://linkedin.com/in/emilywatson',
                    email: 'emily@healthtech-innovations.com',
                    avatar: '👩‍⚕️',
                    experience: [
                        { company: 'HealthTech Innovations', role: 'CEO', startDate: '2019-08-10', current: true },
                        { company: 'Boston Medical Center', role: 'Physician', startDate: '2015-06-01', endDate: '2019-07-31' }
                    ],
                    education: [
                        { school: 'Harvard Medical School', degree: 'MD', year: '2015' },
                        { school: 'MIT', degree: 'BS Bioengineering', year: '2011' }
                    ]
                }
            ];

            // Sample investors
            const sampleInvestors = [
                {
                    id: 'inv1',
                    name: 'Venture Capital Partners',
                    type: 'Venture Capital',
                    location: 'Palo Alto, CA',
                    description: 'Early-stage VC firm focused on AI and enterprise software.',
                    website: 'https://vcpartners.com',
                    logo: '💼',
                    totalInvestments: 45,
                    portfolioCompanies: ['TechFlow Solutions', 'DataCorp', 'AI Innovations']
                },
                {
                    id: 'inv2',
                    name: 'Health Ventures',
                    type: 'Venture Capital',
                    location: 'Boston, MA',
                    description: 'Healthcare-focused investment firm backing digital health startups.',
                    website: 'https://healthventures.com',
                    logo: '🏥',
                    totalInvestments: 32,
                    portfolioCompanies: ['HealthTech Innovations', 'MedTech Solutions']
                }
            ];

            // Sample schools
            const sampleSchools = [
                {
                    id: 'school1',
                    name: 'Stanford University',
                    type: 'Private University',
                    location: 'Stanford, CA',
                    description: 'Leading research university known for innovation and entrepreneurship.',
                    website: 'https://stanford.edu',
                    logo: '🎓',
                    founded: '1885',
                    students: '17,000',
                    notableAlumni: ['Sarah Chen', 'Mark Johnson']
                },
                {
                    id: 'school2',
                    name: 'Harvard Medical School',
                    type: 'Medical School',
                    location: 'Boston, MA',
                    description: 'Premier medical education institution training future healthcare leaders.',
                    website: 'https://hms.harvard.edu',
                    logo: '🏥',
                    founded: '1782',
                    students: '1,700',
                    notableAlumni: ['Dr. Emily Watson']
                }
            ];

            // Store sample data
            allCompanies = sampleCompanies;
            allPeople = samplePeople;
            allInvestors = sampleInvestors;
            allSchools = sampleSchools;

            // Update UI
            updateDashboardStats();
            renderFeaturedCompanies();
            renderCompanies();
            renderPeople();
            renderInvestors();
            renderSchools();
        }

        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            document.getElementById(sectionName + 'Section').classList.remove('hidden');
            
            // Update navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('bg-white', 'bg-opacity-20');
            });
            event.target.classList.add('bg-white', 'bg-opacity-20');
        }

        function updateAuthUI() {
            const authSection = document.getElementById('authSection');
            const userSection = document.getElementById('userSection');
            
            if (currentUser) {
                authSection.classList.add('hidden');
                userSection.classList.remove('hidden');
                document.getElementById('userName').textContent = currentUser.displayName || currentUser.email;
                document.getElementById('userAvatar').src = currentUser.photoURL || `https://ui-avatars.com/api/?name=${encodeURIComponent(currentUser.displayName || currentUser.email)}&background=667eea&color=fff`;
            } else {
                authSection.classList.remove('hidden');
                userSection.classList.add('hidden');
            }
        }

        function updateDashboardStats() {
            document.getElementById('totalCompanies').textContent = allCompanies.length;
            document.getElementById('totalPeople').textContent = allPeople.length;
            document.getElementById('totalInvestors').textContent = allInvestors.length;
            document.getElementById('totalSchools').textContent = allSchools.length;
        }

        function renderFeaturedCompanies() {
            const container = document.getElementById('featuredCompanies');
            const featured = allCompanies.slice(0, 3);
            
            container.innerHTML = featured.map(company => `
                <div class="card-hover bg-white rounded-xl shadow-sm p-6 cursor-pointer" onclick="showCompanyDetail('${company.id}')">
                    <div class="flex items-center space-x-4 mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-500 rounded-lg flex items-center justify-center text-white text-xl">
                            ${company.logo}
                        </div>
                        <div>
                            <h3 class="font-semibold text-gray-900">${company.name}</h3>
                            <p class="text-sm text-gray-600">${company.industry}</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">${company.description}</p>
                    <div class="flex justify-between items-center">
                        <span class="industry-tag text-white text-xs px-2 py-1 rounded-full">${company.industry}</span>
                        <span class="text-sm text-gray-500">${company.location}</span>
                    </div>
                </div>
            `).join('');
        }

        function renderCompanies() {
            const container = document.getElementById('companiesGrid');
            
            container.innerHTML = allCompanies.map(company => `
                <div class="card-hover bg-white rounded-xl shadow-sm p-6 cursor-pointer" onclick="showCompanyDetail('${company.id}')">
                    <div class="flex items-center space-x-4 mb-4">
                        <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-500 rounded-xl flex items-center justify-center text-white text-2xl">
                            ${company.logo}
                        </div>
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900 text-lg">${company.name}</h3>
                            <p class="text-gray-600">${company.industry}</p>
                            <p class="text-sm text-gray-500">${company.location}</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm mb-4 line-clamp-2">${company.description}</p>
                    <div class="flex justify-between items-center mb-4">
                        <span class="industry-tag text-white text-xs px-3 py-1 rounded-full">${company.industry}</span>
                        <span class="text-sm text-gray-500">${company.employeeCount} employees</span>
                    </div>
                    ${company.totalFunding ? `
                        <div class="border-t pt-4">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">Total Funding</span>
                                <span class="font-semibold text-green-600">$${(company.totalFunding / 1000000).toFixed(1)}M</span>
                            </div>
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        function renderPeople() {
            const container = document.getElementById('peopleGrid');
            
            container.innerHTML = allPeople.map(person => `
                <div class="card-hover bg-white rounded-xl shadow-sm p-6 cursor-pointer" onclick="showPersonDetail('${person.id}')">
                    <div class="flex items-center space-x-4 mb-4">
                        <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-blue-500 rounded-full flex items-center justify-center text-white text-2xl">
                            ${person.avatar}
                        </div>
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900 text-lg">${person.name}</h3>
                            <p class="text-gray-600">${person.title}</p>
                            <p class="text-sm text-gray-500">${person.location}</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm mb-4 line-clamp-3">${person.bio}</p>
                    <div class="flex justify-between items-center">
                        <span class="role-badge text-white text-xs px-3 py-1 rounded-full">${person.company}</span>
                        ${person.linkedin ? '<i class="fab fa-linkedin text-blue-600"></i>' : ''}
                    </div>
                </div>
            `).join('');
        }

        function renderInvestors() {
            const container = document.getElementById('investorsGrid');
            
            container.innerHTML = allInvestors.map(investor => `
                <div class="card-hover bg-white rounded-xl shadow-sm p-6">
                    <div class="flex items-center space-x-4 mb-4">
                        <div class="w-16 h-16 bg-gradient-to-br from-orange-500 to-red-500 rounded-xl flex items-center justify-center text-white text-2xl">
                            ${investor.logo}
                        </div>
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900 text-lg">${investor.name}</h3>
                            <p class="text-gray-600">${investor.type}</p>
                            <p class="text-sm text-gray-500">${investor.location}</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">${investor.description}</p>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">${investor.totalInvestments} investments</span>
                        <a href="${investor.website}" target="_blank" class="text-purple-600 hover:text-purple-700">
                            <i class="fas fa-external-link-alt"></i>
                        </a>
                    </div>
                </div>
            `).join('');
        }

        function renderSchools() {
            const container = document.getElementById('schoolsGrid');
            
            container.innerHTML = allSchools.map(school => `
                <div class="card-hover bg-white rounded-xl shadow-sm p-6">
                    <div class="flex items-center space-x-4 mb-4">
                        <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-500 rounded-xl flex items-center justify-center text-white text-2xl">
                            ${school.logo}
                        </div>
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900 text-lg">${school.name}</h3>
                            <p class="text-gray-600">${school.type}</p>
                            <p class="text-sm text-gray-500">${school.location}</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">${school.description}</p>
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div>
                            <span class="text-gray-500">Founded:</span>
                            <span class="font-medium">${school.founded}</span>
                        </div>
                        <div>
                            <span class="text-gray-500">Students:</span>
                            <span class="font-medium">${school.students}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function showCompanyDetail(companyId) {
            const company = allCompanies.find(c => c.id === companyId);
            if (!company) return;

            const modal = document.getElementById('companyModal');
            const content = document.getElementById('companyModalContent');
            
            content.innerHTML = `
                <div class="relative">
                    <div class="profile-card h-48 rounded-t-xl flex items-end p-6">
                        <div class="flex items-center space-x-6">
                            <div class="w-24 h-24 bg-white rounded-xl flex items-center justify-center text-4xl shadow-lg">
                                ${company.logo}
                            </div>
                            <div class="text-white">
                                <h1 class="text-3xl font-bold">${company.name}</h1>
                                <p class="text-xl opacity-90">${company.industry}</p>
                                <p class="opacity-75">${company.location}</p>
                            </div>
                        </div>
                        <button onclick="closeModal('companyModal')" class="absolute top-4 right-4 text-white hover:text-gray-200">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    
                    <div class="p-6 space-y-8">
                        <!-- Company Info -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="md:col-span-2">
                                <h2 class="text-xl font-semibold mb-4">About ${company.name}</h2>
                                <p class="text-gray-600 mb-6">${company.description}</p>
                                
                                <div class="grid grid-cols-2 gap-4 text-sm">
                                    <div><span class="text-gray-500">Founded:</span> <span class="font-medium">${new Date(company.foundedDate).getFullYear()}</span></div>
                                    <div><span class="text-gray-500">Employees:</span> <span class="font-medium">${company.employeeCount}</span></div>
                                    <div><span class="text-gray-500">Type:</span> <span class="font-medium">${company.type}</span></div>
                                    <div><span class="text-gray-500">Website:</span> <a href="${company.website}" target="_blank" class="text-purple-600 hover:text-purple-700">${company.website}</a></div>
                                </div>
                            </div>
                            
                            <div class="space-y-4">
                                ${company.totalFunding ? `
                                    <div class="bg-green-50 p-4 rounded-lg">
                                        <h3 class="font-semibold text-green-800 mb-2">Total Funding</h3>
                                        <p class="text-2xl font-bold text-green-600">$${(company.totalFunding / 1000000).toFixed(1)}M</p>
                                        <p class="text-sm text-green-600">${company.fundingRounds?.length || 0} rounds</p>
                                    </div>
                                ` : ''}
                                
                                <div class="bg-blue-50 p-4 rounded-lg">
                                    <h3 class="font-semibold text-blue-800 mb-2">Team Size</h3>
                                    <p class="text-2xl font-bold text-blue-600">${company.employeeCount}</p>
                                    <p class="text-sm text-blue-600">employees</p>
                                </div>
                            </div>
                        </div>

                        ${company.fundingRounds && company.fundingRounds.length > 0 ? `
                            <!-- Funding Rounds -->
                            <div class="form-section pl-4">
                                <h2 class="text-xl font-semibold mb-4">Funding History</h2>
                                <div class="overflow-x-auto">
                                    <table class="w-full">
                                        <thead>
                                            <tr class="border-b">
                                                <th class="text-left py-2">Date</th>
                                                <th class="text-left py-2">Round</th>
                                                <th class="text-left py-2">Amount</th>
                                                <th class="text-left py-2">Investors</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            ${company.fundingRounds.map(round => `
                                                <tr class="border-b">
                                                    <td class="py-3">${new Date(round.date).toLocaleDateString()}</td>
                                                    <td class="py-3">${round.type}</td>
                                                    <td class="py-3 font-semibold text-green-600">$${(round.amount / 1000000).toFixed(1)}M</td>
                                                    <td class="py-3">${round.investors.join(', ')}</td>
                                                </tr>
                                            `).join('')}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        ` : ''}

                        ${company.employees && company.employees.length > 0 ? `
                            <!-- Key People -->
                            <div class="form-section pl-4">
                                <h2 class="text-xl font-semibold mb-4">Key People</h2>
                                <div class="employee-grid">
                                    ${company.employees.map(employee => `
                                        <div class="bg-gray-50 p-4 rounded-lg">
                                            <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center text-white mb-3">
                                                👤
                                            </div>
                                            <h3 class="font-semibold">${employee.name}</h3>
                                            <p class="text-sm text-gray-600">${employee.title}</p>
                                            <p class="text-xs text-gray-500 mt-1">Since ${new Date(employee.startDate).getFullYear()}</p>
                                            ${employee.current ? '<span class="inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full mt-2">Current</span>' : ''}
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        ` : ''}

                        ${company.news && company.news.length > 0 ? `
                            <!-- Recent News -->
                            <div class="form-section pl-4">
                                <h2 class="text-xl font-semibold mb-4">Recent News</h2>
                                <div class="space-y-4">
                                    ${company.news.map(item => `
                                        <div class="news-item bg-gray-50 p-4 rounded-lg">
                                            <div class="flex justify-between items-start mb-2">
                                                <h3 class="font-medium">${item.headline}</h3>
                                                <span class="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full">${item.category}</span>
                                            </div>
                                            <p class="text-sm text-gray-500">${new Date(item.date).toLocaleDateString()}</p>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
        }

        function showPersonDetail(personId) {
            const person = allPeople.find(p => p.id === personId);
            if (!person) return;

            const modal = document.getElementById('personModal');
            const content = document.getElementById('personModalContent');
            
            content.innerHTML = `
                <div class="relative">
                    <div class="profile-card h-48 rounded-t-xl flex items-end p-6">
                        <div class="flex items-center space-x-6">
                            <div class="w-24 h-24 bg-white rounded-full flex items-center justify-center text-4xl shadow-lg">
                                ${person.avatar}
                            </div>
                            <div class="text-white">
                                <h1 class="text-3xl font-bold">${person.name}</h1>
                                <p class="text-xl opacity-90">${person.title}</p>
                                <p class="opacity-75">${person.location}</p>
                            </div>
                        </div>
                        <button onclick="closeModal('personModal')" class="absolute top-4 right-4 text-white hover:text-gray-200">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    
                    <div class="p-6 space-y-8">
                        <!-- Bio -->
                        <div>
                            <h2 class="text-xl font-semibold mb-4">About</h2>
                            <p class="text-gray-600">${person.bio}</p>
                        </div>

                        ${person.experience && person.experience.length > 0 ? `
                            <!-- Experience -->
                            <div class="form-section pl-4">
                                <h2 class="text-xl font-semibold mb-4">Experience</h2>
                                <div class="space-y-4">
                                    ${person.experience.map(exp => `
                                        <div class="border-l-2 border-purple-200 pl-4">
                                            <h3 class="font-semibold">${exp.role}</h3>
                                            <p class="text-purple-600 font-medium">${exp.company}</p>
                                            <p class="text-sm text-gray-500">
                                                ${new Date(exp.startDate).toLocaleDateString()} - 
                                                ${exp.current ? 'Present' : new Date(exp.endDate).toLocaleDateString()}
                                            </p>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        ` : ''}

                        ${person.education && person.education.length > 0 ? `
                            <!-- Education -->
                            <div class="form-section pl-4">
                                <h2 class="text-xl font-semibold mb-4">Education</h2>
                                <div class="space-y-4">
                                    ${person.education.map(edu => `
                                        <div class="border-l-2 border-blue-200 pl-4">
                                            <h3 class="font-semibold">${edu.degree}</h3>
                                            <p class="text-blue-600 font-medium">${edu.school}</p>
                                            <p class="text-sm text-gray-500">${edu.year}</p>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        ` : ''}

                        <!-- Contact -->
                        <div class="form-section pl-4">
                            <h2 class="text-xl font-semibold mb-4">Contact</h2>
                            <div class="space-y-2">
                                ${person.email ? `<p><i class="fas fa-envelope text-gray-400 mr-2"></i>${person.email}</p>` : ''}
                                ${person.linkedin ? `<p><i class="fab fa-linkedin text-blue-600 mr-2"></i><a href="${person.linkedin}" target="_blank" class="text-blue-600 hover:text-blue-700">LinkedIn Profile</a></p>` : ''}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
        }

        function handleGlobalSearch(e) {
            const query = e.target.value.toLowerCase().trim();
            const resultsContainer = document.getElementById('searchResults');
            
            if (query.length < 2) {
                resultsContainer.classList.add('hidden');
                return;
            }

            const results = [];
            
            // Search companies
            allCompanies.forEach(company => {
                if (company.name.toLowerCase().includes(query) || 
                    company.industry.toLowerCase().includes(query) ||
                    company.location.toLowerCase().includes(query)) {
                    results.push({
                        type: 'company',
                        id: company.id,
                        name: company.name,
                        subtitle: company.industry,
                        icon: company.logo
                    });
                }
            });

            // Search people
            allPeople.forEach(person => {
                if (person.name.toLowerCase().includes(query) || 
                    person.title.toLowerCase().includes(query) ||
                    person.company.toLowerCase().includes(query)) {
                    results.push({
                        type: 'person',
                        id: person.id,
                        name: person.name,
                        subtitle: person.title,
                        icon: person.avatar
                    });
                }
            });

            if (results.length > 0) {
                resultsContainer.innerHTML = results.slice(0, 8).map(result => `
                    <div class="p-3 hover:bg-gray-50 cursor-pointer border-b last:border-b-0" onclick="handleSearchResult('${result.type}', '${result.id}')">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 bg-gradient-to-br from-purple-500 to-blue-500 rounded-lg flex items-center justify-center text-white">
                                ${result.icon}
                            </div>
                            <div>
                                <p class="font-medium text-gray-900">${result.name}</p>
                                <p class="text-sm text-gray-600">${result.subtitle}</p>
                            </div>
                        </div>
                    </div>
                `).join('');
                resultsContainer.classList.remove('hidden');
            } else {
                resultsContainer.innerHTML = '<div class="p-3 text-gray-500 text-center">No results found</div>';
                resultsContainer.classList.remove('hidden');
            }
        }

        function handleSearchResult(type, id) {
            document.getElementById('searchResults').classList.add('hidden');
            document.getElementById('globalSearch').value = '';
            
            if (type === 'company') {
                showCompanyDetail(id);
            } else if (type === 'person') {
                showPersonDetail(id);
            }
        }

        function handleAddCompany(e) {
            e.preventDefault();
            
            if (!currentUser) {
                alert('Please sign in to add companies');
                return;
            }

            const formData = new FormData(e.target);
            const companyData = {
                id: 'comp_' + Date.now(),
                name: formData.get('name'),
                legalName: formData.get('legalName'),
                type: formData.get('type'),
                foundedDate: formData.get('foundedDate'),
                employeeCount: formData.get('employeeCount'),
                website: formData.get('website'),
                industry: formData.get('industry'),
                location: formData.get('location'),
                description: formData.get('description'),
                logo: '🏢',
                createdBy: currentUser.uid,
                createdAt: new Date().toISOString()
            };

            // Add to local array
            allCompanies.unshift(companyData);
            
            // Save to Firebase
            database.ref('companies/' + companyData.id).set(companyData);
            
            // Update UI
            renderCompanies();
            renderFeaturedCompanies();
            updateDashboardStats();
            
            // Close modal and reset form
            closeModal('addCompanyModal');
            e.target.reset();
            
            alert('Company added successfully!');
        }

        function handleAddPerson(e) {
            e.preventDefault();
            
            if (!currentUser) {
                alert('Please sign in to add profiles');
                return;
            }

            const formData = new FormData(e.target);
            const personData = {
                id: 'person_' + Date.now(),
                name: formData.get('name'),
                title: formData.get('title'),
                company: formData.get('company'),
                location: formData.get('location'),
                linkedin: formData.get('linkedin'),
                email: formData.get('email'),
                bio: formData.get('bio'),
                avatar: '👤',
                createdBy: currentUser.uid,
                createdAt: new Date().toISOString()
            };

            // Add to local array
            allPeople.unshift(personData);
            
            // Save to Firebase
            database.ref('people/' + personData.id).set(personData);
            
            // Update UI
            renderPeople();
            updateDashboardStats();
            
            // Close modal and reset form
            closeModal('addPersonModal');
            e.target.reset();
            
            alert('Profile added successfully!');
        }

        function signInWithGoogle() {
            const provider = new firebase.auth.GoogleAuthProvider();
            provider.addScope('profile');
            provider.addScope('email');
            
            auth.signInWithPopup(provider)
                .then(result => {
                    const user = result.user;
                    console.log('Google sign-in successful:', user);
                    closeModal('authModal');
                    
                    // Save user data to Firebase
                    database.ref('users/' + user.uid).set({
                        name: user.displayName,
                        email: user.email,
                        photoURL: user.photoURL,
                        lastLogin: new Date().toISOString()
                    });
                })
                .catch(error => {
                    console.error('Google sign-in error:', error);
                    alert('Error signing in with Google: ' + error.message);
                });
        }

        function signOut() {
            auth.signOut();
        }

        function showAuthModal() {
            document.getElementById('authModal').classList.remove('hidden');
        }

        function showAddCompanyModal() {
            if (!currentUser) {
                alert('Please sign in to add companies');
                showAuthModal();
                return;
            }
            document.getElementById('addCompanyModal').classList.remove('hidden');
        }

        function showAddPersonModal() {
            if (!currentUser) {
                alert('Please sign in to add profiles');
                showAuthModal();
                return;
            }
            document.getElementById('addPersonModal').classList.remove('hidden');
        }

        function showAddInvestorModal() {
            if (!currentUser) {
                alert('Please sign in to add investors');
                showAuthModal();
                return;
            }
            alert('Investor form coming soon!');
        }

        function showAddSchoolModal() {
            if (!currentUser) {
                alert('Please sign in to add schools');
                showAuthModal();
                return;
            }
            alert('School form coming soon!');
        }



        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }

        function applyFilters() {
            const industry = document.getElementById('industryFilter').value;
            const size = document.getElementById('sizeFilter').value;
            const location = document.getElementById('locationFilter').value;
            
            let filtered = allCompanies;
            
            if (industry) {
                filtered = filtered.filter(company => company.industry === industry);
            }
            
            if (size) {
                filtered = filtered.filter(company => company.employeeCount === size);
            }
            
            if (location) {
                filtered = filtered.filter(company => company.location.includes(location));
            }
            
            // Update companies grid with filtered results
            const container = document.getElementById('companiesGrid');
            container.innerHTML = filtered.map(company => `
                <div class="card-hover bg-white rounded-xl shadow-sm p-6 cursor-pointer" onclick="showCompanyDetail('${company.id}')">
                    <div class="flex items-center space-x-4 mb-4">
                        <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-500 rounded-xl flex items-center justify-center text-white text-2xl">
                            ${company.logo}
                        </div>
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900 text-lg">${company.name}</h3>
                            <p class="text-gray-600">${company.industry}</p>
                            <p class="text-sm text-gray-500">${company.location}</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm mb-4 line-clamp-2">${company.description}</p>
                    <div class="flex justify-between items-center mb-4">
                        <span class="industry-tag text-white text-xs px-3 py-1 rounded-full">${company.industry}</span>
                        <span class="text-sm text-gray-500">${company.employeeCount} employees</span>
                    </div>
                    ${company.totalFunding ? `
                        <div class="border-t pt-4">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">Total Funding</span>
                                <span class="font-semibold text-green-600">$${(company.totalFunding / 1000000).toFixed(1)}M</span>
                            </div>
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        function loadUserData() {
            // Load user-specific data from Firebase
            database.ref('companies').orderByChild('createdBy').equalTo(currentUser.uid).once('value', snapshot => {
                // Handle user's companies
            });
        }

        // Close search results when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('#globalSearch') && !e.target.closest('#searchResults')) {
                document.getElementById('searchResults').classList.add('hidden');
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96f620dc55b03d12',t:'MTc1NTIzNDAyNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
