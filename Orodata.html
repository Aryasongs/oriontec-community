<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VentureScope - Business Intelligence Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .profile-card { background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); }
        .funding-chart { height: 300px; }
        .nav-item { transition: all 0.2s ease; }
        .nav-item:hover { background-color: rgba(255,255,255,0.1); }
        .search-dropdown { max-height: 300px; overflow-y: auto; }
        .employee-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem; }
        .news-item { border-left: 4px solid #667eea; }
        .diversity-tag { background: linear-gradient(45deg, #ff6b6b, #feca57); }
        .loading-spinner { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .modal-backdrop { backdrop-filter: blur(4px); }
        .form-section { border-left: 3px solid #667eea; }
        .stats-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .industry-tag { background: linear-gradient(45deg, #667eea, #764ba2); }
        .role-badge { background: linear-gradient(45deg, #4ecdc4, #44a08d); }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="gradient-bg text-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <div class="w-8 h-8 bg-white rounded-lg flex items-center justify-center">
                            <i class="fas fa-chart-network text-purple-600"></i>
                        </div>
                        <span class="text-xl font-bold">VentureScope</span>
                    </div>
                    <div class="hidden md:flex space-x-1">
                        <button onclick="showSection('dashboard')" class="nav-item px-3 py-2 rounded-md text-sm font-medium">Dashboard</button>
                        <button onclick="showSection('companies')" class="nav-item px-3 py-2 rounded-md text-sm font-medium">Companies</button>
                        <button onclick="showSection('people')" class="nav-item px-3 py-2 rounded-md text-sm font-medium">People</button>
                        <button onclick="showSection('investors')" class="nav-item px-3 py-2 rounded-md text-sm font-medium">Investors</button>
                        <button onclick="showSection('schools')" class="nav-item px-3 py-2 rounded-md text-sm font-medium">Schools</button>
                    </div>
                </div>
                
                <!-- Search Bar -->
                <div class="flex-1 max-w-lg mx-4 relative">
                    <div class="relative">
                        <input type="text" id="globalSearch" placeholder="Search companies, people, investors..." 
                               class="w-full px-4 py-2 pl-10 pr-4 text-gray-900 bg-white rounded-lg focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                    <div id="searchResults" class="search-dropdown absolute top-full left-0 right-0 bg-white rounded-lg shadow-lg mt-1 hidden z-50"></div>
                </div>

                <div class="flex items-center space-x-4">
                    <div id="authSection" class="flex items-center space-x-2">
                        <button onclick="showAuthModal()" class="bg-white text-purple-600 px-4 py-2 rounded-lg font-medium hover:bg-gray-100 transition">
                            Sign In
                        </button>
                    </div>
                    <div id="userSection" class="hidden flex items-center space-x-2">
                        <img id="userAvatar" class="w-8 h-8 rounded-full" src="" alt="User">
                        <span id="userName" class="font-medium"></span>
                        <button onclick="signOut()" class="text-sm hover:text-gray-200">Sign Out</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Dashboard Section -->
        <div id="dashboardSection" class="section">
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-gray-900 mb-2">Welcome to VentureScope</h1>
                <p class="text-gray-600">Discover companies, connect with professionals, and track the business ecosystem</p>
            </div>

            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="stats-card text-white p-6 rounded-xl">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-white/80 text-sm">Total Companies</p>
                            <p class="text-2xl font-bold" id="totalCompanies">0</p>
                        </div>
                        <i class="fas fa-building text-2xl text-white/60"></i>
                    </div>
                </div>
                <div class="bg-green-500 text-white p-6 rounded-xl">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-white/80 text-sm">Active Professionals</p>
                            <p class="text-2xl font-bold" id="totalPeople">0</p>
                        </div>
                        <i class="fas fa-users text-2xl text-white/60"></i>
                    </div>
                </div>
                <div class="bg-orange-500 text-white p-6 rounded-xl">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-white/80 text-sm">Investment Firms</p>
                            <p class="text-2xl font-bold" id="totalInvestors">0</p>
                        </div>
                        <i class="fas fa-chart-line text-2xl text-white/60"></i>
                    </div>
                </div>
                <div class="bg-blue-500 text-white p-6 rounded-xl">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-white/80 text-sm">Educational Institutions</p>
                            <p class="text-2xl font-bold" id="totalSchools">0</p>
                        </div>
                        <i class="fas fa-graduation-cap text-2xl text-white/60"></i>
                    </div>
                </div>
            </div>

            <!-- Featured Companies -->
            <div class="bg-white rounded-xl shadow-sm p-6 mb-8">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-semibold text-gray-900">Featured Companies</h2>
                    <button onclick="showSection('companies')" class="text-purple-600 hover:text-purple-700 font-medium">View All</button>
                </div>
                <div id="featuredCompanies" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
            </div>

            <!-- Recent Activity -->
            <div class="bg-white rounded-xl shadow-sm p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-6">Recent Activity</h2>
                <div id="recentActivity" class="space-y-4"></div>
            </div>
        </div>

        <!-- Companies Section -->
        <div id="companiesSection" class="section hidden">
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-3xl font-bold text-gray-900">Companies</h1>
                <button onclick="showAddCompanyModal()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition">
                    <i class="fas fa-plus mr-2"></i>Add Company
                </button>
            </div>

            <!-- Filters -->
            <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <select id="industryFilter" class="border border-gray-300 rounded-lg px-3 py-2">
                        <option value="">All Industries</option>
                        <option value="Technology">Technology</option>
                        <option value="Healthcare">Healthcare</option>
                        <option value="Finance">Finance</option>
                        <option value="Education">Education</option>
                        <option value="Retail">Retail</option>
                    </select>
                    <select id="sizeFilter" class="border border-gray-300 rounded-lg px-3 py-2">
                        <option value="">All Sizes</option>
                        <option value="1-10">1-10 employees</option>
                        <option value="11-50">11-50 employees</option>
                        <option value="51-200">51-200 employees</option>
                        <option value="201-500">201-500 employees</option>
                        <option value="501+">501+ employees</option>
                    </select>
                    <select id="locationFilter" class="border border-gray-300 rounded-lg px-3 py-2">
                        <option value="">All Locations</option>
                        <option value="San Francisco">San Francisco</option>
                        <option value="New York">New York</option>
                        <option value="London">London</option>
                        <option value="Berlin">Berlin</option>
                    </select>
                    <button onclick="applyFilters()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition">
                        Apply Filters
                    </button>
                </div>
            </div>

            <!-- Companies Grid -->
            <div id="companiesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </div>

        <!-- People Section -->
        <div id="peopleSection" class="section hidden">
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-3xl font-bold text-gray-900">Professionals</h1>
                <button onclick="showAddPersonModal()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition">
                    <i class="fas fa-plus mr-2"></i>Add Profile
                </button>
            </div>
            <div id="peopleGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </div>

        <!-- Investors Section -->
        <div id="investorsSection" class="section hidden">
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-3xl font-bold text-gray-900">Investment Firms</h1>
                <button onclick="showAddInvestorModal()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition">
                    <i class="fas fa-plus mr-2"></i>Add Investor
                </button>
            </div>
            <div id="investorsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </div>

        <!-- Schools Section -->
        <div id="schoolsSection" class="section hidden">
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-3xl font-bold text-gray-900">Educational Institutions</h1>
                <button onclick="showAddSchoolModal()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition">
                    <i class="fas fa-plus mr-2"></i>Add School
                </button>
            </div>
            <div id="schoolsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </div>
    </div>

    <!-- Company Detail Modal -->
    <div id="companyModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-6xl w-full max-h-screen overflow-y-auto">
            <div id="companyModalContent"></div>
        </div>
    </div>

    <!-- Person Detail Modal -->
    <div id="personModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-4xl w-full max-h-screen overflow-y-auto">
            <div id="personModalContent"></div>
        </div>
    </div>

    <!-- Add Company Modal -->
    <div id="addCompanyModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-4xl w-full max-h-screen overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-900">Add New Company</h2>
                    <button onclick="closeModal('addCompanyModal')" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <form id="addCompanyForm" class="space-y-8">
                    <!-- Basic Information -->
                    <div class="form-section pl-4">
                        <h3 class="text-lg font-semibold mb-4">Basic Information</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Company Name *</label>
                                <input type="text" name="name" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Legal Name</label>
                                <input type="text" name="legalName" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Tagline</label>
                                <input type="text" name="tagline" placeholder="Short description of what the company does" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Company Type</label>
                                <select name="type" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option value="Private">Private</option>
                                    <option value="Public">Public</option>
                                    <option value="Non-profit">Non-profit</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Founded Date</label>
                                <input type="date" name="foundedDate" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                                <select name="status" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option value="Active">Active</option>
                                    <option value="IPO'd">IPO'd</option>
                                    <option value="Acquired">Acquired</option>
                                    <option value="Closed">Closed</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Industry & Location -->
                    <div class="form-section pl-4">
                        <h3 class="text-lg font-semibold mb-4">Industry & Location</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Primary Industry</label>
                                <select name="industry" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option value="Technology">Technology</option>
                                    <option value="Healthcare">Healthcare</option>
                                    <option value="Finance">Finance</option>
                                    <option value="Education">Education</option>
                                    <option value="Retail">Retail</option>
                                    <option value="Manufacturing">Manufacturing</option>
                                    <option value="E-commerce">E-commerce</option>
                                    <option value="SaaS">SaaS</option>
                                    <option value="Fintech">Fintech</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Industry Tags</label>
                                <input type="text" name="industryTags" placeholder="e.g., SaaS, AI/ML, Enterprise (comma separated)" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Headquarters Location</label>
                                <input type="text" name="location" placeholder="City, Country" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Number of Employees</label>
                                <select name="employeeCount" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option value="1-10">1-10</option>
                                    <option value="11-50">11-50</option>
                                    <option value="51-200">51-200</option>
                                    <option value="201-500">201-500</option>
                                    <option value="501-1000">501-1000</option>
                                    <option value="1001+">1001+</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Contact Information -->
                    <div class="form-section pl-4">
                        <h3 class="text-lg font-semibold mb-4">Contact Information</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Website</label>
                                <input type="url" name="website" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Phone</label>
                                <input type="tel" name="phone" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                <input type="email" name="email" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Address</label>
                                <input type="text" name="address" placeholder="Full address" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                        </div>
                    </div>

                    <!-- Social Media -->
                    <div class="form-section pl-4">
                        <h3 class="text-lg font-semibold mb-4">Social Media</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">LinkedIn</label>
                                <input type="url" name="linkedin" placeholder="https://linkedin.com/company/..." class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Twitter</label>
                                <input type="url" name="twitter" placeholder="https://twitter.com/..." class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Facebook</label>
                                <input type="url" name="facebook" placeholder="https://facebook.com/..." class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Instagram</label>
                                <input type="url" name="instagram" placeholder="https://instagram.com/..." class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                        </div>
                    </div>

                    <!-- Description -->
                    <div class="form-section pl-4">
                        <h3 class="text-lg font-semibold mb-4">Company Description</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Short Description</label>
                                <textarea name="description" rows="3" placeholder="Brief description for listings" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Detailed Description</label>
                                <textarea name="detailedDescription" rows="5" placeholder="Comprehensive description including mission, products, and services" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Founders -->
                    <div class="form-section pl-4">
                        <h3 class="text-lg font-semibold mb-4">Founders (Optional)</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Founder 1 Name</label>
                                <input type="text" name="founder1Name" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Founder 1 Role</label>
                                <input type="text" name="founder1Role" placeholder="e.g., CEO & Co-Founder" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Founder 2 Name</label>
                                <input type="text" name="founder2Name" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Founder 2 Role</label>
                                <input type="text" name="founder2Role" placeholder="e.g., CTO & Co-Founder" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-end space-x-4 pt-6 border-t">
                        <button type="button" onclick="closeModal('addCompanyModal')" class="px-6 py-2 text-gray-600 hover:text-gray-800 font-medium">Cancel</button>
                        <button type="submit" class="bg-purple-600 text-white px-8 py-2 rounded-lg hover:bg-purple-700 transition font-medium">Add Company</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Person Modal -->
    <div id="addPersonModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-4xl w-full max-h-screen overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-900">Add Professional Profile</h2>
                    <button onclick="closeModal('addPersonModal')" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <form id="addPersonForm" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Full Name *</label>
                            <input type="text" name="name" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Current Title</label>
                            <input type="text" name="title" placeholder="e.g., CEO at TechCorp" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Company</label>
                            <input type="text" name="company" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Location</label>
                            <input type="text" name="location" placeholder="City, Country" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">LinkedIn URL</label>
                            <input type="url" name="linkedin" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                            <input type="email" name="email" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Bio</label>
                        <textarea name="bio" rows="4" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"></textarea>
                    </div>
                    <div class="flex justify-end space-x-4">
                        <button type="button" onclick="closeModal('addPersonModal')" class="px-4 py-2 text-gray-600 hover:text-gray-800">Cancel</button>
                        <button type="submit" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition">Add Profile</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-md w-full">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-900">Sign In to VentureScope</h2>
                    <button onclick="closeModal('authModal')" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <div class="text-center">
                    <p class="text-gray-600 mb-6">Connect with Google to access all features</p>
                    <button onclick="signInWithGoogle()" class="w-full bg-white border border-gray-300 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-50 transition flex items-center justify-center space-x-3 shadow-sm">
                        <svg class="w-5 h-5" viewBox="0 0 24 24">
                            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                        </svg>
                        <span class="font-medium">Continue with Google</span>
                    </button>
                    <p class="text-xs text-gray-500 mt-4">By signing in, you agree to our Terms of Service and Privacy Policy</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyB8LHDAPglInvEBL1rxpuR_1QWQi98N18M",
            authDomain: "companiesdata-ed512.firebaseapp.com",
            databaseURL: "https://companiesdata-ed512-default-rtdb.firebaseio.com",
            projectId: "companiesdata-ed512",
            storageBucket: "companiesdata-ed512.firebasestorage.app",
            messagingSenderId: "348949569607",
            appId: "1:348949569607:web:a41066ac5c538efcde5162"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const database = firebase.database();
        const storage = firebase.storage();

        // Global variables
        let currentUser = null;
        let allCompanies = [];
        let allPeople = [];
        let allInvestors = [];
        let allSchools = [];

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupEventListeners();
            loadSampleData();
        });

        function initializeApp() {
            // Auth state observer
            auth.onAuthStateChanged(user => {
                currentUser = user;
                updateAuthUI();
                if (user) {
                    loadUserData();
                }
            });

            // Show dashboard by default
            showSection('dashboard');
        }

        function setupEventListeners() {
            // Global search
            document.getElementById('globalSearch').addEventListener('input', handleGlobalSearch);
            
            // Forms
            document.getElementById('addCompanyForm').addEventListener('submit', handleAddCompany);
            document.getElementById('addPersonForm').addEventListener('submit', handleAddPerson);

            // Close modals on backdrop click
            document.querySelectorAll('.modal-backdrop').forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.classList.add('hidden');
                    }
                });
            });
        }

        function loadSampleData() {
            // Sample companies with comprehensive Crunchbase-style data
            const sampleCompanies = [
                {
                    id: 'comp1',
                    name: 'TechFlow Solutions',
                    legalName: 'TechFlow Solutions Inc.',
                    alternateNames: ['TechFlow', 'TF Solutions'],
                    tagline: 'Automating workflows with AI-powered intelligence',
                    type: 'Private',
                    companyType: 'For Profit',
                    foundedDate: '2020-03-15',
                    employeeCount: '51-200',
                    employeeRange: '51-100',
                    website: 'https://techflow.com',
                    industry: 'Technology',
                    industryTags: ['SaaS', 'AI/ML', 'Enterprise Software'],
                    location: 'San Francisco, CA',
                    headquarters: {
                        address: '123 Market Street, San Francisco, CA 94105',
                        phone: '+1 (555) 123-4567',
                        email: 'info@techflow.com'
                    },
                    description: 'AI-powered workflow automation platform helping businesses streamline operations and increase productivity through intelligent process automation.',
                    detailedDescription: 'TechFlow Solutions is a leading provider of AI-powered workflow automation solutions that help enterprises streamline their operations, reduce manual tasks, and increase overall productivity. Our platform uses advanced machine learning algorithms to analyze business processes and automatically optimize workflows, saving companies time and resources while improving accuracy and efficiency.',
                    logo: 'üöÄ',
                    status: 'Active',
                    operatingStatus: 'Active',
                    crunchbaseRank: 15420,
                    socialMedia: {
                        linkedin: 'https://linkedin.com/company/techflow-solutions',
                        twitter: 'https://twitter.com/techflowsol',
                        facebook: 'https://facebook.com/techflowsolutions',
                        instagram: 'https://instagram.com/techflowsolutions'
                    },
                    founders: [
                        { name: 'Sarah Chen', role: 'CEO & Co-Founder' },
                        { name: 'Michael Rodriguez', role: 'CTO & Co-Founder' }
                    ],
                    totalFunding: 15000000,
                    fundingRounds: [
                        { 
                            date: '2020-08-01', 
                            type: 'Pre-Seed', 
                            amount: 500000, 
                            investors: ['Angel Investors', 'Founder Friends'],
                            leadInvestor: 'Angel Investors'
                        },
                        { 
                            date: '2021-06-01', 
                            type: 'Series A', 
                            amount: 5000000, 
                            investors: ['Venture Capital Partners', 'Innovation Fund'],
                            leadInvestor: 'Venture Capital Partners'
                        },
                        { 
                            date: '2022-11-15', 
                            type: 'Series B', 
                            amount: 10000000, 
                            investors: ['Growth Equity Fund', 'Tech Ventures', 'Strategic Partners'],
                            leadInvestor: 'Growth Equity Fund'
                        }
                    ],
                    latestFundingDate: '2022-11-15',
                    fundingStage: 'Series B',
                    valuation: 75000000,
                    leadership: {
                        current: [
                            { name: 'Sarah Chen', title: 'CEO & Co-Founder', startDate: '2020-03-15', current: true, bio: 'Serial entrepreneur with 10+ years in AI and automation' },
                            { name: 'Michael Rodriguez', title: 'CTO & Co-Founder', startDate: '2020-03-15', current: true, bio: 'Former Google engineer specializing in ML infrastructure' },
                            { name: 'Jennifer Park', title: 'VP of Sales', startDate: '2021-08-01', current: true, bio: 'Enterprise sales leader with SaaS expertise' },
                            { name: 'David Kim', title: 'Head of Product', startDate: '2021-03-15', current: true, bio: 'Product management veteran from Microsoft' }
                        ],
                        past: [
                            { name: 'Robert Johnson', title: 'Former VP Marketing', startDate: '2020-12-01', endDate: '2022-06-30', current: false }
                        ],
                        advisors: [
                            { name: 'Dr. Lisa Wang', title: 'Technical Advisor', company: 'Stanford AI Lab' },
                            { name: 'Mark Thompson', title: 'Business Advisor', company: 'Former Salesforce VP' }
                        ]
                    },
                    acquisitions: {
                        acquired: [
                            { company: 'DataSync Pro', date: '2022-03-15', amount: 2000000, reason: 'Data integration capabilities' }
                        ],
                        acquiredBy: null
                    },
                    products: [
                        { name: 'TechFlow Automation Suite', description: 'Core workflow automation platform' },
                        { name: 'TechFlow Analytics', description: 'Business intelligence and reporting tools' },
                        { name: 'TechFlow API', description: 'Developer tools and integrations' }
                    ],
                    technologyStack: ['AWS', 'Python', 'React', 'PostgreSQL', 'Docker', 'Kubernetes'],
                    customers: ['Fortune 500 Companies', 'Mid-market Enterprises', 'Growing Startups'],
                    competitors: ['Zapier', 'Microsoft Power Automate', 'UiPath'],
                    news: [
                        { date: '2023-01-15', headline: 'TechFlow Raises $10M Series B to Expand AI Capabilities', category: 'Funding', source: 'TechCrunch' },
                        { date: '2023-03-20', headline: 'Named Best AI Startup 2023 by Industry Awards', category: 'Award', source: 'AI Weekly' },
                        { date: '2023-05-10', headline: 'TechFlow Partners with Microsoft for Enterprise Integration', category: 'Partnership', source: 'Business Wire' }
                    ],
                    milestones: [
                        { date: '2020-03-15', event: 'Company Founded', description: 'TechFlow Solutions incorporated' },
                        { date: '2020-08-01', event: 'Pre-Seed Funding', description: 'Raised $500K pre-seed round' },
                        { date: '2021-01-15', event: 'Product Launch', description: 'Launched TechFlow Automation Suite' },
                        { date: '2021-06-01', event: 'Series A', description: 'Closed $5M Series A funding' },
                        { date: '2022-03-15', event: 'First Acquisition', description: 'Acquired DataSync Pro' },
                        { date: '2022-11-15', event: 'Series B', description: 'Raised $10M Series B round' }
                    ],
                    metrics: {
                        monthlyVisits: 125000,
                        revenueRange: '$1M - $10M',
                        employeeGrowth: '+45% YoY',
                        customerCount: '500+'
                    }
                },
                {
                    id: 'comp2',
                    name: 'HealthTech Innovations',
                    legalName: 'HealthTech Innovations LLC',
                    type: 'For Profit',
                    foundedDate: '2019-08-10',
                    employeeCount: '11-50',
                    website: 'https://healthtech-innovations.com',
                    industry: 'Healthcare',
                    location: 'Boston, MA',
                    description: 'Digital health platform connecting patients with personalized care solutions.',
                    logo: 'üè•',
                    totalFunding: 8000000,
                    fundingRounds: [
                        { date: '2020-04-01', type: 'Seed', amount: 2000000, investors: ['Health Ventures'] },
                        { date: '2022-01-15', type: 'Series A', amount: 6000000, investors: ['Medical Innovation Fund'] }
                    ],
                    employees: [
                        { name: 'Dr. Emily Watson', title: 'CEO', startDate: '2019-08-10', current: true },
                        { name: 'James Park', title: 'Head of Product', startDate: '2020-01-15', current: true }
                    ]
                },
                {
                    id: 'comp3',
                    name: 'EduLearn Platform',
                    legalName: 'EduLearn Platform Corp',
                    type: 'For Profit',
                    foundedDate: '2021-01-20',
                    employeeCount: '1-10',
                    website: 'https://edulearn.com',
                    industry: 'Education',
                    location: 'Austin, TX',
                    description: 'Interactive learning platform for K-12 students with AI-powered personalization.',
                    logo: 'üìö',
                    totalFunding: 3000000,
                    fundingRounds: [
                        { date: '2021-09-01', type: 'Pre-Seed', amount: 500000, investors: ['Education Angels'] },
                        { date: '2022-06-15', type: 'Seed', amount: 2500000, investors: ['Learning Ventures', 'EdTech Fund'] }
                    ],
                    employees: [
                        { name: 'Alex Thompson', title: 'Founder & CEO', startDate: '2021-01-20', current: true }
                    ]
                }
            ];

            // Sample people
            const samplePeople = [
                {
                    id: 'person1',
                    name: 'Sarah Chen',
                    title: 'CEO & Founder at TechFlow Solutions',
                    company: 'TechFlow Solutions',
                    location: 'San Francisco, CA',
                    bio: 'Serial entrepreneur with 10+ years in AI and automation. Previously founded two successful startups.',
                    linkedin: 'https://linkedin.com/in/sarahchen',
                    email: 'sarah@techflow.com',
                    avatar: 'üë©‚Äçüíº',
                    experience: [
                        { company: 'TechFlow Solutions', role: 'CEO & Founder', startDate: '2020-03-15', current: true },
                        { company: 'Previous Startup', role: 'CTO', startDate: '2017-01-01', endDate: '2020-02-28' }
                    ],
                    education: [
                        { school: 'Stanford University', degree: 'MS Computer Science', year: '2016' },
                        { school: 'UC Berkeley', degree: 'BS Engineering', year: '2014' }
                    ]
                },
                {
                    id: 'person2',
                    name: 'Dr. Emily Watson',
                    title: 'CEO at HealthTech Innovations',
                    company: 'HealthTech Innovations',
                    location: 'Boston, MA',
                    bio: 'Medical doctor turned entrepreneur, passionate about improving healthcare accessibility through technology.',
                    linkedin: 'https://linkedin.com/in/emilywatson',
                    email: 'emily@healthtech-innovations.com',
                    avatar: 'üë©‚Äç‚öïÔ∏è',
                    experience: [
                        { company: 'HealthTech Innovations', role: 'CEO', startDate: '2019-08-10', current: true },
                        { company: 'Boston Medical Center', role: 'Physician', startDate: '2015-06-01', endDate: '2019-07-31' }
                    ],
                    education: [
                        { school: 'Harvard Medical School', degree: 'MD', year: '2015' },
                        { school: 'MIT', degree: 'BS Bioengineering', year: '2011' }
                    ]
                }
            ];

            // Sample investors
            const sampleInvestors = [
                {
                    id: 'inv1',
                    name: 'Venture Capital Partners',
                    type: 'Venture Capital',
                    location: 'Palo Alto, CA',
                    description: 'Early-stage VC firm focused on AI and enterprise software.',
                    website: 'https://vcpartners.com',
                    logo: 'üíº',
                    totalInvestments: 45,
                    portfolioCompanies: ['TechFlow Solutions', 'DataCorp', 'AI Innovations']
                },
                {
                    id: 'inv2',
                    name: 'Health Ventures',
                    type: 'Venture Capital',
                    location: 'Boston, MA',
                    description: 'Healthcare-focused investment firm backing digital health startups.',
                    website: 'https://healthventures.com',
                    logo: 'üè•',
                    totalInvestments: 32,
                    portfolioCompanies: ['HealthTech Innovations', 'MedTech Solutions']
                }
            ];

            // Sample schools
            const sampleSchools = [
                {
                    id: 'school1',
                    name: 'Stanford University',
                    type: 'Private University',
                    location: 'Stanford, CA',
                    description: 'Leading research university known for innovation and entrepreneurship.',
                    website: 'https://stanford.edu',
                    logo: 'üéì',
                    founded: '1885',
                    students: '17,000',
                    notableAlumni: ['Sarah Chen', 'Mark Johnson']
                },
                {
                    id: 'school2',
                    name: 'Harvard Medical School',
                    type: 'Medical School',
                    location: 'Boston, MA',
                    description: 'Premier medical education institution training future healthcare leaders.',
                    website: 'https://hms.harvard.edu',
                    logo: 'üè•',
                    founded: '1782',
                    students: '1,700',
                    notableAlumni: ['Dr. Emily Watson']
                }
            ];

            // Store sample data
            allCompanies = sampleCompanies;
            allPeople = samplePeople;
            allInvestors = sampleInvestors;
            allSchools = sampleSchools;

            // Update UI
            updateDashboardStats();
            renderFeaturedCompanies();
            renderCompanies();
            renderPeople();
            renderInvestors();
            renderSchools();
        }

        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            document.getElementById(sectionName + 'Section').classList.remove('hidden');
            
            // Update navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('bg-white', 'bg-opacity-20');
            });
            event.target.classList.add('bg-white', 'bg-opacity-20');
        }

        function updateAuthUI() {
            const authSection = document.getElementById('authSection');
            const userSection = document.getElementById('userSection');
            
            if (currentUser) {
                authSection.classList.add('hidden');
                userSection.classList.remove('hidden');
                document.getElementById('userName').textContent = currentUser.displayName || currentUser.email;
                document.getElementById('userAvatar').src = currentUser.photoURL || `https://ui-avatars.com/api/?name=${encodeURIComponent(currentUser.displayName || currentUser.email)}&background=667eea&color=fff`;
            } else {
                authSection.classList.remove('hidden');
                userSection.classList.add('hidden');
            }
        }

        function updateDashboardStats() {
            document.getElementById('totalCompanies').textContent = allCompanies.length;
            document.getElementById('totalPeople').textContent = allPeople.length;
            document.getElementById('totalInvestors').textContent = allInvestors.length;
            document.getElementById('totalSchools').textContent = allSchools.length;
        }

        function renderFeaturedCompanies() {
            const container = document.getElementById('featuredCompanies');
            const featured = allCompanies.slice(0, 3);
            
            container.innerHTML = featured.map(company => `
                <div class="card-hover bg-white rounded-xl shadow-sm p-6 cursor-pointer" onclick="showCompanyDetail('${company.id}')">
                    <div class="flex items-center space-x-4 mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-500 rounded-lg flex items-center justify-center text-white text-xl">
                            ${company.logo}
                        </div>
                        <div>
                            <h3 class="font-semibold text-gray-900">${company.name}</h3>
                            <p class="text-sm text-gray-600">${company.industry}</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">${company.description}</p>
                    <div class="flex justify-between items-center">
                        <span class="industry-tag text-white text-xs px-2 py-1 rounded-full">${company.industry}</span>
                        <span class="text-sm text-gray-500">${company.location}</span>
                    </div>
                </div>
            `).join('');
        }

        function renderCompanies() {
            const container = document.getElementById('companiesGrid');
            
            container.innerHTML = allCompanies.map(company => `
                <div class="card-hover bg-white rounded-xl shadow-sm p-6 cursor-pointer" onclick="showCompanyDetail('${company.id}')">
                    <div class="flex items-center space-x-4 mb-4">
                        <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-500 rounded-xl flex items-center justify-center text-white text-2xl">
                            ${company.logo}
                        </div>
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900 text-lg">${company.name}</h3>
                            <p class="text-gray-600">${company.industry}</p>
                            <p class="text-sm text-gray-500">${company.location}</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm mb-4 line-clamp-2">${company.description}</p>
                    <div class="flex justify-between items-center mb-4">
                        <span class="industry-tag text-white text-xs px-3 py-1 rounded-full">${company.industry}</span>
                        <span class="text-sm text-gray-500">${company.employeeCount} employees</span>
                    </div>
                    ${company.totalFunding ? `
                        <div class="border-t pt-4">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">Total Funding</span>
                                <span class="font-semibold text-green-600">$${(company.totalFunding / 1000000).toFixed(1)}M</span>
                            </div>
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        function renderPeople() {
            const container = document.getElementById('peopleGrid');
            
            container.innerHTML = allPeople.map(person => `
                <div class="card-hover bg-white rounded-xl shadow-sm p-6 cursor-pointer" onclick="showPersonDetail('${person.id}')">
                    <div class="flex items-center space-x-4 mb-4">
                        <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-blue-500 rounded-full flex items-center justify-center text-white text-2xl">
                            ${person.avatar}
                        </div>
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900 text-lg">${person.name}</h3>
                            <p class="text-gray-600">${person.title}</p>
                            <p class="text-sm text-gray-500">${person.location}</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm mb-4 line-clamp-3">${person.bio}</p>
                    <div class="flex justify-between items-center">
                        <span class="role-badge text-white text-xs px-3 py-1 rounded-full">${person.company}</span>
                        ${person.linkedin ? '<i class="fab fa-linkedin text-blue-600"></i>' : ''}
                    </div>
                </div>
            `).join('');
        }

        function renderInvestors() {
            const container = document.getElementById('investorsGrid');
            
            container.innerHTML = allInvestors.map(investor => `
                <div class="card-hover bg-white rounded-xl shadow-sm p-6">
                    <div class="flex items-center space-x-4 mb-4">
                        <div class="w-16 h-16 bg-gradient-to-br from-orange-500 to-red-500 rounded-xl flex items-center justify-center text-white text-2xl">
                            ${investor.logo}
                        </div>
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900 text-lg">${investor.name}</h3>
                            <p class="text-gray-600">${investor.type}</p>
                            <p class="text-sm text-gray-500">${investor.location}</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">${investor.description}</p>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">${investor.totalInvestments} investments</span>
                        <a href="${investor.website}" target="_blank" class="text-purple-600 hover:text-purple-700">
                            <i class="fas fa-external-link-alt"></i>
                        </a>
                    </div>
                </div>
            `).join('');
        }

        function renderSchools() {
            const container = document.getElementById('schoolsGrid');
            
            container.innerHTML = allSchools.map(school => `
                <div class="card-hover bg-white rounded-xl shadow-sm p-6">
                    <div class="flex items-center space-x-4 mb-4">
                        <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-500 rounded-xl flex items-center justify-center text-white text-2xl">
                            ${school.logo}
                        </div>
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900 text-lg">${school.name}</h3>
                            <p class="text-gray-600">${school.type}</p>
                            <p class="text-sm text-gray-500">${school.location}</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">${school.description}</p>
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div>
                            <span class="text-gray-500">Founded:</span>
                            <span class="font-medium">${school.founded}</span>
                        </div>
                        <div>
                            <span class="text-gray-500">Students:</span>
                            <span class="font-medium">${school.students}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function showCompanyDetail(companyId) {
            const company = allCompanies.find(c => c.id === companyId);
            if (!company) return;

            const modal = document.getElementById('companyModal');
            const content = document.getElementById('companyModalContent');
            
            content.innerHTML = `
                <div class="relative">
                    <!-- Header Section -->
                    <div class="profile-card h-64 rounded-t-xl p-6">
                        <button onclick="closeModal('companyModal')" class="absolute top-4 right-4 text-white hover:text-gray-200 z-10">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                        
                        <div class="flex flex-col h-full">
                            <!-- Top Row: Logo, Name, Basic Info -->
                            <div class="flex items-start space-x-6 mb-4">
                                <div class="w-20 h-20 bg-white rounded-xl flex items-center justify-center text-3xl shadow-lg">
                                    ${company.logo}
                                </div>
                                <div class="flex-1 text-white">
                                    <h1 class="text-3xl font-bold mb-1">${company.name}</h1>
                                    <p class="text-lg opacity-90 mb-2">${company.tagline || company.description}</p>
                                    <div class="flex items-center space-x-4 text-sm opacity-80">
                                        <span><i class="fas fa-map-marker-alt mr-1"></i>${company.location}</span>
                                        <span><i class="fas fa-calendar mr-1"></i>Founded ${new Date(company.foundedDate).getFullYear()}</span>
                                        <span class="px-2 py-1 bg-white bg-opacity-20 rounded-full">${company.status}</span>
                                    </div>
                                </div>
                                <div class="text-right text-white">
                                    <div class="text-sm opacity-80 mb-1">Crunchbase Rank</div>
                                    <div class="text-xl font-bold">#${company.crunchbaseRank || 'N/A'}</div>
                                </div>
                            </div>
                            
                            <!-- Bottom Row: Industry Tags, Links, Quick Stats -->
                            <div class="flex justify-between items-end">
                                <div class="flex flex-wrap gap-2">
                                    ${(company.industryTags || [company.industry]).map(tag => 
                                        `<span class="bg-white bg-opacity-20 text-white text-xs px-3 py-1 rounded-full">${tag}</span>`
                                    ).join('')}
                                </div>
                                
                                <div class="flex items-center space-x-4">
                                    ${company.website ? `<a href="${company.website}" target="_blank" class="text-white hover:text-gray-200"><i class="fas fa-globe text-lg"></i></a>` : ''}
                                    ${company.socialMedia?.linkedin ? `<a href="${company.socialMedia.linkedin}" target="_blank" class="text-white hover:text-gray-200"><i class="fab fa-linkedin text-lg"></i></a>` : ''}
                                    ${company.socialMedia?.twitter ? `<a href="${company.socialMedia.twitter}" target="_blank" class="text-white hover:text-gray-200"><i class="fab fa-twitter text-lg"></i></a>` : ''}
                                    ${company.socialMedia?.facebook ? `<a href="${company.socialMedia.facebook}" target="_blank" class="text-white hover:text-gray-200"><i class="fab fa-facebook text-lg"></i></a>` : ''}
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tab Navigation -->
                    <div class="border-b bg-white">
                        <div class="flex space-x-8 px-6">
                            <button onclick="showCompanyTab('overview')" class="company-tab active py-4 px-2 border-b-2 border-purple-600 text-purple-600 font-medium">Overview</button>
                            <button onclick="showCompanyTab('funding')" class="company-tab py-4 px-2 border-b-2 border-transparent text-gray-600 hover:text-gray-900">Funding</button>
                            <button onclick="showCompanyTab('leadership')" class="company-tab py-4 px-2 border-b-2 border-transparent text-gray-600 hover:text-gray-900">Leadership</button>
                            <button onclick="showCompanyTab('acquisitions')" class="company-tab py-4 px-2 border-b-2 border-transparent text-gray-600 hover:text-gray-900">Acquisitions</button>
                            <button onclick="showCompanyTab('products')" class="company-tab py-4 px-2 border-b-2 border-transparent text-gray-600 hover:text-gray-900">Products</button>
                            <button onclick="showCompanyTab('news')" class="company-tab py-4 px-2 border-b-2 border-transparent text-gray-600 hover:text-gray-900">News</button>
                            <button onclick="showCompanyTab('timeline')" class="company-tab py-4 px-2 border-b-2 border-transparent text-gray-600 hover:text-gray-900">Timeline</button>
                        </div>
                    </div>
                    
                    <!-- Tab Content -->
                    <div class="p-6">
                        <!-- Overview Tab -->
                        <div id="overview-tab" class="tab-content">
                            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                                <!-- Main Content -->
                                <div class="lg:col-span-2 space-y-6">
                                    <div>
                                        <h2 class="text-xl font-semibold mb-4">About ${company.name}</h2>
                                        <p class="text-gray-600 mb-4">${company.detailedDescription || company.description}</p>
                                    </div>
                                    
                                    <div class="grid grid-cols-2 gap-6">
                                        <div>
                                            <h3 class="font-semibold text-gray-900 mb-3">Company Details</h3>
                                            <div class="space-y-2 text-sm">
                                                <div><span class="text-gray-500">Legal Name:</span> <span class="font-medium">${company.legalName}</span></div>
                                                <div><span class="text-gray-500">Company Type:</span> <span class="font-medium">${company.type}</span></div>
                                                <div><span class="text-gray-500">Founded:</span> <span class="font-medium">${new Date(company.foundedDate).toLocaleDateString()}</span></div>
                                                <div><span class="text-gray-500">Employees:</span> <span class="font-medium">${company.employeeRange || company.employeeCount}</span></div>
                                                <div><span class="text-gray-500">Operating Status:</span> <span class="font-medium">${company.operatingStatus}</span></div>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <h3 class="font-semibold text-gray-900 mb-3">Contact Information</h3>
                                            <div class="space-y-2 text-sm">
                                                ${company.headquarters ? `
                                                    <div><span class="text-gray-500">Address:</span> <span class="font-medium">${company.headquarters.address}</span></div>
                                                    <div><span class="text-gray-500">Phone:</span> <span class="font-medium">${company.headquarters.phone}</span></div>
                                                    <div><span class="text-gray-500">Email:</span> <span class="font-medium">${company.headquarters.email}</span></div>
                                                ` : ''}
                                                <div><span class="text-gray-500">Website:</span> <a href="${company.website}" target="_blank" class="text-purple-600 hover:text-purple-700 font-medium">${company.website}</a></div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    ${company.founders && company.founders.length > 0 ? `
                                        <div>
                                            <h3 class="font-semibold text-gray-900 mb-3">Founders</h3>
                                            <div class="flex flex-wrap gap-3">
                                                ${company.founders.map(founder => `
                                                    <div class="bg-gray-50 px-4 py-2 rounded-lg">
                                                        <div class="font-medium">${founder.name}</div>
                                                        <div class="text-sm text-gray-600">${founder.role}</div>
                                                    </div>
                                                `).join('')}
                                            </div>
                                        </div>
                                    ` : ''}
                                    
                                    ${company.alternateNames && company.alternateNames.length > 0 ? `
                                        <div>
                                            <h3 class="font-semibold text-gray-900 mb-3">Also Known As</h3>
                                            <div class="flex flex-wrap gap-2">
                                                ${company.alternateNames.map(name => `
                                                    <span class="bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-sm">${name}</span>
                                                `).join('')}
                                            </div>
                                        </div>
                                    ` : ''}
                                </div>
                                
                                <!-- Sidebar Stats -->
                                <div class="space-y-4">
                                    ${company.totalFunding ? `
                                        <div class="bg-green-50 p-4 rounded-lg">
                                            <h3 class="font-semibold text-green-800 mb-2">Total Funding</h3>
                                            <p class="text-2xl font-bold text-green-600">$${(company.totalFunding / 1000000).toFixed(1)}M</p>
                                            <p class="text-sm text-green-600">${company.fundingRounds?.length || 0} rounds</p>
                                            ${company.latestFundingDate ? `<p class="text-xs text-green-600 mt-1">Latest: ${new Date(company.latestFundingDate).toLocaleDateString()}</p>` : ''}
                                        </div>
                                    ` : ''}
                                    
                                    ${company.valuation ? `
                                        <div class="bg-purple-50 p-4 rounded-lg">
                                            <h3 class="font-semibold text-purple-800 mb-2">Valuation</h3>
                                            <p class="text-2xl font-bold text-purple-600">$${(company.valuation / 1000000).toFixed(0)}M</p>
                                            <p class="text-sm text-purple-600">${company.fundingStage} stage</p>
                                        </div>
                                    ` : ''}
                                    
                                    ${company.metrics ? `
                                        <div class="bg-blue-50 p-4 rounded-lg">
                                            <h3 class="font-semibold text-blue-800 mb-3">Key Metrics</h3>
                                            <div class="space-y-2 text-sm">
                                                ${company.metrics.monthlyVisits ? `<div><span class="text-gray-600">Monthly Visits:</span> <span class="font-medium">${company.metrics.monthlyVisits.toLocaleString()}</span></div>` : ''}
                                                ${company.metrics.revenueRange ? `<div><span class="text-gray-600">Revenue:</span> <span class="font-medium">${company.metrics.revenueRange}</span></div>` : ''}
                                                ${company.metrics.employeeGrowth ? `<div><span class="text-gray-600">Employee Growth:</span> <span class="font-medium">${company.metrics.employeeGrowth}</span></div>` : ''}
                                                ${company.metrics.customerCount ? `<div><span class="text-gray-600">Customers:</span> <span class="font-medium">${company.metrics.customerCount}</span></div>` : ''}
                                            </div>
                                        </div>
                                    ` : ''}
                                    
                                    ${company.competitors && company.competitors.length > 0 ? `
                                        <div class="bg-gray-50 p-4 rounded-lg">
                                            <h3 class="font-semibold text-gray-800 mb-3">Competitors</h3>
                                            <div class="space-y-2">
                                                ${company.competitors.map(competitor => `
                                                    <div class="text-sm text-gray-600">${competitor}</div>
                                                `).join('')}
                                            </div>
                                        </div>
                                    ` : ''}
                                </div>
                            </div>
                        </div>
                        
                        <!-- Funding Tab -->
                        <div id="funding-tab" class="tab-content hidden">
                            <div class="space-y-6">
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                    <div class="bg-green-50 p-6 rounded-lg text-center">
                                        <h3 class="text-lg font-semibold text-green-800 mb-2">Total Funding</h3>
                                        <p class="text-3xl font-bold text-green-600">$${company.totalFunding ? (company.totalFunding / 1000000).toFixed(1) + 'M' : '0'}</p>
                                    </div>
                                    <div class="bg-blue-50 p-6 rounded-lg text-center">
                                        <h3 class="text-lg font-semibold text-blue-800 mb-2">Funding Rounds</h3>
                                        <p class="text-3xl font-bold text-blue-600">${company.fundingRounds?.length || 0}</p>
                                    </div>
                                    <div class="bg-purple-50 p-6 rounded-lg text-center">
                                        <h3 class="text-lg font-semibold text-purple-800 mb-2">Latest Stage</h3>
                                        <p class="text-xl font-bold text-purple-600">${company.fundingStage || 'N/A'}</p>
                                    </div>
                                </div>
                                
                                ${company.fundingRounds && company.fundingRounds.length > 0 ? `
                                    <div class="bg-white border rounded-lg overflow-hidden">
                                        <div class="px-6 py-4 bg-gray-50 border-b">
                                            <h3 class="text-lg font-semibold">Funding History</h3>
                                        </div>
                                        <div class="overflow-x-auto">
                                            <table class="w-full">
                                                <thead class="bg-gray-50">
                                                    <tr>
                                                        <th class="text-left py-3 px-6 font-medium text-gray-700">Date</th>
                                                        <th class="text-left py-3 px-6 font-medium text-gray-700">Round</th>
                                                        <th class="text-left py-3 px-6 font-medium text-gray-700">Amount</th>
                                                        <th class="text-left py-3 px-6 font-medium text-gray-700">Lead Investor</th>
                                                        <th class="text-left py-3 px-6 font-medium text-gray-700">Investors</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    ${company.fundingRounds.map(round => `
                                                        <tr class="border-b hover:bg-gray-50">
                                                            <td class="py-4 px-6">${new Date(round.date).toLocaleDateString()}</td>
                                                            <td class="py-4 px-6">
                                                                <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm">${round.type}</span>
                                                            </td>
                                                            <td class="py-4 px-6 font-semibold text-green-600">$${(round.amount / 1000000).toFixed(1)}M</td>
                                                            <td class="py-4 px-6 font-medium">${round.leadInvestor || 'N/A'}</td>
                                                            <td class="py-4 px-6 text-sm text-gray-600">${round.investors.join(', ')}</td>
                                                        </tr>
                                                    `).join('')}
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                ` : '<div class="text-center py-8 text-gray-500">No funding information available</div>'}
                            </div>
                        </div>
                        
                        <!-- Leadership Tab -->
                        <div id="leadership-tab" class="tab-content hidden">
                            <div class="space-y-8">
                                ${company.leadership?.current && company.leadership.current.length > 0 ? `
                                    <div>
                                        <h3 class="text-lg font-semibold mb-4">Current Leadership</h3>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            ${company.leadership.current.map(leader => `
                                                <div class="bg-white border rounded-lg p-6">
                                                    <div class="flex items-start space-x-4">
                                                        <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center text-white text-xl">
                                                            üë§
                                                        </div>
                                                        <div class="flex-1">
                                                            <h4 class="font-semibold text-lg">${leader.name}</h4>
                                                            <p class="text-purple-600 font-medium">${leader.title}</p>
                                                            <p class="text-sm text-gray-500 mb-2">Since ${new Date(leader.startDate).toLocaleDateString()}</p>
                                                            ${leader.bio ? `<p class="text-sm text-gray-600">${leader.bio}</p>` : ''}
                                                        </div>
                                                    </div>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                ` : ''}
                                
                                ${company.leadership?.advisors && company.leadership.advisors.length > 0 ? `
                                    <div>
                                        <h3 class="text-lg font-semibold mb-4">Advisors</h3>
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                            ${company.leadership.advisors.map(advisor => `
                                                <div class="bg-gray-50 p-4 rounded-lg">
                                                    <h4 class="font-semibold">${advisor.name}</h4>
                                                    <p class="text-sm text-gray-600">${advisor.title}</p>
                                                    <p class="text-xs text-gray-500">${advisor.company}</p>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                ` : ''}
                                
                                ${company.leadership?.past && company.leadership.past.length > 0 ? `
                                    <div>
                                        <h3 class="text-lg font-semibold mb-4">Past Leadership</h3>
                                        <div class="space-y-3">
                                            ${company.leadership.past.map(leader => `
                                                <div class="bg-gray-50 p-4 rounded-lg flex justify-between items-center">
                                                    <div>
                                                        <h4 class="font-semibold">${leader.name}</h4>
                                                        <p class="text-sm text-gray-600">${leader.title}</p>
                                                    </div>
                                                    <div class="text-right text-sm text-gray-500">
                                                        <div>${new Date(leader.startDate).toLocaleDateString()} - ${new Date(leader.endDate).toLocaleDateString()}</div>
                                                    </div>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                        
                        <!-- Acquisitions Tab -->
                        <div id="acquisitions-tab" class="tab-content hidden">
                            <div class="space-y-8">
                                ${company.acquisitions?.acquired && company.acquisitions.acquired.length > 0 ? `
                                    <div>
                                        <h3 class="text-lg font-semibold mb-4">Companies Acquired</h3>
                                        <div class="space-y-4">
                                            ${company.acquisitions.acquired.map(acquisition => `
                                                <div class="bg-white border rounded-lg p-6">
                                                    <div class="flex justify-between items-start">
                                                        <div>
                                                            <h4 class="font-semibold text-lg">${acquisition.company}</h4>
                                                            <p class="text-gray-600 mb-2">${acquisition.reason}</p>
                                                            <p class="text-sm text-gray-500">Acquired on ${new Date(acquisition.date).toLocaleDateString()}</p>
                                                        </div>
                                                        <div class="text-right">
                                                            <p class="text-lg font-bold text-green-600">$${(acquisition.amount / 1000000).toFixed(1)}M</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                ` : ''}
                                
                                ${company.acquisitions?.acquiredBy ? `
                                    <div>
                                        <h3 class="text-lg font-semibold mb-4">Acquisition Status</h3>
                                        <div class="bg-orange-50 border border-orange-200 rounded-lg p-6">
                                            <h4 class="font-semibold text-orange-800">Acquired by ${company.acquisitions.acquiredBy.company}</h4>
                                            <p class="text-orange-600">Date: ${new Date(company.acquisitions.acquiredBy.date).toLocaleDateString()}</p>
                                            <p class="text-orange-600">Amount: $${(company.acquisitions.acquiredBy.amount / 1000000).toFixed(1)}M</p>
                                        </div>
                                    </div>
                                ` : ''}
                                
                                ${(!company.acquisitions?.acquired || company.acquisitions.acquired.length === 0) && !company.acquisitions?.acquiredBy ? `
                                    <div class="text-center py-8 text-gray-500">No acquisition information available</div>
                                ` : ''}
                            </div>
                        </div>
                        
                        <!-- Products Tab -->
                        <div id="products-tab" class="tab-content hidden">
                            <div class="space-y-8">
                                ${company.products && company.products.length > 0 ? `
                                    <div>
                                        <h3 class="text-lg font-semibold mb-4">Products & Services</h3>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            ${company.products.map(product => `
                                                <div class="bg-white border rounded-lg p-6">
                                                    <h4 class="font-semibold text-lg mb-2">${product.name}</h4>
                                                    <p class="text-gray-600">${product.description}</p>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                ` : ''}
                                
                                ${company.technologyStack && company.technologyStack.length > 0 ? `
                                    <div>
                                        <h3 class="text-lg font-semibold mb-4">Technology Stack</h3>
                                        <div class="flex flex-wrap gap-2">
                                            ${company.technologyStack.map(tech => `
                                                <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">${tech}</span>
                                            `).join('')}
                                        </div>
                                    </div>
                                ` : ''}
                                
                                ${company.customers && company.customers.length > 0 ? `
                                    <div>
                                        <h3 class="text-lg font-semibold mb-4">Customer Segments</h3>
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                            ${company.customers.map(customer => `
                                                <div class="bg-gray-50 p-4 rounded-lg text-center">
                                                    <p class="font-medium">${customer}</p>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                        
                        <!-- News Tab -->
                        <div id="news-tab" class="tab-content hidden">
                            ${company.news && company.news.length > 0 ? `
                                <div class="space-y-4">
                                    <h3 class="text-lg font-semibold">Recent News & Press</h3>
                                    ${company.news.map(item => `
                                        <div class="bg-white border rounded-lg p-6 hover:shadow-md transition-shadow">
                                            <div class="flex justify-between items-start mb-3">
                                                <h4 class="font-semibold text-lg">${item.headline}</h4>
                                                <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm">${item.category}</span>
                                            </div>
                                            <div class="flex justify-between items-center text-sm text-gray-500">
                                                <span>${new Date(item.date).toLocaleDateString()}</span>
                                                <span>${item.source}</span>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            ` : '<div class="text-center py-8 text-gray-500">No news available</div>'}
                        </div>
                        
                        <!-- Timeline Tab -->
                        <div id="timeline-tab" class="tab-content hidden">
                            ${company.milestones && company.milestones.length > 0 ? `
                                <div class="space-y-4">
                                    <h3 class="text-lg font-semibold">Company Timeline</h3>
                                    <div class="relative">
                                        <div class="absolute left-4 top-0 bottom-0 w-0.5 bg-gray-300"></div>
                                        <div class="space-y-6">
                                            ${company.milestones.map(milestone => `
                                                <div class="relative flex items-start space-x-4">
                                                    <div class="w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center relative z-10">
                                                        <div class="w-3 h-3 bg-white rounded-full"></div>
                                                    </div>
                                                    <div class="flex-1 bg-white border rounded-lg p-4">
                                                        <div class="flex justify-between items-start mb-2">
                                                            <h4 class="font-semibold">${milestone.event}</h4>
                                                            <span class="text-sm text-gray-500">${new Date(milestone.date).toLocaleDateString()}</span>
                                                        </div>
                                                        <p class="text-gray-600">${milestone.description}</p>
                                                    </div>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                </div>
                            ` : '<div class="text-center py-8 text-gray-500">No timeline data available</div>'}
                        </div>
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
        }

        function showPersonDetail(personId) {
            const person = allPeople.find(p => p.id === personId);
            if (!person) return;

            const modal = document.getElementById('personModal');
            const content = document.getElementById('personModalContent');
            
            content.innerHTML = `
                <div class="relative">
                    <div class="profile-card h-48 rounded-t-xl flex items-end p-6">
                        <div class="flex items-center space-x-6">
                            <div class="w-24 h-24 bg-white rounded-full flex items-center justify-center text-4xl shadow-lg">
                                ${person.avatar}
                            </div>
                            <div class="text-white">
                                <h1 class="text-3xl font-bold">${person.name}</h1>
                                <p class="text-xl opacity-90">${person.title}</p>
                                <p class="opacity-75">${person.location}</p>
                            </div>
                        </div>
                        <button onclick="closeModal('personModal')" class="absolute top-4 right-4 text-white hover:text-gray-200">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    
                    <div class="p-6 space-y-8">
                        <!-- Bio -->
                        <div>
                            <h2 class="text-xl font-semibold mb-4">About</h2>
                            <p class="text-gray-600">${person.bio}</p>
                        </div>

                        ${person.experience && person.experience.length > 0 ? `
                            <!-- Experience -->
                            <div class="form-section pl-4">
                                <h2 class="text-xl font-semibold mb-4">Experience</h2>
                                <div class="space-y-4">
                                    ${person.experience.map(exp => `
                                        <div class="border-l-2 border-purple-200 pl-4">
                                            <h3 class="font-semibold">${exp.role}</h3>
                                            <p class="text-purple-600 font-medium">${exp.company}</p>
                                            <p class="text-sm text-gray-500">
                                                ${new Date(exp.startDate).toLocaleDateString()} - 
                                                ${exp.current ? 'Present' : new Date(exp.endDate).toLocaleDateString()}
                                            </p>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        ` : ''}

                        ${person.education && person.education.length > 0 ? `
                            <!-- Education -->
                            <div class="form-section pl-4">
                                <h2 class="text-xl font-semibold mb-4">Education</h2>
                                <div class="space-y-4">
                                    ${person.education.map(edu => `
                                        <div class="border-l-2 border-blue-200 pl-4">
                                            <h3 class="font-semibold">${edu.degree}</h3>
                                            <p class="text-blue-600 font-medium">${edu.school}</p>
                                            <p class="text-sm text-gray-500">${edu.year}</p>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        ` : ''}

                        <!-- Contact -->
                        <div class="form-section pl-4">
                            <h2 class="text-xl font-semibold mb-4">Contact</h2>
                            <div class="space-y-2">
                                ${person.email ? `<p><i class="fas fa-envelope text-gray-400 mr-2"></i>${person.email}</p>` : ''}
                                ${person.linkedin ? `<p><i class="fab fa-linkedin text-blue-600 mr-2"></i><a href="${person.linkedin}" target="_blank" class="text-blue-600 hover:text-blue-700">LinkedIn Profile</a></p>` : ''}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
        }

        function handleGlobalSearch(e) {
            const query = e.target.value.toLowerCase().trim();
            const resultsContainer = document.getElementById('searchResults');
            
            if (query.length < 2) {
                resultsContainer.classList.add('hidden');
                return;
            }

            const results = [];
            
            // Search companies
            allCompanies.forEach(company => {
                if (company.name.toLowerCase().includes(query) || 
                    company.industry.toLowerCase().includes(query) ||
                    company.location.toLowerCase().includes(query)) {
                    results.push({
                        type: 'company',
                        id: company.id,
                        name: company.name,
                        subtitle: company.industry,
                        icon: company.logo
                    });
                }
            });

            // Search people
            allPeople.forEach(person => {
                if (person.name.toLowerCase().includes(query) || 
                    person.title.toLowerCase().includes(query) ||
                    person.company.toLowerCase().includes(query)) {
                    results.push({
                        type: 'person',
                        id: person.id,
                        name: person.name,
                        subtitle: person.title,
                        icon: person.avatar
                    });
                }
            });

            if (results.length > 0) {
                resultsContainer.innerHTML = results.slice(0, 8).map(result => `
                    <div class="p-3 hover:bg-gray-50 cursor-pointer border-b last:border-b-0" onclick="handleSearchResult('${result.type}', '${result.id}')">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 bg-gradient-to-br from-purple-500 to-blue-500 rounded-lg flex items-center justify-center text-white">
                                ${result.icon}
                            </div>
                            <div>
                                <p class="font-medium text-gray-900">${result.name}</p>
                                <p class="text-sm text-gray-600">${result.subtitle}</p>
                            </div>
                        </div>
                    </div>
                `).join('');
                resultsContainer.classList.remove('hidden');
            } else {
                resultsContainer.innerHTML = '<div class="p-3 text-gray-500 text-center">No results found</div>';
                resultsContainer.classList.remove('hidden');
            }
        }

        function handleSearchResult(type, id) {
            document.getElementById('searchResults').classList.add('hidden');
            document.getElementById('globalSearch').value = '';
            
            if (type === 'company') {
                showCompanyDetail(id);
            } else if (type === 'person') {
                showPersonDetail(id);
            }
        }

        function handleAddCompany(e) {
            e.preventDefault();
            
            if (!currentUser) {
                alert('Please sign in to add companies');
                return;
            }

            const formData = new FormData(e.target);
            
            // Process industry tags
            const industryTagsString = formData.get('industryTags');
            const industryTags = industryTagsString ? 
                industryTagsString.split(',').map(tag => tag.trim()).filter(tag => tag) : 
                [formData.get('industry')];
            
            // Process founders
            const founders = [];
            if (formData.get('founder1Name')) {
                founders.push({
                    name: formData.get('founder1Name'),
                    role: formData.get('founder1Role') || 'Founder'
                });
            }
            if (formData.get('founder2Name')) {
                founders.push({
                    name: formData.get('founder2Name'),
                    role: formData.get('founder2Role') || 'Co-Founder'
                });
            }
            
            // Build comprehensive company data
            const companyData = {
                id: 'comp_' + Date.now(),
                name: formData.get('name'),
                legalName: formData.get('legalName') || formData.get('name'),
                tagline: formData.get('tagline'),
                type: formData.get('type'),
                companyType: 'For Profit',
                foundedDate: formData.get('foundedDate'),
                employeeCount: formData.get('employeeCount'),
                employeeRange: formData.get('employeeCount'),
                website: formData.get('website'),
                industry: formData.get('industry'),
                industryTags: industryTags,
                location: formData.get('location'),
                headquarters: {
                    address: formData.get('address'),
                    phone: formData.get('phone'),
                    email: formData.get('email')
                },
                description: formData.get('description'),
                detailedDescription: formData.get('detailedDescription') || formData.get('description'),
                logo: 'üè¢',
                status: formData.get('status'),
                operatingStatus: formData.get('status'),
                crunchbaseRank: Math.floor(Math.random() * 50000) + 10000,
                socialMedia: {
                    linkedin: formData.get('linkedin'),
                    twitter: formData.get('twitter'),
                    facebook: formData.get('facebook'),
                    instagram: formData.get('instagram')
                },
                founders: founders,
                totalFunding: 0,
                fundingRounds: [],
                latestFundingDate: null,
                fundingStage: 'Pre-Seed',
                valuation: null,
                leadership: {
                    current: [],
                    past: [],
                    advisors: []
                },
                acquisitions: {
                    acquired: [],
                    acquiredBy: null
                },
                products: [],
                technologyStack: [],
                customers: [],
                competitors: [],
                news: [],
                milestones: [
                    {
                        date: formData.get('foundedDate') || new Date().toISOString().split('T')[0],
                        event: 'Company Founded',
                        description: `${formData.get('name')} was incorporated`
                    }
                ],
                metrics: {
                    monthlyVisits: null,
                    revenueRange: null,
                    employeeGrowth: null,
                    customerCount: null
                },
                createdBy: currentUser.uid,
                createdAt: new Date().toISOString()
            };

            // Add to local array
            allCompanies.unshift(companyData);
            
            // Save to Firebase
            database.ref('companies/' + companyData.id).set(companyData);
            
            // Update UI
            renderCompanies();
            renderFeaturedCompanies();
            updateDashboardStats();
            
            // Close modal and reset form
            closeModal('addCompanyModal');
            e.target.reset();
            
            alert('Company added successfully!');
        }

        function handleAddPerson(e) {
            e.preventDefault();
            
            if (!currentUser) {
                alert('Please sign in to add profiles');
                return;
            }

            const formData = new FormData(e.target);
            const personData = {
                id: 'person_' + Date.now(),
                name: formData.get('name'),
                title: formData.get('title'),
                company: formData.get('company'),
                location: formData.get('location'),
                linkedin: formData.get('linkedin'),
                email: formData.get('email'),
                bio: formData.get('bio'),
                avatar: 'üë§',
                createdBy: currentUser.uid,
                createdAt: new Date().toISOString()
            };

            // Add to local array
            allPeople.unshift(personData);
            
            // Save to Firebase
            database.ref('people/' + personData.id).set(personData);
            
            // Update UI
            renderPeople();
            updateDashboardStats();
            
            // Close modal and reset form
            closeModal('addPersonModal');
            e.target.reset();
            
            alert('Profile added successfully!');
        }

        function signInWithGoogle() {
            const provider = new firebase.auth.GoogleAuthProvider();
            provider.addScope('profile');
            provider.addScope('email');
            
            auth.signInWithPopup(provider)
                .then(result => {
                    const user = result.user;
                    console.log('Google sign-in successful:', user);
                    closeModal('authModal');
                    
                    // Save user data to Firebase
                    database.ref('users/' + user.uid).set({
                        name: user.displayName,
                        email: user.email,
                        photoURL: user.photoURL,
                        lastLogin: new Date().toISOString()
                    });
                })
                .catch(error => {
                    console.error('Google sign-in error:', error);
                    alert('Error signing in with Google: ' + error.message);
                });
        }

        function signOut() {
            auth.signOut();
        }

        function showAuthModal() {
            document.getElementById('authModal').classList.remove('hidden');
        }

        function showAddCompanyModal() {
            if (!currentUser) {
                alert('Please sign in to add companies');
                showAuthModal();
                return;
            }
            document.getElementById('addCompanyModal').classList.remove('hidden');
        }

        function showAddPersonModal() {
            if (!currentUser) {
                alert('Please sign in to add profiles');
                showAuthModal();
                return;
            }
            document.getElementById('addPersonModal').classList.remove('hidden');
        }

        function showAddInvestorModal() {
            if (!currentUser) {
                alert('Please sign in to add investors');
                showAuthModal();
                return;
            }
            alert('Investor form coming soon!');
        }

        function showAddSchoolModal() {
            if (!currentUser) {
                alert('Please sign in to add schools');
                showAuthModal();
                return;
            }
            alert('School form coming soon!');
        }



        function showCompanyTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.company-tab').forEach(tab => {
                tab.classList.remove('active', 'border-purple-600', 'text-purple-600');
                tab.classList.add('border-transparent', 'text-gray-600');
            });
            
            // Show selected tab content
            document.getElementById(tabName + '-tab').classList.remove('hidden');
            
            // Add active class to selected tab
            event.target.classList.add('active', 'border-purple-600', 'text-purple-600');
            event.target.classList.remove('border-transparent', 'text-gray-600');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }

        function applyFilters() {
            const industry = document.getElementById('industryFilter').value;
            const size = document.getElementById('sizeFilter').value;
            const location = document.getElementById('locationFilter').value;
            
            let filtered = allCompanies;
            
            if (industry) {
                filtered = filtered.filter(company => company.industry === industry);
            }
            
            if (size) {
                filtered = filtered.filter(company => company.employeeCount === size);
            }
            
            if (location) {
                filtered = filtered.filter(company => company.location.includes(location));
            }
            
            // Update companies grid with filtered results
            const container = document.getElementById('companiesGrid');
            container.innerHTML = filtered.map(company => `
                <div class="card-hover bg-white rounded-xl shadow-sm p-6 cursor-pointer" onclick="showCompanyDetail('${company.id}')">
                    <div class="flex items-center space-x-4 mb-4">
                        <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-500 rounded-xl flex items-center justify-center text-white text-2xl">
                            ${company.logo}
                        </div>
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900 text-lg">${company.name}</h3>
                            <p class="text-gray-600">${company.industry}</p>
                            <p class="text-sm text-gray-500">${company.location}</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm mb-4 line-clamp-2">${company.description}</p>
                    <div class="flex justify-between items-center mb-4">
                        <span class="industry-tag text-white text-xs px-3 py-1 rounded-full">${company.industry}</span>
                        <span class="text-sm text-gray-500">${company.employeeCount} employees</span>
                    </div>
                    ${company.totalFunding ? `
                        <div class="border-t pt-4">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">Total Funding</span>
                                <span class="font-semibold text-green-600">$${(company.totalFunding / 1000000).toFixed(1)}M</span>
                            </div>
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        function loadUserData() {
            // Load user-specific data from Firebase
            database.ref('companies').orderByChild('createdBy').equalTo(currentUser.uid).once('value', snapshot => {
                // Handle user's companies
            });
        }

        // Close search results when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('#globalSearch') && !e.target.closest('#searchResults')) {
                document.getElementById('searchResults').classList.add('hidden');
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96f635837299919a',t:'MTc1NTIzNDg3My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
