<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BizIntel Pro - Business Intelligence Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .gradient-bg { background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 50%, #581c87 100%); }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.15); }
        .tab-active { border-bottom: 3px solid #3b82f6; color: #3b82f6; background-color: #eff6ff; }
        .status-active { background-color: #10b981; }
        .status-ipo { background-color: #8b5cf6; }
        .status-acquired { background-color: #f59e0b; }
        .status-closed { background-color: #ef4444; }
        .timeline-item::before { content: ''; position: absolute; left: 15px; top: 0; height: 100%; width: 2px; background: #e5e7eb; }
        .timeline-dot { position: absolute; left: 11px; top: 8px; width: 10px; height: 10px; border-radius: 50%; background: #3b82f6; }
        .funding-chart { min-height: 300px; }
        .rank-badge { background: linear-gradient(45deg, #fbbf24, #f59e0b); }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-2xl font-bold gradient-bg bg-clip-text text-transparent">BizIntel Pro</h1>
                        <p class="text-xs text-gray-500">Business Intelligence Platform</p>
                    </div>
                    <div class="hidden md:block ml-10">
                        <div class="flex items-baseline space-x-4">
                            <a href="#" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium" onclick="showSection('dashboard')">Dashboard</a>
                            <a href="#" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium" onclick="showSection('companies')">Companies</a>
                            <a href="#" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium" onclick="showSection('people')">People</a>
                            <a href="#" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium" onclick="showSection('investors')">Investors</a>
                            <a href="#" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium" onclick="showSection('analytics')">Analytics</a>
                        </div>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <input type="text" id="globalSearch" placeholder="Search companies, people, investors..." class="w-80 pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                    <button id="authButton" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center">
                        <i class="fab fa-google mr-2"></i>Sign In with Google
                    </button>
                    <div id="userProfile" class="hidden flex items-center space-x-3">
                        <img id="userPhoto" class="w-8 h-8 rounded-full" alt="User">
                        <div class="flex flex-col">
                            <span id="userName" class="text-sm font-medium"></span>
                            <button id="signOutButton" class="text-xs text-gray-600 hover:text-gray-800 text-left">Sign Out</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Dashboard Section -->
        <div id="dashboard" class="section">
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-gray-900 mb-2">Business Intelligence Dashboard</h2>
                <p class="text-gray-600">Comprehensive business data, funding insights, and market intelligence</p>
            </div>

            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                    <div class="flex items-center">
                        <div class="p-3 rounded-full bg-blue-100">
                            <i class="fas fa-building text-blue-600 text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Total Companies</p>
                            <p class="text-2xl font-semibold text-gray-900" id="companyCount">0</p>
                            <p class="text-xs text-green-600">+12% this month</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                    <div class="flex items-center">
                        <div class="p-3 rounded-full bg-green-100">
                            <i class="fas fa-chart-line text-green-600 text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Total Funding</p>
                            <p class="text-2xl font-semibold text-gray-900" id="totalFunding">$0</p>
                            <p class="text-xs text-green-600">+8% this quarter</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                    <div class="flex items-center">
                        <div class="p-3 rounded-full bg-purple-100">
                            <i class="fas fa-users text-purple-600 text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Active Professionals</p>
                            <p class="text-2xl font-semibold text-gray-900" id="peopleCount">0</p>
                            <p class="text-xs text-green-600">+15% this month</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                    <div class="flex items-center">
                        <div class="p-3 rounded-full bg-orange-100">
                            <i class="fas fa-handshake text-orange-600 text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">Investment Firms</p>
                            <p class="text-2xl font-semibold text-gray-900" id="investorCount">0</p>
                            <p class="text-xs text-green-600">+5% this month</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Featured Companies -->
            <div class="bg-white rounded-xl shadow-md p-6 mb-8">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-semibold text-gray-900">Featured Companies</h3>
                    <button onclick="showSection('companies')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">View All â†’</button>
                </div>
                <div id="featuredCompanies" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Companies will be loaded here -->
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h3 class="text-xl font-semibold text-gray-900 mb-4">Recent Funding Rounds</h3>
                    <div id="recentFunding" class="space-y-4">
                        <!-- Recent funding will be loaded here -->
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h3 class="text-xl font-semibold text-gray-900 mb-4">Latest News & Updates</h3>
                    <div id="recentNews" class="space-y-4">
                        <!-- Recent news will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- People Section -->
        <div id="people" class="section hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold text-gray-900">People Directory</h2>
                <button onclick="showAddPersonModal()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                    <i class="fas fa-plus mr-2"></i>Add Person
                </button>
            </div>

            <!-- People Filters -->
            <div class="bg-white rounded-xl shadow-md p-6 mb-6">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <select id="roleFilter" class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                        <option value="">All Roles</option>
                        <option value="CEO">CEO</option>
                        <option value="CTO">CTO</option>
                        <option value="CFO">CFO</option>
                        <option value="Founder">Founder</option>
                        <option value="Engineer">Engineer</option>
                        <option value="Designer">Designer</option>
                        <option value="Marketing">Marketing</option>
                        <option value="Sales">Sales</option>
                    </select>
                    <select id="companyFilter" class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                        <option value="">All Companies</option>
                    </select>
                    <select id="experienceFilter" class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                        <option value="">All Experience</option>
                        <option value="0-2">0-2 years</option>
                        <option value="3-5">3-5 years</option>
                        <option value="6-10">6-10 years</option>
                        <option value="10+">10+ years</option>
                    </select>
                    <button onclick="applyPeopleFilters()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                        <i class="fas fa-filter mr-2"></i>Apply Filters
                    </button>
                </div>
            </div>

            <!-- People Grid -->
            <div id="peopleGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- People will be loaded here -->
            </div>
        </div>

        <!-- Companies Section -->
        <div id="companies" class="section hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold text-gray-900">Companies Directory</h2>
                <button onclick="showAddCompanyModal()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                    <i class="fas fa-plus mr-2"></i>Add Company
                </button>
            </div>

            <!-- Advanced Filters -->
            <div class="bg-white rounded-xl shadow-md p-6 mb-6">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
                    <select id="industryFilter" class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                        <option value="">All Industries</option>
                        <option value="Technology">Technology</option>
                        <option value="Healthcare">Healthcare</option>
                        <option value="Finance">Finance</option>
                        <option value="E-commerce">E-commerce</option>
                        <option value="SaaS">SaaS</option>
                        <option value="Fintech">Fintech</option>
                        <option value="Automotive">Automotive</option>
                        <option value="Education">Education</option>
                    </select>
                    <select id="locationFilter" class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                        <option value="">All Locations</option>
                        <option value="San Francisco">San Francisco</option>
                        <option value="New York">New York</option>
                        <option value="Austin">Austin</option>
                        <option value="London">London</option>
                        <option value="Berlin">Berlin</option>
                        <option value="Singapore">Singapore</option>
                    </select>
                    <select id="employeeFilter" class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                        <option value="">All Sizes</option>
                        <option value="1-10">1-10 employees</option>
                        <option value="11-50">11-50 employees</option>
                        <option value="51-200">51-200 employees</option>
                        <option value="201-1000">201-1000 employees</option>
                        <option value="1000+">1000+ employees</option>
                    </select>
                    <select id="statusFilter" class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                        <option value="">All Status</option>
                        <option value="Active">Active</option>
                        <option value="IPO">IPO'd</option>
                        <option value="Acquired">Acquired</option>
                        <option value="Closed">Closed</option>
                    </select>
                    <button onclick="applyFilters()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                        <i class="fas fa-filter mr-2"></i>Apply Filters
                    </button>
                </div>
            </div>

            <!-- Companies Grid -->
            <div id="companiesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Companies will be loaded here -->
            </div>
        </div>

        <!-- Company Detail Modal -->
        <div id="companyModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 overflow-y-auto">
            <div class="flex items-start justify-center min-h-screen p-4 pt-16">
                <div class="bg-white rounded-xl max-w-7xl w-full max-h-screen overflow-y-auto">
                    <!-- Company Header -->
                    <div class="bg-white border-b p-6">
                        <div class="flex justify-between items-start mb-4">
                            <div class="flex items-start space-x-4">
                                <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center">
                                    <span class="text-white font-bold text-xl" id="modalCompanyLogo">C</span>
                                </div>
                                <div class="flex-1">
                                    <div class="flex items-center space-x-3 mb-2">
                                        <h2 class="text-3xl font-bold text-gray-900" id="modalCompanyName">Company Name</h2>
                                        <span class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium" id="modalCompanyRank">#1 Rank</span>
                                        <button id="editCompanyBtn" class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium hover:bg-blue-200 hidden">
                                            <i class="fas fa-edit mr-1"></i>Edit
                                        </button>
                                    </div>
                                    <p class="text-lg text-gray-600 mb-3" id="modalCompanyTagline">Company tagline</p>
                                    <div class="flex flex-wrap gap-2 mb-3">
                                        <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm" id="modalCompanyIndustry">Industry</span>
                                        <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm" id="modalCompanyLocation">Location</span>
                                        <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm" id="modalCompanyFounded">Founded</span>
                                        <span class="px-3 py-1 rounded-full text-sm font-medium text-white" id="modalCompanyStatus">Status</span>
                                    </div>
                                    <div class="flex space-x-4">
                                        <a href="#" id="modalCompanyWebsite" class="text-blue-600 hover:text-blue-800" target="_blank">
                                            <i class="fas fa-globe mr-1"></i>Website
                                        </a>
                                        <a href="#" id="modalCompanyLinkedIn" class="text-blue-600 hover:text-blue-800" target="_blank">
                                            <i class="fab fa-linkedin mr-1"></i>LinkedIn
                                        </a>
                                        <a href="#" id="modalCompanyTwitter" class="text-blue-600 hover:text-blue-800" target="_blank">
                                            <i class="fab fa-twitter mr-1"></i>Twitter
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <button onclick="closeCompanyModal()" class="text-gray-400 hover:text-gray-600">
                                <i class="fas fa-times text-2xl"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Tabs Navigation -->
                    <div class="px-8 border-b bg-white sticky top-0 z-10">
                        <nav class="flex space-x-8 overflow-x-auto">
                            <button class="py-4 px-2 border-b-2 font-medium text-sm whitespace-nowrap tab-active" onclick="showTab('overview')">Overview</button>
                            <button class="py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm whitespace-nowrap" onclick="showTab('funding')">Funding & Financials</button>
                            <button class="py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm whitespace-nowrap" onclick="showTab('leadership')">Leadership & Team</button>
                            <button class="py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm whitespace-nowrap" onclick="showTab('acquisitions')">Acquisitions</button>
                            <button class="py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm whitespace-nowrap" onclick="showTab('technology')">Technology & Products</button>
                            <button class="py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm whitespace-nowrap" onclick="showTab('news')">News & Press</button>
                            <button class="py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm whitespace-nowrap" onclick="showTab('competitors')">Competitors</button>
                            <button class="py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm whitespace-nowrap" onclick="showTab('events')">Events & Milestones</button>
                            <button class="py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm whitespace-nowrap" onclick="showTab('contact')">Contact Info</button>
                        </nav>
                    </div>

                    <!-- Tab Content -->
                    <div class="p-8">
                        <!-- Overview Tab -->
                        <div id="overviewTab" class="tab-content">
                            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                                <div class="lg:col-span-2">
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Company Overview</h4>
                                    <p class="text-gray-600 mb-6 leading-relaxed" id="modalCompanyDescription">Detailed company description will appear here...</p>
                                    
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                                        <div class="bg-gray-50 rounded-lg p-4">
                                            <h5 class="font-semibold text-gray-900 mb-3">Company Details</h5>
                                            <div class="space-y-2">
                                                <div class="flex justify-between">
                                                    <span class="text-gray-600">Legal Name:</span>
                                                    <span class="font-medium" id="modalCompanyLegalName">-</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span class="text-gray-600">Company Type:</span>
                                                    <span class="font-medium" id="modalCompanyType">-</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span class="text-gray-600">Operating Status:</span>
                                                    <span class="font-medium" id="modalOperatingStatus">-</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span class="text-gray-600">Employees:</span>
                                                    <span class="font-medium" id="modalCompanyEmployees">-</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bg-gray-50 rounded-lg p-4">
                                            <h5 class="font-semibold text-gray-900 mb-3">Founders</h5>
                                            <div id="modalFounders" class="space-y-2">
                                                <!-- Founders will be populated here -->
                                            </div>
                                        </div>
                                    </div>

                                    <div class="bg-blue-50 rounded-lg p-4">
                                        <h5 class="font-semibold text-gray-900 mb-3">Alternate Names</h5>
                                        <div id="modalAlternateNames" class="flex flex-wrap gap-2">
                                            <!-- Alternate names will be populated here -->
                                        </div>
                                    </div>
                                </div>
                                
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Quick Stats</h4>
                                    <div class="space-y-4">
                                        <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg p-4">
                                            <div class="text-2xl font-bold" id="modalTotalFunding">$0</div>
                                            <div class="text-sm opacity-90">Total Funding Raised</div>
                                        </div>
                                        <div class="bg-gradient-to-r from-green-500 to-teal-600 text-white rounded-lg p-4">
                                            <div class="text-2xl font-bold" id="modalFundingRounds">0</div>
                                            <div class="text-sm opacity-90">Funding Rounds</div>
                                        </div>
                                        <div class="bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg p-4">
                                            <div class="text-2xl font-bold" id="modalValuation">-</div>
                                            <div class="text-sm opacity-90">Latest Valuation</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Funding Tab -->
                        <div id="fundingTab" class="tab-content hidden">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Funding Overview</h4>
                                    <div class="bg-gray-50 rounded-lg p-6">
                                        <canvas id="fundingChart" class="funding-chart"></canvas>
                                    </div>
                                </div>
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Key Metrics</h4>
                                    <div class="space-y-4">
                                        <div class="flex justify-between items-center p-4 bg-blue-50 rounded-lg">
                                            <span class="text-gray-600">Total Funding:</span>
                                            <span class="text-xl font-bold text-blue-600" id="fundingTotalAmount">$0</span>
                                        </div>
                                        <div class="flex justify-between items-center p-4 bg-green-50 rounded-lg">
                                            <span class="text-gray-600">Latest Round:</span>
                                            <span class="text-lg font-semibold text-green-600" id="fundingLatestRound">-</span>
                                        </div>
                                        <div class="flex justify-between items-center p-4 bg-purple-50 rounded-lg">
                                            <span class="text-gray-600">Latest Date:</span>
                                            <span class="text-lg font-semibold text-purple-600" id="fundingLatestDate">-</span>
                                        </div>
                                        <div class="flex justify-between items-center p-4 bg-orange-50 rounded-lg">
                                            <span class="text-gray-600">Lead Investors:</span>
                                            <span class="text-lg font-semibold text-orange-600" id="fundingLeadInvestors">-</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex justify-between items-center mb-4">
                                <h4 class="text-xl font-semibold text-gray-900">Funding History</h4>
                                <button id="addInvestmentBtn" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm hidden">
                                    <i class="fas fa-plus mr-2"></i>Add Investment
                                </button>
                            </div>
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200 bg-white rounded-lg shadow">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Round</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Lead Investors</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valuation</th>
                                        </tr>
                                    </thead>
                                    <tbody id="fundingRoundsTable" class="bg-white divide-y divide-gray-200">
                                        <!-- Funding rounds will be populated here -->
                                    </tbody>
                                </table>
                            </div>

                            <div class="mt-8">
                                <h4 class="text-xl font-semibold text-gray-900 mb-4">Investments Made</h4>
                                <div id="investmentsMadeGrid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <!-- Investments made by this company will be populated here -->
                                </div>
                            </div>
                        </div>

                        <!-- Leadership Tab -->
                        <div id="leadershipTab" class="tab-content hidden">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Current Leadership</h4>
                                    <div id="currentLeadershipGrid" class="space-y-4">
                                        <!-- Current leadership will be populated here -->
                                    </div>
                                </div>
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Board Members & Advisors</h4>
                                    <div id="boardMembersGrid" class="space-y-4">
                                        <!-- Board members will be populated here -->
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mt-8">
                                <h4 class="text-xl font-semibold text-gray-900 mb-4">Past Leadership</h4>
                                <div id="pastLeadershipGrid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <!-- Past leadership will be populated here -->
                                </div>
                            </div>
                        </div>

                        <!-- Acquisitions Tab -->
                        <div id="acquisitionsTab" class="tab-content hidden">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Companies Acquired</h4>
                                    <div id="companiesAcquiredGrid" class="space-y-4">
                                        <!-- Acquired companies will be populated here -->
                                    </div>
                                </div>
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Acquisition Details</h4>
                                    <div id="acquisitionDetailsGrid" class="space-y-4">
                                        <!-- Acquisition details will be populated here -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Technology Tab -->
                        <div id="technologyTab" class="tab-content hidden">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Products & Services</h4>
                                    <div id="productsGrid" class="space-y-4">
                                        <!-- Products will be populated here -->
                                    </div>
                                </div>
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Technology Stack</h4>
                                    <div id="technologyStackGrid" class="space-y-4">
                                        <!-- Technology stack will be populated here -->
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mt-8">
                                <h4 class="text-xl font-semibold text-gray-900 mb-4">Notable Customers</h4>
                                <div id="customersGrid" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                    <!-- Customers will be populated here -->
                                </div>
                            </div>
                        </div>

                        <!-- News Tab -->
                        <div id="newsTab" class="tab-content hidden">
                            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                                <div class="lg:col-span-2">
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Latest News & Press</h4>
                                    <div id="newsGrid" class="space-y-6">
                                        <!-- News will be populated here -->
                                    </div>
                                </div>
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Press Releases</h4>
                                    <div id="pressReleasesGrid" class="space-y-4">
                                        <!-- Press releases will be populated here -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Competitors Tab -->
                        <div id="competitorsTab" class="tab-content hidden">
                            <h4 class="text-xl font-semibold text-gray-900 mb-4">Direct Competitors</h4>
                            <div id="competitorsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                                <!-- Competitors will be populated here -->
                            </div>
                            
                            <h4 class="text-xl font-semibold text-gray-900 mb-4">Similar Companies</h4>
                            <div id="similarCompaniesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <!-- Similar companies will be populated here -->
                            </div>
                        </div>

                        <!-- Events Tab -->
                        <div id="eventsTab" class="tab-content hidden">
                            <h4 class="text-xl font-semibold text-gray-900 mb-4">Company Timeline</h4>
                            <div id="timelineGrid" class="relative pl-8">
                                <!-- Timeline will be populated here -->
                            </div>
                        </div>

                        <!-- Contact Tab -->
                        <div id="contactTab" class="tab-content hidden">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Contact Information</h4>
                                    <div class="bg-gray-50 rounded-lg p-6 space-y-4">
                                        <div>
                                            <label class="text-sm font-medium text-gray-600">Headquarters Address</label>
                                            <p class="text-gray-900" id="modalCompanyAddress">-</p>
                                        </div>
                                        <div>
                                            <label class="text-sm font-medium text-gray-600">Phone Number</label>
                                            <p class="text-gray-900" id="modalCompanyPhone">-</p>
                                        </div>
                                        <div>
                                            <label class="text-sm font-medium text-gray-600">General Inquiry Email</label>
                                            <p class="text-gray-900" id="modalCompanyEmail">-</p>
                                        </div>
                                        <div>
                                            <label class="text-sm font-medium text-gray-600">Investor Relations Email</label>
                                            <p class="text-gray-900" id="modalInvestorEmail">-</p>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Social Media & Links</h4>
                                    <div class="bg-gray-50 rounded-lg p-6" id="modalCompanySocial">
                                        <!-- Social links will be populated here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Person Detail Modal -->
        <div id="personModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 overflow-y-auto">
            <div class="flex items-start justify-center min-h-screen p-4 pt-16">
                <div class="bg-white rounded-xl max-w-4xl w-full max-h-screen overflow-y-auto">
                    <!-- Person Header -->
                    <div class="bg-white border-b p-6">
                        <div class="flex justify-between items-start mb-4">
                            <div class="flex items-start space-x-4">
                                <div class="w-20 h-20 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center">
                                    <span class="text-white font-bold text-2xl" id="modalPersonInitials">JD</span>
                                </div>
                                <div class="flex-1">
                                    <div class="flex items-center space-x-3 mb-2">
                                        <h2 class="text-3xl font-bold text-gray-900" id="modalPersonName">Person Name</h2>
                                        <button id="editPersonBtn" class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium hover:bg-blue-200 hidden">
                                            <i class="fas fa-edit mr-1"></i>Edit
                                        </button>
                                    </div>
                                    <p class="text-lg text-gray-600 mb-2" id="modalPersonRole">Current Role</p>
                                    <p class="text-md text-blue-600 mb-3" id="modalPersonCompany">Company Name</p>
                                    <div class="flex flex-wrap gap-2 mb-3">
                                        <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm" id="modalPersonLocation">Location</span>
                                        <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm" id="modalPersonExperience">Experience</span>
                                        <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm" id="modalPersonType">Type</span>
                                    </div>
                                    <div class="flex space-x-4">
                                        <a href="#" id="modalPersonLinkedIn" class="text-blue-600 hover:text-blue-800" target="_blank">
                                            <i class="fab fa-linkedin mr-1"></i>LinkedIn
                                        </a>
                                        <a href="#" id="modalPersonTwitter" class="text-blue-600 hover:text-blue-800" target="_blank">
                                            <i class="fab fa-twitter mr-1"></i>Twitter
                                        </a>
                                        <a href="#" id="modalPersonEmail" class="text-blue-600 hover:text-blue-800">
                                            <i class="fas fa-envelope mr-1"></i>Email
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <button onclick="closePersonModal()" class="text-gray-400 hover:text-gray-600">
                                <i class="fas fa-times text-2xl"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Person Tabs -->
                    <div class="px-6 border-b bg-white sticky top-0 z-10">
                        <nav class="flex space-x-8 overflow-x-auto">
                            <button class="py-4 px-2 border-b-2 font-medium text-sm whitespace-nowrap tab-active" onclick="showPersonTab('profile')">Profile</button>
                            <button class="py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm whitespace-nowrap" onclick="showPersonTab('experience')">Experience</button>
                            <button class="py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm whitespace-nowrap" onclick="showPersonTab('education')">Education</button>
                            <button class="py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm whitespace-nowrap" onclick="showPersonTab('achievements')">Achievements</button>
                            <button class="py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm whitespace-nowrap" onclick="showPersonTab('network')">Network</button>
                        </nav>
                    </div>

                    <!-- Person Tab Content -->
                    <div class="p-6">
                        <!-- Profile Tab -->
                        <div id="profilePersonTab" class="person-tab-content">
                            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                <div class="lg:col-span-2">
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">About</h4>
                                    <p class="text-gray-600 mb-6 leading-relaxed" id="modalPersonBio">Person bio will appear here...</p>
                                    
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Skills & Expertise</h4>
                                    <div id="modalPersonSkills" class="flex flex-wrap gap-2 mb-6">
                                        <!-- Skills will be populated here -->
                                    </div>

                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Responsibilities</h4>
                                    <div id="modalPersonResponsibilities" class="space-y-2">
                                        <!-- Responsibilities will be populated here -->
                                    </div>
                                </div>
                                
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Quick Info</h4>
                                    <div class="space-y-4">
                                        <div class="bg-blue-50 rounded-lg p-4">
                                            <div class="text-lg font-bold text-blue-600" id="modalPersonYearsExp">0</div>
                                            <div class="text-sm text-blue-800">Years Experience</div>
                                        </div>
                                        <div class="bg-green-50 rounded-lg p-4">
                                            <div class="text-lg font-bold text-green-600" id="modalPersonCompaniesWorked">0</div>
                                            <div class="text-sm text-green-800">Companies Worked</div>
                                        </div>
                                        <div class="bg-purple-50 rounded-lg p-4">
                                            <div class="text-lg font-bold text-purple-600" id="modalPersonProjects">0</div>
                                            <div class="text-sm text-purple-800">Notable Projects</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Experience Tab -->
                        <div id="experiencePersonTab" class="person-tab-content hidden">
                            <h4 class="text-xl font-semibold text-gray-900 mb-4">Work Experience</h4>
                            <div id="modalPersonExperienceList" class="space-y-4">
                                <!-- Experience will be populated here -->
                            </div>
                        </div>

                        <!-- Education Tab -->
                        <div id="educationPersonTab" class="person-tab-content hidden">
                            <h4 class="text-xl font-semibold text-gray-900 mb-4">Education History</h4>
                            <div id="modalPersonEducationList" class="space-y-4">
                                <!-- Education will be populated here -->
                            </div>
                        </div>

                        <!-- Achievements Tab -->
                        <div id="achievementsPersonTab" class="person-tab-content hidden">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Awards & Recognition</h4>
                                    <div id="modalPersonAwards" class="space-y-4">
                                        <!-- Awards will be populated here -->
                                    </div>
                                </div>
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Media Mentions</h4>
                                    <div id="modalPersonMentions" class="space-y-4">
                                        <!-- Media mentions will be populated here -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Network Tab -->
                        <div id="networkPersonTab" class="person-tab-content hidden">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Professional Network</h4>
                                    <div id="modalPersonNetwork" class="space-y-4">
                                        <!-- Network will be populated here -->
                                    </div>
                                </div>
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Investments & Advisory</h4>
                                    <div id="modalPersonInvestments" class="space-y-4">
                                        <!-- Investments will be populated here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Person Modal -->
        <div id="addPersonModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 overflow-y-auto">
            <div class="flex items-start justify-center min-h-screen p-4 pt-16">
                <div class="bg-white rounded-xl max-w-4xl w-full max-h-screen overflow-y-auto">
                    <div class="sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center rounded-t-xl">
                        <h3 class="text-2xl font-bold text-gray-900">Add New Person</h3>
                        <button onclick="closeAddPersonModal()" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    <form id="addPersonForm" class="p-6 space-y-6">
                        <!-- Basic Information -->
                        <div>
                            <h4 class="text-lg font-semibold text-gray-900 mb-4">Basic Information</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Full Name *</label>
                                    <input type="text" id="personName" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                    <input type="email" id="personEmail" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Current Role *</label>
                                    <input type="text" id="personRole" required placeholder="e.g., CEO, CTO, Software Engineer" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Company *</label>
                                    <select id="personCompany" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                        <option value="">Select Company</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Location</label>
                                    <input type="text" id="personLocation" placeholder="City, Country" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Person Type</label>
                                    <select id="personType" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                        <option value="Employee">Employee</option>
                                        <option value="Founder">Founder</option>
                                        <option value="Advisor">Advisor</option>
                                        <option value="Investor">Investor</option>
                                        <option value="Board Member">Board Member</option>
                                    </select>
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Bio</label>
                                    <textarea id="personBio" rows="3" placeholder="Brief professional bio and background" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Professional Details -->
                        <div>
                            <h4 class="text-lg font-semibold text-gray-900 mb-4">Professional Details</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Years of Experience</label>
                                    <select id="personExperience" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                        <option value="">Select Experience</option>
                                        <option value="0-2">0-2 years</option>
                                        <option value="3-5">3-5 years</option>
                                        <option value="6-10">6-10 years</option>
                                        <option value="10+">10+ years</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Skills (comma separated)</label>
                                    <input type="text" id="personSkills" placeholder="JavaScript, React, Node.js, Leadership" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Key Responsibilities</label>
                                    <textarea id="personResponsibilities" rows="3" placeholder="Main responsibilities and achievements in current role" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Social Links -->
                        <div>
                            <h4 class="text-lg font-semibold text-gray-900 mb-4">Social Links</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">LinkedIn</label>
                                    <input type="url" id="personLinkedIn" placeholder="https://linkedin.com/in/..." class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Twitter</label>
                                    <input type="url" id="personTwitter" placeholder="https://twitter.com/..." class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                            </div>
                        </div>

                        <div class="flex justify-end space-x-3 pt-4 border-t">
                            <button type="button" onclick="closeAddPersonModal()" class="px-6 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300">Cancel</button>
                            <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Add Person</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Add Investment Modal -->
        <div id="addInvestmentModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 overflow-y-auto">
            <div class="flex items-start justify-center min-h-screen p-4 pt-16">
                <div class="bg-white rounded-xl max-w-2xl w-full">
                    <div class="sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center rounded-t-xl">
                        <h3 class="text-2xl font-bold text-gray-900">Add Investment</h3>
                        <button onclick="closeAddInvestmentModal()" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    <form id="addInvestmentForm" class="p-6 space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Target Company *</label>
                                <select id="investmentTargetCompany" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                    <option value="">Select Company to Invest In</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Investment Amount *</label>
                                <input type="text" id="investmentAmount" required placeholder="e.g., $10M, $500K" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Investment Round *</label>
                                <select id="investmentRound" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                    <option value="">Select Round</option>
                                    <option value="Pre-Seed">Pre-Seed</option>
                                    <option value="Seed">Seed</option>
                                    <option value="Series A">Series A</option>
                                    <option value="Series B">Series B</option>
                                    <option value="Series C">Series C</option>
                                    <option value="Series D">Series D</option>
                                    <option value="Series E">Series E</option>
                                    <option value="Bridge">Bridge</option>
                                    <option value="Growth">Growth</option>
                                    <option value="IPO">IPO</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Investment Date *</label>
                                <input type="date" id="investmentDate" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Valuation (Optional)</label>
                                <input type="text" id="investmentValuation" placeholder="e.g., $100M, $1B" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Investment Type</label>
                                <select id="investmentType" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                    <option value="Lead Investor">Lead Investor</option>
                                    <option value="Co-Investor">Co-Investor</option>
                                    <option value="Follow-on">Follow-on</option>
                                    <option value="Strategic">Strategic</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Investment Notes</label>
                            <textarea id="investmentNotes" rows="3" placeholder="Additional details about this investment..." class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500"></textarea>
                        </div>

                        <div class="flex justify-end space-x-3 pt-4 border-t">
                            <button type="button" onclick="closeAddInvestmentModal()" class="px-6 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300">Cancel</button>
                            <button type="submit" class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">Add Investment</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Add Company Modal -->
        <div id="addCompanyModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 overflow-y-auto">
            <div class="flex items-start justify-center min-h-screen p-4 pt-16">
                <div class="bg-white rounded-xl max-w-4xl w-full max-h-screen overflow-y-auto">
                    <div class="sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center rounded-t-xl">
                        <h3 class="text-2xl font-bold text-gray-900">Add New Company</h3>
                        <button onclick="closeAddCompanyModal()" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    <form id="addCompanyForm" class="p-6 space-y-6">
                        <!-- Basic Information -->
                        <div>
                            <h4 class="text-lg font-semibold text-gray-900 mb-4">Basic Information</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Company Name *</label>
                                    <input type="text" id="companyName" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Legal Name</label>
                                    <input type="text" id="companyLegalName" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Tagline</label>
                                    <input type="text" id="companyTagline" placeholder="Brief description of what the company does" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                                    <textarea id="companyDescription" rows="4" placeholder="Detailed company description, mission, and services" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Company Details -->
                        <div>
                            <h4 class="text-lg font-semibold text-gray-900 mb-4">Company Details</h4>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Industry</label>
                                    <select id="companyIndustry" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                        <option value="">Select Industry</option>
                                        <option value="Technology">Technology</option>
                                        <option value="Healthcare">Healthcare</option>
                                        <option value="Finance">Finance</option>
                                        <option value="E-commerce">E-commerce</option>
                                        <option value="SaaS">SaaS</option>
                                        <option value="Fintech">Fintech</option>
                                        <option value="Automotive">Automotive</option>
                                        <option value="Education">Education</option>
                                        <option value="Retail">Retail</option>
                                        <option value="Media">Media</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Founded Year</label>
                                    <input type="number" id="companyFounded" min="1800" max="2024" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Employee Range</label>
                                    <select id="companyEmployees" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                        <option value="">Select Range</option>
                                        <option value="1-10">1-10</option>
                                        <option value="11-50">11-50</option>
                                        <option value="51-200">51-200</option>
                                        <option value="201-1000">201-1000</option>
                                        <option value="1000+">1000+</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Company Type</label>
                                    <select id="companyType" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                        <option value="Private">Private</option>
                                        <option value="Public">Public</option>
                                        <option value="Non-profit">Non-profit</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                                    <select id="companyStatus" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                        <option value="Active">Active</option>
                                        <option value="IPO">IPO'd</option>
                                        <option value="Acquired">Acquired</option>
                                        <option value="Closed">Closed</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Location</label>
                                    <input type="text" id="companyLocation" placeholder="City, Country" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                            </div>
                        </div>

                        <!-- Contact & Links -->
                        <div>
                            <h4 class="text-lg font-semibold text-gray-900 mb-4">Contact & Links</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Website</label>
                                    <input type="url" id="companyWebsite" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                    <input type="email" id="companyEmail" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">LinkedIn</label>
                                    <input type="url" id="companyLinkedIn" placeholder="https://linkedin.com/company/..." class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Twitter</label>
                                    <input type="url" id="companyTwitter" placeholder="https://twitter.com/..." class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                            </div>
                        </div>

                        <div class="flex justify-end space-x-3 pt-4 border-t">
                            <button type="button" onclick="closeAddCompanyModal()" class="px-6 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300">Cancel</button>
                            <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Add Company</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAl8eI-_8Ew9va0KPV8p4D2hc9WUTGiwuI",
            authDomain: "chat-d647c.firebaseapp.com",
            databaseURL: "https://chat-d647c-default-rtdb.firebaseio.com",
            projectId: "chat-d647c",
            storageBucket: "chat-d647c.firebasestorage.app",
            messagingSenderId: "123456789",
            appId: "1:123456789:web:7248a0983dcf0d45a87418",
            measurementId: "G-5RFLRYTLCN"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();
        const storage = firebase.storage();

        // Global variables
        let currentUser = null;
        let companies = [];
        let people = [];
        let currentCompany = null;
        let currentPerson = null;
        let fundingChart = null;

        // Sample people data
        const samplePeople = [
            {
                id: 'elon-musk',
                name: 'Elon Musk',
                email: 'elon@tesla.com',
                role: 'CEO & Product Architect',
                company: 'Tesla Motors',
                companyId: 'tesla-motors',
                location: 'Austin, Texas, USA',
                type: 'Founder',
                experience: '10+',
                bio: 'Entrepreneur and business magnate. CEO of Tesla and SpaceX, founder of Neuralink and The Boring Company. Previously co-founded PayPal and OpenAI.',
                skills: ['Leadership', 'Product Development', 'Engineering', 'Strategic Planning', 'Innovation'],
                responsibilities: [
                    'Leading Tesla\'s mission to accelerate sustainable transport',
                    'Overseeing product development and manufacturing',
                    'Strategic planning and company vision',
                    'Public representation and investor relations'
                ],
                yearsExperience: 25,
                companiesWorked: 6,
                notableProjects: 12,
                workExperience: [
                    { company: 'Tesla', role: 'CEO & Product Architect', duration: '2008 - Present', description: 'Leading electric vehicle revolution' },
                    { company: 'SpaceX', role: 'CEO & CTO', duration: '2002 - Present', description: 'Advancing space exploration' },
                    { company: 'PayPal', role: 'Co-founder', duration: '1999 - 2002', description: 'Online payment systems' }
                ],
                education: [
                    { institution: 'University of Pennsylvania', degree: 'BS in Economics', year: '1997' },
                    { institution: 'University of Pennsylvania', degree: 'BS in Physics', year: '1997' }
                ],
                awards: [
                    { title: 'Time Person of the Year', year: '2021', description: 'For advancing electric vehicles and space exploration' },
                    { title: 'Royal Aeronautical Society Gold Medal', year: '2012', description: 'For advancing commercial spaceflight' }
                ],
                mediaMentions: [
                    { title: 'Tesla CEO Announces New Gigafactory', source: 'TechCrunch', date: '2023-12-01' },
                    { title: 'SpaceX Successfully Launches Starship', source: 'Space News', date: '2023-11-15' }
                ],
                social: {
                    linkedin: 'https://linkedin.com/in/elonmusk',
                    twitter: 'https://twitter.com/elonmusk'
                },
                createdAt: '2023-01-01'
            },
            {
                id: 'sam-altman',
                name: 'Sam Altman',
                email: 'sam@openai.com',
                role: 'CEO',
                company: 'OpenAI',
                companyId: 'openai',
                location: 'San Francisco, California, USA',
                type: 'Founder',
                experience: '10+',
                bio: 'Entrepreneur and investor. CEO of OpenAI, former president of Y Combinator. Leading the development of artificial general intelligence.',
                skills: ['AI Strategy', 'Leadership', 'Venture Capital', 'Product Management', 'Fundraising'],
                responsibilities: [
                    'Leading OpenAI\'s mission to ensure AGI benefits humanity',
                    'Strategic partnerships and business development',
                    'Fundraising and investor relations',
                    'Public policy and AI safety advocacy'
                ],
                yearsExperience: 15,
                companiesWorked: 4,
                notableProjects: 8,
                workExperience: [
                    { company: 'OpenAI', role: 'CEO', duration: '2019 - Present', description: 'Leading AI research and development' },
                    { company: 'Y Combinator', role: 'President', duration: '2014 - 2019', description: 'Startup accelerator leadership' },
                    { company: 'Loopt', role: 'Co-founder & CEO', duration: '2005 - 2012', description: 'Location-based social networking' }
                ],
                education: [
                    { institution: 'Stanford University', degree: 'Computer Science (Dropped out)', year: '2005' }
                ],
                awards: [
                    { title: 'Time 100 Most Influential People', year: '2023', description: 'For leadership in AI development' },
                    { title: 'Forbes 30 Under 30', year: '2015', description: 'Technology category' }
                ],
                mediaMentions: [
                    { title: 'OpenAI CEO Discusses AI Safety', source: 'MIT Technology Review', date: '2023-11-20' },
                    { title: 'The Future of Artificial Intelligence', source: 'Wired', date: '2023-10-15' }
                ],
                social: {
                    linkedin: 'https://linkedin.com/in/sama',
                    twitter: 'https://twitter.com/sama'
                },
                createdAt: '2023-01-01'
            },
            {
                id: 'patrick-collison',
                name: 'Patrick Collison',
                email: 'patrick@stripe.com',
                role: 'CEO & Co-Founder',
                company: 'Stripe',
                companyId: 'stripe',
                location: 'San Francisco, California, USA',
                type: 'Founder',
                experience: '10+',
                bio: 'Irish-American entrepreneur. Co-founder and CEO of Stripe. Focused on building internet infrastructure for commerce.',
                skills: ['Fintech', 'Product Strategy', 'Engineering', 'Business Development', 'International Expansion'],
                responsibilities: [
                    'Leading Stripe\'s global expansion and product strategy',
                    'Building financial infrastructure for the internet',
                    'Regulatory compliance and partnerships',
                    'Engineering culture and technical vision'
                ],
                yearsExperience: 12,
                companiesWorked: 2,
                notableProjects: 6,
                workExperience: [
                    { company: 'Stripe', role: 'CEO & Co-Founder', duration: '2010 - Present', description: 'Building payment infrastructure' },
                    { company: 'Auctomatic', role: 'Co-founder', duration: '2007 - 2008', description: 'eBay auction management (acquired by Live Current Media)' }
                ],
                education: [
                    { institution: 'MIT', degree: 'Mathematics (Dropped out)', year: '2009' }
                ],
                awards: [
                    { title: 'Forbes 30 Under 30', year: '2016', description: 'Finance category' },
                    { title: 'Young Global Leader', year: '2018', description: 'World Economic Forum' }
                ],
                mediaMentions: [
                    { title: 'Stripe Expands Crypto Payment Support', source: 'Financial Times', date: '2023-10-12' },
                    { title: 'The Future of Digital Payments', source: 'Bloomberg', date: '2023-09-20' }
                ],
                social: {
                    linkedin: 'https://linkedin.com/in/patrickcollison',
                    twitter: 'https://twitter.com/patrickc'
                },
                createdAt: '2023-01-01'
            }
        ];

        // Sample data for testing
        const sampleCompanies = [
            {
                id: 'tesla-motors',
                name: 'Tesla Motors',
                legalName: 'Tesla, Inc.',
                tagline: 'Accelerating the world\'s transition to sustainable energy',
                description: 'Tesla, Inc. is an American electric vehicle and clean energy company based in Austin, Texas. Tesla designs and manufactures electric cars, battery energy storage from home to grid-scale, solar panels and solar roof tiles, and related products and services. Tesla is one of the world\'s most valuable companies and is among the most valuable automakers.',
                industry: 'Automotive',
                founded: 2003,
                employees: '1000+',
                location: 'Austin, Texas, USA',
                website: 'https://tesla.com',
                type: 'Public',
                status: 'IPO',
                rank: '#1',
                email: 'info@tesla.com',
                phone: '+1-512-516-8177',
                address: '1 Tesla Road, Austin, TX 78725, USA',
                investorEmail: 'ir@tesla.com',
                operatingStatus: 'Active',
                alternateNames: ['Tesla Inc', 'Tesla Motors Inc'],
                founders: ['Elon Musk', 'Martin Eberhard', 'Marc Tarpenning', 'JB Straubel', 'Ian Wright'],
                fundingRounds: [
                    { round: 'IPO', amount: '$226M', date: '2010-06-29', leadInvestors: 'Public Market', valuation: '$1.7B' },
                    { round: 'Series F', amount: '$50M', date: '2009-07-15', leadInvestors: 'Daimler AG', valuation: '$500M' },
                    { round: 'Series E', amount: '$40M', date: '2008-05-01', leadInvestors: 'Various VCs', valuation: '$300M' },
                    { round: 'Series D', amount: '$45M', date: '2007-05-01', leadInvestors: 'Valor Equity Partners', valuation: '$200M' }
                ],
                totalFunding: '$361M',
                latestValuation: '$800B+',
                leadership: [
                    { name: 'Elon Musk', position: 'CEO & Product Architect', type: 'current' },
                    { name: 'Drew Baglino', position: 'SVP, Powertrain & Energy Engineering', type: 'current' },
                    { name: 'Zachary Kirkhorn', position: 'Former CFO', type: 'past' },
                    { name: 'Vaibhav Taneja', position: 'CFO', type: 'current' }
                ],
                boardMembers: [
                    { name: 'Robyn Denholm', position: 'Chairwoman' },
                    { name: 'James Murdoch', position: 'Board Member' },
                    { name: 'Kimbal Musk', position: 'Board Member' }
                ],
                acquisitions: [
                    { company: 'SolarCity', amount: '$2.6B', date: '2016-11-21', description: 'Solar energy services company' },
                    { company: 'Maxwell Technologies', amount: '$218M', date: '2019-05-16', description: 'Ultracapacitor and battery technology' }
                ],
                products: [
                    { name: 'Model S', description: 'Luxury electric sedan' },
                    { name: 'Model 3', description: 'Mid-size electric sedan' },
                    { name: 'Model X', description: 'Electric SUV with falcon-wing doors' },
                    { name: 'Model Y', description: 'Compact electric SUV' },
                    { name: 'Cybertruck', description: 'Electric pickup truck' },
                    { name: 'Powerwall', description: 'Home battery energy storage' },
                    { name: 'Solar Roof', description: 'Solar panel roof tiles' }
                ],
                technologyStack: [
                    { name: 'Custom Silicon', description: 'In-house chip design' },
                    { name: 'Neural Networks', description: 'AI for autonomous driving' },
                    { name: 'Battery Technology', description: '4680 battery cells' },
                    { name: 'Supercharger Network', description: 'Fast charging infrastructure' }
                ],
                customers: ['Individual Consumers', 'Government Agencies', 'Commercial Fleets', 'Energy Companies'],
                news: [
                    { title: 'Tesla Reports Record Q4 2023 Deliveries', date: '2024-01-02', summary: 'Tesla delivered over 484,000 vehicles in Q4 2023, setting a new quarterly record.' },
                    { title: 'Cybertruck Production Begins', date: '2023-11-30', summary: 'Tesla begins production of the highly anticipated Cybertruck at Gigafactory Texas.' },
                    { title: 'Tesla Opens New Gigafactory in Mexico', date: '2023-10-15', summary: 'Construction begins on Tesla\'s new manufacturing facility in Nuevo LeÃ³n, Mexico.' }
                ],
                pressReleases: [
                    { title: 'Tesla Announces Full Self-Driving Beta Expansion', date: '2023-12-01' },
                    { title: 'Supercharger Network Reaches 50,000 Connectors Globally', date: '2023-11-15' }
                ],
                competitors: ['Rivian', 'Lucid Motors', 'Ford', 'General Motors', 'BYD'],
                similarCompanies: ['NIO', 'Xpeng', 'Li Auto', 'Fisker'],
                timeline: [
                    { date: '2003-07-01', event: 'Tesla Motors founded', type: 'founding' },
                    { date: '2008-02-01', event: 'First Roadster delivered', type: 'product' },
                    { date: '2010-06-29', event: 'IPO on NASDAQ', type: 'funding' },
                    { date: '2012-06-22', event: 'Model S production begins', type: 'product' },
                    { date: '2016-11-21', event: 'SolarCity acquisition completed', type: 'acquisition' },
                    { date: '2020-01-29', event: 'Market cap exceeds $100B', type: 'milestone' },
                    { date: '2023-11-30', event: 'Cybertruck deliveries begin', type: 'product' }
                ],
                social: {
                    linkedin: 'https://linkedin.com/company/tesla-motors',
                    twitter: 'https://twitter.com/tesla',
                    facebook: 'https://facebook.com/tesla',
                    instagram: 'https://instagram.com/teslamotors'
                }
            },
            {
                id: 'openai',
                name: 'OpenAI',
                legalName: 'OpenAI, L.P.',
                tagline: 'Creating safe artificial general intelligence that benefits all of humanity',
                description: 'OpenAI is an AI research and deployment company. Our mission is to ensure that artificial general intelligence (AGI) benefits all of humanity. We conduct research in AI safety and develop AI systems that are safe, beneficial, and understandable.',
                industry: 'Technology',
                founded: 2015,
                employees: '201-1000',
                location: 'San Francisco, California, USA',
                website: 'https://openai.com',
                type: 'Private',
                status: 'Active',
                rank: '#2',
                email: 'info@openai.com',
                phone: '+1-415-555-0123',
                address: '3180 18th St, San Francisco, CA 94110, USA',
                investorEmail: 'investors@openai.com',
                operatingStatus: 'Active',
                alternateNames: ['OpenAI LP', 'OpenAI Inc'],
                founders: ['Sam Altman', 'Elon Musk', 'Greg Brockman', 'Ilya Sutskever', 'Wojciech Zaremba'],
                fundingRounds: [
                    { round: 'Series C', amount: '$10B', date: '2023-01-23', leadInvestors: 'Microsoft', valuation: '$29B' },
                    { round: 'Series B', amount: '$1B', date: '2019-07-22', leadInvestors: 'Microsoft', valuation: '$1B' },
                    { round: 'Series A', amount: '$1B', date: '2015-12-11', leadInvestors: 'Various', valuation: '$1B' }
                ],
                totalFunding: '$12B',
                latestValuation: '$29B',
                leadership: [
                    { name: 'Sam Altman', position: 'CEO', type: 'current' },
                    { name: 'Greg Brockman', position: 'President & Co-Founder', type: 'current' },
                    { name: 'Ilya Sutskever', position: 'Chief Scientist', type: 'current' },
                    { name: 'Mira Murati', position: 'CTO', type: 'current' }
                ],
                boardMembers: [
                    { name: 'Bret Taylor', position: 'Chairman' },
                    { name: 'Adam D\'Angelo', position: 'Board Member' },
                    { name: 'Reid Hoffman', position: 'Board Member' }
                ],
                acquisitions: [],
                products: [
                    { name: 'ChatGPT', description: 'Conversational AI assistant' },
                    { name: 'GPT-4', description: 'Large language model' },
                    { name: 'DALL-E', description: 'AI image generation' },
                    { name: 'Whisper', description: 'Speech recognition system' },
                    { name: 'Codex', description: 'AI code generation' }
                ],
                technologyStack: [
                    { name: 'Transformer Architecture', description: 'Neural network architecture' },
                    { name: 'Reinforcement Learning', description: 'RLHF training methods' },
                    { name: 'Large Scale Computing', description: 'Distributed training systems' },
                    { name: 'Safety Research', description: 'AI alignment and safety' }
                ],
                customers: ['Microsoft', 'Individual Users', 'Developers', 'Enterprises'],
                news: [
                    { title: 'OpenAI Launches GPT-4 Turbo', date: '2023-11-06', summary: 'OpenAI announces GPT-4 Turbo with improved capabilities and lower costs.' },
                    { title: 'ChatGPT Reaches 100 Million Users', date: '2023-01-01', summary: 'ChatGPT becomes the fastest-growing consumer application in history.' }
                ],
                pressReleases: [
                    { title: 'OpenAI Announces Custom GPTs', date: '2023-11-06' },
                    { title: 'Partnership with Microsoft Expanded', date: '2023-01-23' }
                ],
                competitors: ['Google DeepMind', 'Anthropic', 'Cohere', 'AI21 Labs'],
                similarCompanies: ['Hugging Face', 'Stability AI', 'Midjourney', 'Character.AI'],
                timeline: [
                    { date: '2015-12-11', event: 'OpenAI founded', type: 'founding' },
                    { date: '2018-06-11', event: 'GPT-1 released', type: 'product' },
                    { date: '2019-02-14', event: 'GPT-2 announced', type: 'product' },
                    { date: '2020-06-11', event: 'GPT-3 released', type: 'product' },
                    { date: '2022-11-30', event: 'ChatGPT launched', type: 'product' },
                    { date: '2023-03-14', event: 'GPT-4 released', type: 'product' }
                ],
                social: {
                    linkedin: 'https://linkedin.com/company/openai',
                    twitter: 'https://twitter.com/openai',
                    facebook: 'https://facebook.com/openai',
                    instagram: 'https://instagram.com/openai'
                }
            },
            {
                id: 'stripe',
                name: 'Stripe',
                legalName: 'Stripe, Inc.',
                tagline: 'Financial infrastructure for the internet',
                description: 'Stripe is a financial services and software as a service (SaaS) company dual-headquartered in San Francisco, California and Dublin, Ireland. The company primarily offers payment processing software and application programming interfaces for e-commerce websites and mobile applications.',
                industry: 'Fintech',
                founded: 2010,
                employees: '1000+',
                location: 'San Francisco, California, USA',
                website: 'https://stripe.com',
                type: 'Private',
                status: 'Active',
                rank: '#3',
                email: 'info@stripe.com',
                phone: '+1-888-926-2289',
                address: '354 Oyster Point Blvd, South San Francisco, CA 94080, USA',
                investorEmail: 'investors@stripe.com',
                operatingStatus: 'Active',
                alternateNames: ['Stripe Inc', '/dev/payments'],
                founders: ['Patrick Collison', 'John Collison'],
                fundingRounds: [
                    { round: 'Series H', amount: '$600M', date: '2021-03-14', leadInvestors: 'Allianz X', valuation: '$95B' },
                    { round: 'Series G', amount: '$250M', date: '2020-04-16', leadInvestors: 'Andreessen Horowitz', valuation: '$36B' },
                    { round: 'Series F', amount: '$245M', date: '2019-09-19', leadInvestors: 'General Catalyst', valuation: '$35B' }
                ],
                totalFunding: '$2.2B',
                latestValuation: '$95B',
                leadership: [
                    { name: 'Patrick Collison', position: 'CEO & Co-Founder', type: 'current' },
                    { name: 'John Collison', position: 'President & Co-Founder', type: 'current' },
                    { name: 'David Singleton', position: 'CTO', type: 'current' },
                    { name: 'Dhivya Suryadevara', position: 'CFO', type: 'current' }
                ],
                boardMembers: [
                    { name: 'John Doerr', position: 'Board Member' },
                    { name: 'Diane Greene', position: 'Board Member' },
                    { name: 'Christa Davies', position: 'Board Member' }
                ],
                acquisitions: [
                    { company: 'Paystack', amount: '$200M+', date: '2020-10-15', description: 'African payments company' },
                    { company: 'Touchtech Payments', amount: 'Undisclosed', date: '2019-12-02', description: 'European payment processing' }
                ],
                products: [
                    { name: 'Payments', description: 'Online payment processing' },
                    { name: 'Billing', description: 'Subscription management' },
                    { name: 'Connect', description: 'Marketplace payments' },
                    { name: 'Radar', description: 'Fraud prevention' },
                    { name: 'Terminal', description: 'In-person payments' },
                    { name: 'Atlas', description: 'Company incorporation' }
                ],
                technologyStack: [
                    { name: 'Ruby on Rails', description: 'Backend framework' },
                    { name: 'Machine Learning', description: 'Fraud detection' },
                    { name: 'APIs', description: 'Developer-first approach' },
                    { name: 'Global Infrastructure', description: 'Multi-region deployment' }
                ],
                customers: ['Amazon', 'Google', 'Microsoft', 'Shopify', 'Lyft', 'Deliveroo'],
                news: [
                    { title: 'Stripe Launches Crypto Payments', date: '2023-10-12', summary: 'Stripe announces support for cryptocurrency payments for merchants.' },
                    { title: 'Stripe Expands to 50+ Countries', date: '2023-08-15', summary: 'Stripe continues global expansion with new market launches.' }
                ],
                pressReleases: [
                    { title: 'Stripe Announces New Banking-as-a-Service Features', date: '2023-09-20' },
                    { title: 'Partnership with OpenAI for Payment Processing', date: '2023-07-10' }
                ],
                competitors: ['PayPal', 'Square', 'Adyen', 'Braintree'],
                similarCompanies: ['Plaid', 'Checkout.com', 'Razorpay', 'Klarna'],
                timeline: [
                    { date: '2010-01-01', event: 'Stripe founded', type: 'founding' },
                    { date: '2011-09-01', event: 'Public beta launch', type: 'product' },
                    { date: '2012-02-01', event: 'Series A funding', type: 'funding' },
                    { date: '2016-11-25', event: 'Stripe Atlas launched', type: 'product' },
                    { date: '2020-10-15', event: 'Paystack acquisition', type: 'acquisition' },
                    { date: '2021-03-14', event: 'Series H at $95B valuation', type: 'funding' }
                ],
                social: {
                    linkedin: 'https://linkedin.com/company/stripe',
                    twitter: 'https://twitter.com/stripe',
                    facebook: 'https://facebook.com/stripe',
                    instagram: 'https://instagram.com/stripe'
                }
            }
        ];

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            initializeAuth();
            loadInitialData();
            setupEventListeners();
        });

        // Authentication
        function initializeAuth() {
            const authButton = document.getElementById('authButton');
            const userProfile = document.getElementById('userProfile');
            const signOutButton = document.getElementById('signOutButton');

            authButton.addEventListener('click', signInWithGoogle);
            signOutButton.addEventListener('click', signOut);

            auth.onAuthStateChanged(user => {
                if (user) {
                    currentUser = user;
                    authButton.classList.add('hidden');
                    userProfile.classList.remove('hidden');
                    document.getElementById('userName').textContent = user.displayName;
                    document.getElementById('userPhoto').src = user.photoURL;
                } else {
                    currentUser = null;
                    authButton.classList.remove('hidden');
                    userProfile.classList.add('hidden');
                }
            });
        }

        function signInWithGoogle() {
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider).catch(error => {
                console.error('Sign in error:', error);
                alert('Sign in failed: ' + error.message);
            });
        }

        function signOut() {
            auth.signOut();
        }

        // Data Loading
        function loadInitialData() {
            // Load sample companies into Firestore
            sampleCompanies.forEach(company => {
                db.collection('companies').doc(company.id).set(company).then(() => {
                    console.log(`${company.name} added to Firestore`);
                }).catch(error => {
                    console.error(`Error adding ${company.name}:`, error);
                });
            });

            // Load sample people into Firestore
            samplePeople.forEach(person => {
                db.collection('people').doc(person.id).set(person).then(() => {
                    console.log(`${person.name} added to Firestore`);
                }).catch(error => {
                    console.error(`Error adding ${person.name}:`, error);
                });
            });

            // Load data from Firestore
            loadCompanies();
            loadPeople();
        }

        function loadCompanies() {
            db.collection('companies').onSnapshot(snapshot => {
                companies = [];
                snapshot.forEach(doc => {
                    companies.push({ id: doc.id, ...doc.data() });
                });
                updateUI();
            }, error => {
                console.error('Error loading companies:', error);
                // Use fallback data
                companies = sampleCompanies;
                updateUI();
            });
        }

        function loadPeople() {
            db.collection('people').onSnapshot(snapshot => {
                people = [];
                snapshot.forEach(doc => {
                    people.push({ id: doc.id, ...doc.data() });
                });
                updatePeopleUI();
            }, error => {
                console.error('Error loading people:', error);
                // Use fallback data
                people = samplePeople;
                updatePeopleUI();
            });
        }

        // UI Updates
        function updateUI() {
            updateStats();
            updateFeaturedCompanies();
            updateCompaniesGrid();
            updateRecentActivity();
        }

        function updatePeopleUI() {
            updatePeopleGrid();
            updatePeopleFilters();
        }

        function updatePeopleGrid() {
            const container = document.getElementById('peopleGrid');
            container.innerHTML = '';
            
            people.forEach(person => {
                const card = createPersonCard(person);
                container.appendChild(card);
            });
        }

        function updatePeopleFilters() {
            // Update company filter dropdown
            const companyFilter = document.getElementById('companyFilter');
            const personCompanySelect = document.getElementById('personCompany');
            const investmentTargetSelect = document.getElementById('investmentTargetCompany');
            
            // Clear existing options (keep first option)
            while (companyFilter.children.length > 1) {
                companyFilter.removeChild(companyFilter.lastChild);
            }
            while (personCompanySelect && personCompanySelect.children.length > 1) {
                personCompanySelect.removeChild(personCompanySelect.lastChild);
            }
            while (investmentTargetSelect && investmentTargetSelect.children.length > 1) {
                investmentTargetSelect.removeChild(investmentTargetSelect.lastChild);
            }
            
            // Add company options
            companies.forEach(company => {
                const option1 = document.createElement('option');
                option1.value = company.name;
                option1.textContent = company.name;
                companyFilter.appendChild(option1);
                
                if (personCompanySelect) {
                    const option2 = document.createElement('option');
                    option2.value = company.id;
                    option2.textContent = company.name;
                    personCompanySelect.appendChild(option2);
                }
                
                if (investmentTargetSelect) {
                    const option3 = document.createElement('option');
                    option3.value = company.id;
                    option3.textContent = company.name;
                    investmentTargetSelect.appendChild(option3);
                }
            });
        }

        function createPersonCard(person) {
            const card = document.createElement('div');
            card.className = 'bg-white rounded-xl shadow-md p-6 card-hover cursor-pointer border border-gray-100';
            card.onclick = () => showPersonDetail(person);
            
            const initials = person.name.split(' ').map(n => n[0]).join('');
            
            card.innerHTML = `
                <div class="flex items-start space-x-4 mb-4">
                    <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center">
                        <span class="text-white font-bold text-lg">${initials}</span>
                    </div>
                    <div class="flex-1 min-w-0">
                        <h3 class="text-lg font-semibold text-gray-900 truncate">${person.name}</h3>
                        <p class="text-gray-600 text-sm mb-1">${person.role}</p>
                        <p class="text-blue-600 text-sm font-medium">${person.company}</p>
                    </div>
                </div>
                <p class="text-gray-600 text-sm mb-4 line-clamp-2">${person.bio || 'No bio available'}</p>
                <div class="flex flex-wrap gap-2 mb-4">
                    <span class="px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs">${person.type}</span>
                    <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">${person.experience} exp</span>
                    ${person.location ? `<span class="px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs">${person.location.split(',')[0]}</span>` : ''}
                </div>
                <div class="flex justify-between items-center text-sm">
                    <span class="text-gray-500">${person.yearsExperience || 0} years experience</span>
                    <span class="text-blue-600 font-medium">${person.skills ? person.skills.length : 0} skills</span>
                </div>
            `;
            
            return card;
        }

        function updateStats() {
            document.getElementById('companyCount').textContent = companies.length;
            
            const totalFunding = companies.reduce((sum, c) => {
                const funding = parseFloat(c.totalFunding?.replace(/[$BM]/g, '') || 0);
                return sum + (c.totalFunding?.includes('B') ? funding * 1000 : funding);
            }, 0);
            document.getElementById('totalFunding').textContent = `$${totalFunding.toFixed(1)}B`;
            
            const totalPeople = companies.reduce((sum, c) => sum + (c.leadership ? c.leadership.length : 0), 0);
            document.getElementById('peopleCount').textContent = totalPeople;
            
            document.getElementById('investorCount').textContent = '150+';
        }

        function updateFeaturedCompanies() {
            const container = document.getElementById('featuredCompanies');
            container.innerHTML = '';
            
            companies.slice(0, 3).forEach(company => {
                const card = createCompanyCard(company);
                container.appendChild(card);
            });
        }

        function updateCompaniesGrid() {
            const container = document.getElementById('companiesGrid');
            container.innerHTML = '';
            
            companies.forEach(company => {
                const card = createCompanyCard(company);
                container.appendChild(card);
            });
        }

        function updateRecentActivity() {
            // Update recent funding
            const fundingContainer = document.getElementById('recentFunding');
            fundingContainer.innerHTML = '';
            
            companies.forEach(company => {
                if (company.fundingRounds && company.fundingRounds.length > 0) {
                    const latestRound = company.fundingRounds[0];
                    const item = document.createElement('div');
                    item.className = 'flex items-center space-x-3 p-3 bg-gray-50 rounded-lg';
                    item.innerHTML = `
                        <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-dollar-sign text-green-600"></i>
                        </div>
                        <div class="flex-1">
                            <p class="font-medium text-gray-900">${company.name}</p>
                            <p class="text-sm text-gray-600">${latestRound.round} â€¢ ${latestRound.amount}</p>
                        </div>
                        <span class="text-xs text-gray-500">${latestRound.date}</span>
                    `;
                    fundingContainer.appendChild(item);
                }
            });

            // Update recent news
            const newsContainer = document.getElementById('recentNews');
            newsContainer.innerHTML = '';
            
            companies.forEach(company => {
                if (company.news && company.news.length > 0) {
                    company.news.slice(0, 2).forEach(article => {
                        const item = document.createElement('div');
                        item.className = 'p-3 bg-gray-50 rounded-lg';
                        item.innerHTML = `
                            <h5 class="font-medium text-gray-900 mb-1">${article.title}</h5>
                            <p class="text-sm text-gray-600 mb-2">${article.summary}</p>
                            <div class="flex justify-between items-center">
                                <span class="text-xs text-blue-600">${company.name}</span>
                                <span class="text-xs text-gray-500">${article.date}</span>
                            </div>
                        `;
                        newsContainer.appendChild(item);
                    });
                }
            });
        }

        function createCompanyCard(company) {
            const card = document.createElement('div');
            card.className = 'bg-white rounded-xl shadow-md p-6 card-hover cursor-pointer border border-gray-100';
            card.onclick = () => showCompanyDetail(company);
            
            const statusClass = {
                'Active': 'status-active',
                'IPO': 'status-ipo',
                'Acquired': 'status-acquired',
                'Closed': 'status-closed'
            }[company.status] || 'status-active';
            
            card.innerHTML = `
                <div class="flex items-start justify-between mb-4">
                    <div class="flex items-start space-x-4">
                        <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center">
                            <span class="text-white font-bold text-xl">${company.name.charAt(0)}</span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center space-x-2 mb-1">
                                <h3 class="text-lg font-semibold text-gray-900 truncate">${company.name}</h3>
                                ${company.rank ? `<span class="rank-badge text-white text-xs px-2 py-1 rounded-full">${company.rank}</span>` : ''}
                            </div>
                            <p class="text-gray-600 text-sm mb-2">${company.tagline || 'No tagline available'}</p>
                        </div>
                    </div>
                    <span class="px-2 py-1 ${statusClass} text-white text-xs rounded-full">${company.status}</span>
                </div>
                <p class="text-gray-600 text-sm mb-4 line-clamp-2">${company.description || 'No description available'}</p>
                <div class="flex flex-wrap gap-2 mb-4">
                    ${company.industry ? `<span class="px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs">${company.industry}</span>` : ''}
                    ${company.location ? `<span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">${company.location.split(',')[0]}</span>` : ''}
                    ${company.employees ? `<span class="px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs">${company.employees}</span>` : ''}
                </div>
                <div class="flex justify-between items-center text-sm">
                    <span class="text-gray-500">Founded ${company.founded || 'N/A'}</span>
                    <span class="text-blue-600 font-medium">${company.totalFunding || 'No funding data'}</span>
                </div>
            `;
            
            return card;
        }

        // Person Detail Modal
        function showPersonDetail(person) {
            currentPerson = person;
            const modal = document.getElementById('personModal');
            
            // Update header information
            const initials = person.name.split(' ').map(n => n[0]).join('');
            document.getElementById('modalPersonInitials').textContent = initials;
            document.getElementById('modalPersonName').textContent = person.name;
            document.getElementById('modalPersonRole').textContent = person.role;
            document.getElementById('modalPersonCompany').textContent = person.company;
            document.getElementById('modalPersonLocation').textContent = person.location || 'N/A';
            document.getElementById('modalPersonExperience').textContent = person.experience || 'N/A';
            document.getElementById('modalPersonType').textContent = person.type;
            
            // Update links
            if (person.social?.linkedin) {
                const linkedinLink = document.getElementById('modalPersonLinkedIn');
                linkedinLink.href = person.social.linkedin;
                linkedinLink.style.display = 'inline';
            }
            
            if (person.social?.twitter) {
                const twitterLink = document.getElementById('modalPersonTwitter');
                twitterLink.href = person.social.twitter;
                twitterLink.style.display = 'inline';
            }
            
            if (person.email) {
                const emailLink = document.getElementById('modalPersonEmail');
                emailLink.href = `mailto:${person.email}`;
                emailLink.style.display = 'inline';
            }
            
            // Show edit button if user owns this profile or company
            if (currentUser && (currentUser.uid === company.createdBy || 
                (company.leadership && company.leadership.some(leader => 
                    leader.type === 'current' && currentUser.email && 
                    (leader.name.toLowerCase().includes(currentUser.displayName?.toLowerCase() || '') ||
                     currentUser.email.includes(leader.name.toLowerCase().replace(' ', '.'))))))) {
                document.getElementById('editCompanyBtn').classList.remove('hidden');
                document.getElementById('addInvestmentBtn').classList.remove('hidden');
            } else {
                document.getElementById('editCompanyBtn').classList.add('hidden');
                document.getElementById('addInvestmentBtn').classList.add('hidden');
            }
            
            // Update all tab content
            updatePersonProfileTab(person);
            updatePersonExperienceTab(person);
            updatePersonEducationTab(person);
            updatePersonAchievementsTab(person);
            updatePersonNetworkTab(person);
            
            modal.classList.remove('hidden');
            showPersonTab('profile');
        }

        function updatePersonProfileTab(person) {
            document.getElementById('modalPersonBio').textContent = person.bio || 'No bio available';
            document.getElementById('modalPersonYearsExp').textContent = person.yearsExperience || 0;
            document.getElementById('modalPersonCompaniesWorked').textContent = person.companiesWorked || 0;
            document.getElementById('modalPersonProjects').textContent = person.notableProjects || 0;
            
            // Update skills
            const skillsContainer = document.getElementById('modalPersonSkills');
            skillsContainer.innerHTML = '';
            if (person.skills && person.skills.length > 0) {
                person.skills.forEach(skill => {
                    const skillElement = document.createElement('span');
                    skillElement.className = 'px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm';
                    skillElement.textContent = skill;
                    skillsContainer.appendChild(skillElement);
                });
            } else {
                skillsContainer.innerHTML = '<span class="text-gray-500">No skills listed</span>';
            }
            
            // Update responsibilities
            const responsibilitiesContainer = document.getElementById('modalPersonResponsibilities');
            responsibilitiesContainer.innerHTML = '';
            if (person.responsibilities && person.responsibilities.length > 0) {
                person.responsibilities.forEach(responsibility => {
                    const respElement = document.createElement('div');
                    respElement.className = 'text-sm text-gray-700 flex items-start';
                    respElement.innerHTML = `<i class="fas fa-check-circle text-green-500 mr-2 mt-1"></i>${responsibility}`;
                    responsibilitiesContainer.appendChild(respElement);
                });
            } else {
                responsibilitiesContainer.innerHTML = '<div class="text-gray-500">No responsibilities listed</div>';
            }
        }

        function updatePersonExperienceTab(person) {
            const container = document.getElementById('modalPersonExperienceList');
            container.innerHTML = '';
            
            if (person.workExperience && person.workExperience.length > 0) {
                person.workExperience.forEach(exp => {
                    const expCard = document.createElement('div');
                    expCard.className = 'p-4 bg-gray-50 rounded-lg';
                    expCard.innerHTML = `
                        <div class="flex justify-between items-start mb-2">
                            <h5 class="font-medium text-gray-900">${exp.role}</h5>
                            <span class="text-sm text-gray-500">${exp.duration}</span>
                        </div>
                        <p class="text-blue-600 text-sm mb-2">${exp.company}</p>
                        <p class="text-gray-600 text-sm">${exp.description}</p>
                    `;
                    container.appendChild(expCard);
                });
            } else {
                container.innerHTML = '<p class="text-gray-500">No work experience available</p>';
            }
        }

        function updatePersonEducationTab(person) {
            const container = document.getElementById('modalPersonEducationList');
            container.innerHTML = '';
            
            if (person.education && person.education.length > 0) {
                person.education.forEach(edu => {
                    const eduCard = document.createElement('div');
                    eduCard.className = 'p-4 bg-gray-50 rounded-lg';
                    eduCard.innerHTML = `
                        <div class="flex justify-between items-start mb-2">
                            <h5 class="font-medium text-gray-900">${edu.degree}</h5>
                            <span class="text-sm text-gray-500">${edu.year}</span>
                        </div>
                        <p class="text-blue-600 text-sm">${edu.institution}</p>
                    `;
                    container.appendChild(eduCard);
                });
            } else {
                container.innerHTML = '<p class="text-gray-500">No education information available</p>';
            }
        }

        function updatePersonAchievementsTab(person) {
            // Awards
            const awardsContainer = document.getElementById('modalPersonAwards');
            awardsContainer.innerHTML = '';
            
            if (person.awards && person.awards.length > 0) {
                person.awards.forEach(award => {
                    const awardCard = document.createElement('div');
                    awardCard.className = 'p-4 bg-yellow-50 rounded-lg';
                    awardCard.innerHTML = `
                        <div class="flex items-start">
                            <i class="fas fa-trophy text-yellow-600 mr-3 mt-1"></i>
                            <div>
                                <h5 class="font-medium text-gray-900">${award.title}</h5>
                                <p class="text-sm text-gray-600 mb-1">${award.year}</p>
                                <p class="text-sm text-gray-700">${award.description}</p>
                            </div>
                        </div>
                    `;
                    awardsContainer.appendChild(awardCard);
                });
            } else {
                awardsContainer.innerHTML = '<p class="text-gray-500">No awards available</p>';
            }
            
            // Media mentions
            const mentionsContainer = document.getElementById('modalPersonMentions');
            mentionsContainer.innerHTML = '';
            
            if (person.mediaMentions && person.mediaMentions.length > 0) {
                person.mediaMentions.forEach(mention => {
                    const mentionCard = document.createElement('div');
                    mentionCard.className = 'p-4 bg-blue-50 rounded-lg';
                    mentionCard.innerHTML = `
                        <h5 class="font-medium text-gray-900 mb-1">${mention.title}</h5>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-blue-600">${mention.source}</span>
                            <span class="text-sm text-gray-500">${mention.date}</span>
                        </div>
                    `;
                    mentionsContainer.appendChild(mentionCard);
                });
            } else {
                mentionsContainer.innerHTML = '<p class="text-gray-500">No media mentions available</p>';
            }
        }

        function updatePersonNetworkTab(person) {
            const networkContainer = document.getElementById('modalPersonNetwork');
            const investmentsContainer = document.getElementById('modalPersonInvestments');
            
            networkContainer.innerHTML = '<p class="text-gray-500">Professional network information coming soon</p>';
            investmentsContainer.innerHTML = '<p class="text-gray-500">Investment and advisory information coming soon</p>';
        }

        function closePersonModal() {
            document.getElementById('personModal').classList.add('hidden');
        }

        function showPersonTab(tabName) {
            // Hide all person tabs
            document.querySelectorAll('.person-tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            // Remove active class from all person tab buttons
            document.querySelectorAll('#personModal nav button').forEach(btn => {
                btn.classList.remove('tab-active');
                btn.classList.add('border-transparent', 'text-gray-500');
            });
            
            // Show selected tab
            document.getElementById(tabName + 'PersonTab').classList.remove('hidden');
            
            // Add active class to selected tab button
            event.target.classList.add('tab-active');
            event.target.classList.remove('border-transparent', 'text-gray-500');
        }

        // Company Detail Modal
        function showCompanyDetail(company) {
            currentCompany = company;
            const modal = document.getElementById('companyModal');
            
            // Update header information
            document.getElementById('modalCompanyName').textContent = company.name;
            document.getElementById('modalCompanyTagline').textContent = company.tagline || 'No tagline available';
            document.getElementById('modalCompanyIndustry').textContent = company.industry || 'N/A';
            document.getElementById('modalCompanyLocation').textContent = company.location || 'N/A';
            document.getElementById('modalCompanyFounded').textContent = `Founded ${company.founded || 'N/A'}`;
            
            const statusElement = document.getElementById('modalCompanyStatus');
            statusElement.textContent = company.status;
            statusElement.className = `px-3 py-1 rounded-full text-sm font-medium ${
                company.status === 'Active' ? 'status-active' :
                company.status === 'IPO' ? 'status-ipo' :
                company.status === 'Acquired' ? 'status-acquired' : 'status-closed'
            } text-white`;
            
            if (company.rank) {
                document.getElementById('modalCompanyRank').textContent = company.rank;
            }
            
            // Update links
            if (company.website) {
                const websiteLink = document.getElementById('modalCompanyWebsite');
                websiteLink.href = company.website;
                websiteLink.style.display = 'inline';
            }
            
            if (company.social?.linkedin) {
                const linkedinLink = document.getElementById('modalCompanyLinkedIn');
                linkedinLink.href = company.social.linkedin;
                linkedinLink.style.display = 'inline';
            }
            
            if (company.social?.twitter) {
                const twitterLink = document.getElementById('modalCompanyTwitter');
                twitterLink.href = company.social.twitter;
                twitterLink.style.display = 'inline';
            }
            
            // Update all tab content
            updateOverviewTab(company);
            updateFundingTab(company);
            updateLeadershipTab(company);
            updateAcquisitionsTab(company);
            updateTechnologyTab(company);
            updateNewsTab(company);
            updateCompetitorsTab(company);
            updateEventsTab(company);
            updateContactTab(company);
            
            modal.classList.remove('hidden');
            showTab('overview');
        }

        function updateOverviewTab(company) {
            document.getElementById('modalCompanyDescription').textContent = company.description || 'No description available';
            document.getElementById('modalCompanyLegalName').textContent = company.legalName || company.name;
            document.getElementById('modalCompanyType').textContent = company.type || 'N/A';
            document.getElementById('modalOperatingStatus').textContent = company.operatingStatus || 'N/A';
            document.getElementById('modalCompanyEmployees').textContent = company.employees || 'N/A';
            document.getElementById('modalTotalFunding').textContent = company.totalFunding || '$0';
            document.getElementById('modalFundingRounds').textContent = company.fundingRounds ? company.fundingRounds.length : '0';
            document.getElementById('modalValuation').textContent = company.latestValuation || 'N/A';
            
            // Update founders
            const foundersContainer = document.getElementById('modalFounders');
            foundersContainer.innerHTML = '';
            if (company.founders && company.founders.length > 0) {
                company.founders.forEach(founder => {
                    const founderElement = document.createElement('div');
                    founderElement.className = 'text-sm text-gray-900';
                    founderElement.textContent = founder;
                    foundersContainer.appendChild(founderElement);
                });
            } else {
                foundersContainer.innerHTML = '<div class="text-sm text-gray-500">No founder information available</div>';
            }
            
            // Update alternate names
            const alternateNamesContainer = document.getElementById('modalAlternateNames');
            alternateNamesContainer.innerHTML = '';
            if (company.alternateNames && company.alternateNames.length > 0) {
                company.alternateNames.forEach(name => {
                    const nameElement = document.createElement('span');
                    nameElement.className = 'px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs';
                    nameElement.textContent = name;
                    alternateNamesContainer.appendChild(nameElement);
                });
            } else {
                alternateNamesContainer.innerHTML = '<span class="text-sm text-gray-500">No alternate names</span>';
            }
        }

        function updateFundingTab(company) {
            // Update funding metrics
            document.getElementById('fundingTotalAmount').textContent = company.totalFunding || '$0';
            
            if (company.fundingRounds && company.fundingRounds.length > 0) {
                const latestRound = company.fundingRounds[0];
                document.getElementById('fundingLatestRound').textContent = latestRound.round;
                document.getElementById('fundingLatestDate').textContent = latestRound.date;
                document.getElementById('fundingLeadInvestors').textContent = latestRound.leadInvestors;
            }
            
            // Update funding table
            const table = document.getElementById('fundingRoundsTable');
            table.innerHTML = '';
            
            if (company.fundingRounds && company.fundingRounds.length > 0) {
                company.fundingRounds.forEach(round => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${round.round}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${round.amount}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${round.date}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${round.leadInvestors}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${round.valuation || 'N/A'}</td>
                    `;
                    table.appendChild(row);
                });
            } else {
                const row = document.createElement('tr');
                row.innerHTML = '<td colspan="5" class="px-6 py-4 text-center text-gray-500">No funding rounds available</td>';
                table.appendChild(row);
            }
            
            // Update funding chart
            updateFundingChart(company);
        }

        function updateFundingChart(company) {
            const ctx = document.getElementById('fundingChart').getContext('2d');
            
            if (fundingChart) {
                fundingChart.destroy();
            }
            
            if (company.fundingRounds && company.fundingRounds.length > 0) {
                const labels = company.fundingRounds.map(round => round.round).reverse();
                const data = company.fundingRounds.map(round => {
                    const amount = parseFloat(round.amount.replace(/[$BM]/g, ''));
                    return round.amount.includes('B') ? amount * 1000 : amount;
                }).reverse();
                
                fundingChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Funding Amount (M)',
                            data: data,
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return '$' + value + 'M';
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }

        function updateLeadershipTab(company) {
            // Current leadership
            const currentContainer = document.getElementById('currentLeadershipGrid');
            currentContainer.innerHTML = '';
            
            if (company.leadership) {
                const currentLeaders = company.leadership.filter(leader => leader.type === 'current');
                currentLeaders.forEach(leader => {
                    const card = createLeaderCard(leader);
                    currentContainer.appendChild(card);
                });
            }
            
            // Board members
            const boardContainer = document.getElementById('boardMembersGrid');
            boardContainer.innerHTML = '';
            
            if (company.boardMembers) {
                company.boardMembers.forEach(member => {
                    const card = createLeaderCard(member);
                    boardContainer.appendChild(card);
                });
            }
            
            // Past leadership
            const pastContainer = document.getElementById('pastLeadershipGrid');
            pastContainer.innerHTML = '';
            
            if (company.leadership) {
                const pastLeaders = company.leadership.filter(leader => leader.type === 'past');
                pastLeaders.forEach(leader => {
                    const card = createLeaderCard(leader);
                    pastContainer.appendChild(card);
                });
            }
        }

        function createLeaderCard(leader) {
            const card = document.createElement('div');
            card.className = 'flex items-center space-x-3 p-4 bg-gray-50 rounded-lg';
            card.innerHTML = `
                <div class="w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center">
                    <span class="text-white font-semibold text-sm">${leader.name.split(' ').map(n => n[0]).join('')}</span>
                </div>
                <div>
                    <h5 class="font-medium text-gray-900">${leader.name}</h5>
                    <p class="text-sm text-gray-600">${leader.position}</p>
                </div>
            `;
            return card;
        }

        function updateAcquisitionsTab(company) {
            const acquiredContainer = document.getElementById('companiesAcquiredGrid');
            const detailsContainer = document.getElementById('acquisitionDetailsGrid');
            
            acquiredContainer.innerHTML = '';
            detailsContainer.innerHTML = '';
            
            if (company.acquisitions && company.acquisitions.length > 0) {
                company.acquisitions.forEach(acquisition => {
                    // Company card
                    const companyCard = document.createElement('div');
                    companyCard.className = 'p-4 bg-gray-50 rounded-lg';
                    companyCard.innerHTML = `
                        <h5 class="font-medium text-gray-900 mb-2">${acquisition.company}</h5>
                        <p class="text-sm text-gray-600 mb-2">${acquisition.description}</p>
                        <p class="text-xs text-gray-500">${acquisition.date}</p>
                    `;
                    acquiredContainer.appendChild(companyCard);
                    
                    // Details card
                    const detailCard = document.createElement('div');
                    detailCard.className = 'p-4 bg-blue-50 rounded-lg';
                    detailCard.innerHTML = `
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm font-medium text-gray-600">Amount:</span>
                            <span class="text-sm font-semibold text-blue-600">${acquisition.amount}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm font-medium text-gray-600">Date:</span>
                            <span class="text-sm text-gray-900">${acquisition.date}</span>
                        </div>
                    `;
                    detailsContainer.appendChild(detailCard);
                });
            } else {
                acquiredContainer.innerHTML = '<p class="text-gray-500">No acquisitions available</p>';
                detailsContainer.innerHTML = '<p class="text-gray-500">No acquisition details available</p>';
            }
        }

        function updateTechnologyTab(company) {
            // Products
            const productsContainer = document.getElementById('productsGrid');
            productsContainer.innerHTML = '';
            
            if (company.products && company.products.length > 0) {
                company.products.forEach(product => {
                    const card = document.createElement('div');
                    card.className = 'p-4 bg-gray-50 rounded-lg';
                    card.innerHTML = `
                        <h5 class="font-medium text-gray-900 mb-2">${product.name}</h5>
                        <p class="text-sm text-gray-600">${product.description}</p>
                    `;
                    productsContainer.appendChild(card);
                });
            } else {
                productsContainer.innerHTML = '<p class="text-gray-500">No products information available</p>';
            }
            
            // Technology stack
            const techContainer = document.getElementById('technologyStackGrid');
            techContainer.innerHTML = '';
            
            if (company.technologyStack && company.technologyStack.length > 0) {
                company.technologyStack.forEach(tech => {
                    const card = document.createElement('div');
                    card.className = 'p-4 bg-blue-50 rounded-lg';
                    card.innerHTML = `
                        <h5 class="font-medium text-gray-900 mb-2">${tech.name}</h5>
                        <p class="text-sm text-gray-600">${tech.description}</p>
                    `;
                    techContainer.appendChild(card);
                });
            } else {
                techContainer.innerHTML = '<p class="text-gray-500">No technology stack information available</p>';
            }
            
            // Customers
            const customersContainer = document.getElementById('customersGrid');
            customersContainer.innerHTML = '';
            
            if (company.customers && company.customers.length > 0) {
                company.customers.forEach(customer => {
                    const card = document.createElement('div');
                    card.className = 'p-3 bg-green-50 rounded-lg text-center';
                    card.innerHTML = `<span class="text-sm font-medium text-green-800">${customer}</span>`;
                    customersContainer.appendChild(card);
                });
            } else {
                customersContainer.innerHTML = '<p class="text-gray-500 col-span-4">No customer information available</p>';
            }
        }

        function updateNewsTab(company) {
            // News articles
            const newsContainer = document.getElementById('newsGrid');
            newsContainer.innerHTML = '';
            
            if (company.news && company.news.length > 0) {
                company.news.forEach(article => {
                    const card = document.createElement('div');
                    card.className = 'p-6 bg-gray-50 rounded-lg';
                    card.innerHTML = `
                        <h5 class="font-medium text-gray-900 mb-2">${article.title}</h5>
                        <p class="text-sm text-gray-600 mb-3">${article.summary}</p>
                        <p class="text-xs text-gray-500">${article.date}</p>
                    `;
                    newsContainer.appendChild(card);
                });
            } else {
                newsContainer.innerHTML = '<p class="text-gray-500">No news articles available</p>';
            }
            
            // Press releases
            const pressContainer = document.getElementById('pressReleasesGrid');
            pressContainer.innerHTML = '';
            
            if (company.pressReleases && company.pressReleases.length > 0) {
                company.pressReleases.forEach(release => {
                    const card = document.createElement('div');
                    card.className = 'p-4 bg-blue-50 rounded-lg';
                    card.innerHTML = `
                        <h5 class="font-medium text-gray-900 mb-2">${release.title}</h5>
                        <p class="text-xs text-gray-500">${release.date}</p>
                    `;
                    pressContainer.appendChild(card);
                });
            } else {
                pressContainer.innerHTML = '<p class="text-gray-500">No press releases available</p>';
            }
        }

        function updateCompetitorsTab(company) {
            // Direct competitors
            const competitorsContainer = document.getElementById('competitorsGrid');
            competitorsContainer.innerHTML = '';
            
            if (company.competitors && company.competitors.length > 0) {
                company.competitors.forEach(competitor => {
                    const card = document.createElement('div');
                    card.className = 'p-4 bg-red-50 rounded-lg text-center';
                    card.innerHTML = `
                        <div class="w-12 h-12 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-2">
                            <span class="text-white font-semibold">${competitor.charAt(0)}</span>
                        </div>
                        <h5 class="font-medium text-gray-900">${competitor}</h5>
                        <p class="text-xs text-gray-500">Direct Competitor</p>
                    `;
                    competitorsContainer.appendChild(card);
                });
            } else {
                competitorsContainer.innerHTML = '<p class="text-gray-500 col-span-3">No competitors information available</p>';
            }
            
            // Similar companies
            const similarContainer = document.getElementById('similarCompaniesGrid');
            similarContainer.innerHTML = '';
            
            if (company.similarCompanies && company.similarCompanies.length > 0) {
                company.similarCompanies.forEach(similar => {
                    const card = document.createElement('div');
                    card.className = 'p-4 bg-orange-50 rounded-lg text-center';
                    card.innerHTML = `
                        <div class="w-12 h-12 bg-orange-500 rounded-full flex items-center justify-center mx-auto mb-2">
                            <span class="text-white font-semibold">${similar.charAt(0)}</span>
                        </div>
                        <h5 class="font-medium text-gray-900">${similar}</h5>
                        <p class="text-xs text-gray-500">Similar Company</p>
                    `;
                    similarContainer.appendChild(card);
                });
            } else {
                similarContainer.innerHTML = '<p class="text-gray-500 col-span-3">No similar companies information available</p>';
            }
        }

        function updateEventsTab(company) {
            const timelineContainer = document.getElementById('timelineGrid');
            timelineContainer.innerHTML = '';
            
            if (company.timeline && company.timeline.length > 0) {
                company.timeline.forEach((event, index) => {
                    const item = document.createElement('div');
                    item.className = 'relative pb-8 timeline-item';
                    
                    const typeColors = {
                        'founding': 'bg-green-500',
                        'product': 'bg-blue-500',
                        'funding': 'bg-purple-500',
                        'acquisition': 'bg-orange-500',
                        'milestone': 'bg-red-500'
                    };
                    
                    item.innerHTML = `
                        <div class="timeline-dot ${typeColors[event.type] || 'bg-gray-500'}"></div>
                        <div class="ml-8">
                            <div class="flex items-center space-x-2 mb-1">
                                <h5 class="font-medium text-gray-900">${event.event}</h5>
                                <span class="px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs capitalize">${event.type}</span>
                            </div>
                            <p class="text-sm text-gray-500">${event.date}</p>
                        </div>
                    `;
                    
                    if (index === company.timeline.length - 1) {
                        item.classList.remove('timeline-item');
                    }
                    
                    timelineContainer.appendChild(item);
                });
            } else {
                timelineContainer.innerHTML = '<p class="text-gray-500">No timeline events available</p>';
            }
        }

        function updateContactTab(company) {
            document.getElementById('modalCompanyAddress').textContent = company.address || 'N/A';
            document.getElementById('modalCompanyPhone').textContent = company.phone || 'N/A';
            document.getElementById('modalCompanyEmail').textContent = company.email || 'N/A';
            document.getElementById('modalInvestorEmail').textContent = company.investorEmail || 'N/A';
            
            // Social media links
            const socialContainer = document.getElementById('modalCompanySocial');
            socialContainer.innerHTML = '';
            
            if (company.social) {
                Object.entries(company.social).forEach(([platform, url]) => {
                    const link = document.createElement('div');
                    link.className = 'flex items-center space-x-2 mb-2';
                    
                    const iconClass = {
                        'linkedin': 'fab fa-linkedin text-blue-600',
                        'twitter': 'fab fa-twitter text-blue-400',
                        'facebook': 'fab fa-facebook text-blue-800',
                        'instagram': 'fab fa-instagram text-pink-600'
                    }[platform] || 'fas fa-link text-gray-600';
                    
                    link.innerHTML = `
                        <i class="${iconClass}"></i>
                        <a href="${url}" target="_blank" class="text-blue-600 hover:text-blue-800 text-sm">${platform.charAt(0).toUpperCase() + platform.slice(1)}</a>
                    `;
                    socialContainer.appendChild(link);
                });
            } else {
                socialContainer.innerHTML = '<p class="text-gray-500">No social media links available</p>';
            }
        }

        function closeCompanyModal() {
            document.getElementById('companyModal').classList.add('hidden');
            if (fundingChart) {
                fundingChart.destroy();
                fundingChart = null;
            }
        }

        // Tab Management
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            // Remove active class from all tab buttons
            document.querySelectorAll('nav button').forEach(btn => {
                btn.classList.remove('tab-active');
                btn.classList.add('border-transparent', 'text-gray-500');
            });
            
            // Show selected tab
            document.getElementById(tabName + 'Tab').classList.remove('hidden');
            
            // Add active class to selected tab button
            event.target.classList.add('tab-active');
            event.target.classList.remove('border-transparent', 'text-gray-500');
        }

        // Modal Management
        function showAddPersonModal() {
            if (!currentUser) {
                alert('Please sign in with Google to add people');
                return;
            }
            document.getElementById('addPersonModal').classList.remove('hidden');
        }

        function closeAddPersonModal() {
            document.getElementById('addPersonModal').classList.add('hidden');
            document.getElementById('addPersonForm').reset();
        }

        function showAddInvestmentModal() {
            if (!currentUser) {
                alert('Please sign in to add investments');
                return;
            }
            document.getElementById('addInvestmentModal').classList.remove('hidden');
        }

        function closeAddInvestmentModal() {
            document.getElementById('addInvestmentModal').classList.add('hidden');
            document.getElementById('addInvestmentForm').reset();
        }

        function showAddCompanyModal() {
            if (!currentUser) {
                alert('Please sign in with Google to add companies');
                return;
            }
            document.getElementById('addCompanyModal').classList.remove('hidden');
        }

        function closeAddCompanyModal() {
            document.getElementById('addCompanyModal').classList.add('hidden');
            document.getElementById('addCompanyForm').reset();
        }

        // Section Management
        function showSection(sectionName) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            document.getElementById(sectionName).classList.remove('hidden');
        }

        // People filtering functions
        function applyPeopleFilters() {
            const role = document.getElementById('roleFilter').value;
            const company = document.getElementById('companyFilter').value;
            const experience = document.getElementById('experienceFilter').value;
            
            let filteredPeople = people;
            
            if (role) {
                filteredPeople = filteredPeople.filter(p => p.role.toLowerCase().includes(role.toLowerCase()));
            }
            
            if (company) {
                filteredPeople = filteredPeople.filter(p => p.company === company);
            }
            
            if (experience) {
                filteredPeople = filteredPeople.filter(p => p.experience === experience);
            }
            
            const container = document.getElementById('peopleGrid');
            container.innerHTML = '';
            
            if (filteredPeople.length > 0) {
                filteredPeople.forEach(person => {
                    const card = createPersonCard(person);
                    container.appendChild(card);
                });
            } else {
                container.innerHTML = '<div class="col-span-full text-center py-12"><i class="fas fa-users text-4xl text-gray-300 mb-4"></i><p class="text-gray-500">No people found matching your filters.</p></div>';
            }
        }

        // Event Listeners
        function setupEventListeners() {
            // Add Person Form
            document.getElementById('addPersonForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (!currentUser) {
                    alert('Please sign in to add people');
                    return;
                }
                
                const personData = {
                    name: document.getElementById('personName').value,
                    email: document.getElementById('personEmail').value,
                    role: document.getElementById('personRole').value,
                    companyId: document.getElementById('personCompany').value,
                    company: companies.find(c => c.id === document.getElementById('personCompany').value)?.name || '',
                    location: document.getElementById('personLocation').value,
                    type: document.getElementById('personType').value,
                    experience: document.getElementById('personExperience').value,
                    bio: document.getElementById('personBio').value,
                    skills: document.getElementById('personSkills').value.split(',').map(s => s.trim()).filter(s => s),
                    responsibilities: document.getElementById('personResponsibilities').value.split('\n').filter(r => r.trim()),
                    social: {
                        linkedin: document.getElementById('personLinkedIn').value,
                        twitter: document.getElementById('personTwitter').value
                    },
                    createdBy: currentUser.uid,
                    createdAt: new Date().toISOString(),
                    yearsExperience: parseInt(document.getElementById('personExperience').value?.split('-')[0]) || 0,
                    companiesWorked: 1,
                    notableProjects: 0
                };
                
                // Add to Firestore
                db.collection('people').add(personData).then(() => {
                    alert('Person added successfully!');
                    closeAddPersonModal();
                }).catch(error => {
                    console.error('Error adding person:', error);
                    alert('Error adding person: ' + error.message);
                });
            });

            // Add Investment Form
            document.getElementById('addInvestmentForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (!currentUser || !currentCompany) {
                    alert('Please sign in and select a company');
                    return;
                }
                
                const targetCompanyId = document.getElementById('investmentTargetCompany').value;
                const targetCompany = companies.find(c => c.id === targetCompanyId);
                
                if (!targetCompany) {
                    alert('Please select a valid target company');
                    return;
                }
                
                const investmentData = {
                    round: document.getElementById('investmentRound').value,
                    amount: document.getElementById('investmentAmount').value,
                    date: document.getElementById('investmentDate').value,
                    leadInvestors: currentCompany.name,
                    valuation: document.getElementById('investmentValuation').value || 'N/A',
                    type: document.getElementById('investmentType').value,
                    notes: document.getElementById('investmentNotes').value
                };
                
                // Add to target company's funding rounds
                const updatedFundingRounds = [...(targetCompany.fundingRounds || []), investmentData];
                
                // Update target company
                db.collection('companies').doc(targetCompanyId).update({
                    fundingRounds: updatedFundingRounds
                }).then(() => {
                    // Add to current company's investments made
                    const investmentMade = {
                        targetCompany: targetCompany.name,
                        targetCompanyId: targetCompanyId,
                        ...investmentData,
                        createdAt: new Date().toISOString()
                    };
                    
                    const updatedInvestments = [...(currentCompany.investmentsMade || []), investmentMade];
                    
                    return db.collection('companies').doc(currentCompany.id).update({
                        investmentsMade: updatedInvestments
                    });
                }).then(() => {
                    alert('Investment added successfully!');
                    closeAddInvestmentModal();
                    // Refresh the current company view
                    showCompanyDetail(currentCompany);
                }).catch(error => {
                    console.error('Error adding investment:', error);
                    alert('Error adding investment: ' + error.message);
                });
            });

            // Add Company Form
            document.getElementById('addCompanyForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (!currentUser) {
                    alert('Please sign in to add companies');
                    return;
                }
                
                const companyData = {
                    name: document.getElementById('companyName').value,
                    legalName: document.getElementById('companyLegalName').value || document.getElementById('companyName').value,
                    tagline: document.getElementById('companyTagline').value,
                    description: document.getElementById('companyDescription').value,
                    industry: document.getElementById('companyIndustry').value,
                    founded: parseInt(document.getElementById('companyFounded').value) || null,
                    employees: document.getElementById('companyEmployees').value,
                    location: document.getElementById('companyLocation').value,
                    website: document.getElementById('companyWebsite').value,
                    email: document.getElementById('companyEmail').value,
                    type: document.getElementById('companyType').value,
                    status: document.getElementById('companyStatus').value,
                    operatingStatus: 'Active',
                    social: {
                        linkedin: document.getElementById('companyLinkedIn').value,
                        twitter: document.getElementById('companyTwitter').value
                    },
                    createdBy: currentUser.uid,
                    createdAt: new Date().toISOString(),
                    fundingRounds: [],
                    leadership: [],
                    news: [],
                    timeline: [
                        {
                            date: new Date().toISOString().split('T')[0],
                            event: 'Company added to BizIntel Pro',
                            type: 'milestone'
                        }
                    ]
                };
                
                // Add to Firestore
                db.collection('companies').add(companyData).then(() => {
                    alert('Company added successfully!');
                    closeAddCompanyModal();
                }).catch(error => {
                    console.error('Error adding company:', error);
                    alert('Error adding company: ' + error.message);
                });
            });

            // Investment button
            document.getElementById('addInvestmentBtn').addEventListener('click', showAddInvestmentModal);

            // Global Search
            document.getElementById('globalSearch').addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                if (searchTerm.length > 2) {
                    performSearch(searchTerm);
                } else if (searchTerm.length === 0) {
                    updateCompaniesGrid();
                }
            });
        }

        function performSearch(searchTerm) {
            const filteredCompanies = companies.filter(company => 
                company.name.toLowerCase().includes(searchTerm) ||
                (company.description && company.description.toLowerCase().includes(searchTerm)) ||
                (company.industry && company.industry.toLowerCase().includes(searchTerm)) ||
                (company.tagline && company.tagline.toLowerCase().includes(searchTerm)) ||
                (company.location && company.location.toLowerCase().includes(searchTerm))
            );
            
            const container = document.getElementById('companiesGrid');
            container.innerHTML = '';
            
            if (filteredCompanies.length > 0) {
                filteredCompanies.forEach(company => {
                    const card = createCompanyCard(company);
                    container.appendChild(card);
                });
            } else {
                container.innerHTML = '<div class="col-span-full text-center py-12"><i class="fas fa-search text-4xl text-gray-300 mb-4"></i><p class="text-gray-500">No companies found matching your search.</p></div>';
            }
        }

        function applyFilters() {
            const industry = document.getElementById('industryFilter').value;
            const location = document.getElementById('locationFilter').value;
            const employeeRange = document.getElementById('employeeFilter').value;
            const status = document.getElementById('statusFilter').value;
            
            let filteredCompanies = companies;
            
            if (industry) {
                filteredCompanies = filteredCompanies.filter(c => c.industry === industry);
            }
            
            if (location) {
                filteredCompanies = filteredCompanies.filter(c => c.location && c.location.includes(location));
            }
            
            if (employeeRange) {
                filteredCompanies = filteredCompanies.filter(c => c.employees === employeeRange);
            }
            
            if (status) {
                filteredCompanies = filteredCompanies.filter(c => c.status === status);
            }
            
            const container = document.getElementById('companiesGrid');
            container.innerHTML = '';
            
            if (filteredCompanies.length > 0) {
                filteredCompanies.forEach(company => {
                    const card = createCompanyCard(company);
                    container.appendChild(card);
                });
            } else {
                container.innerHTML = '<div class="col-span-full text-center py-12"><i class="fas fa-filter text-4xl text-gray-300 mb-4"></i><p class="text-gray-500">No companies found matching your filters.</p></div>';
            }
        }

        // Close modals when clicking outside
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('fixed')) {
                if (e.target.id === 'companyModal') closeCompanyModal();
                if (e.target.id === 'addCompanyModal') closeAddCompanyModal();
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeCompanyModal();
                closeAddCompanyModal();
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96fe8a8bd246547e',t:'MTc1NTMyMjI0Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
