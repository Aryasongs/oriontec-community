<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BizIntel Pro - Business Intelligence Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .gradient-bg { background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 50%, #581c87 100%); }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.15); }
        .tab-active { border-bottom: 3px solid #3b82f6; color: #3b82f6; background-color: #eff6ff; }
        .status-active { background-color: #10b981; }
        .status-ipo { background-color: #8b5cf6; }
        .status-acquired { background-color: #f59e0b; }
        .status-closed { background-color: #ef4444; }
        .timeline-item::before { content: ''; position: absolute; left: 15px; top: 0; height: 100%; width: 2px; background: #e5e7eb; }
        .timeline-dot { position: absolute; left: 11px; top: 8px; width: 10px; height: 10px; border-radius: 50%; background: #3b82f6; }
        .funding-chart { min-height: 300px; }
        .rank-badge { background: linear-gradient(45deg, #fbbf24, #f59e0b); }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .premium-blur { filter: blur(3px); transition: filter 0.3s ease; }
        .premium-overlay { position: relative; }
        .premium-overlay::after { content: 'ðŸ”’ Premium'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.8); color: white; padding: 8px 16px; border-radius: 20px; font-size: 12px; font-weight: 600; }
        @media (max-width: 640px) {
            .funding-chart { min-height: 200px; }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-2xl font-bold gradient-bg bg-clip-text text-transparent">BizIntel Pro</h1>
                        <p class="text-xs text-gray-500">Business Intelligence Platform</p>
                    </div>
                    <div class="hidden lg:block ml-10">
                        <div class="flex items-baseline space-x-4">
                            <a href="#" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium" onclick="showSection('dashboard')">Dashboard</a>
                            <a href="#" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium" onclick="showSection('companies')">Companies</a>
                            <a href="#" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium" onclick="showSection('people')">People</a>
                            <a href="#" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium relative" onclick="showSection('investors')">
                                Investors
                                <span class="absolute -top-1 -right-1 bg-yellow-400 text-yellow-900 text-xs px-1 rounded-full">PRO</span>
                            </a>
                            <a href="#" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium relative" onclick="showSection('analytics')">
                                Analytics
                                <span class="absolute -top-1 -right-1 bg-yellow-400 text-yellow-900 text-xs px-1 rounded-full">PRO</span>
                            </a>
                        </div>
                    </div>
                    <!-- Mobile Menu Button -->
                    <button id="mobileMenuBtn" class="lg:hidden p-2 rounded-md text-gray-700 hover:text-blue-600 hover:bg-gray-100">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
                <div class="flex items-center space-x-2 md:space-x-4">
                    <div class="relative hidden md:block">
                        <input type="text" id="globalSearch" placeholder="Search companies, people, investors..." class="w-60 lg:w-80 pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                    <!-- Mobile Search Button -->
                    <button id="mobileSearchBtn" class="md:hidden p-2 rounded-md text-gray-700 hover:text-blue-600 hover:bg-gray-100">
                        <i class="fas fa-search text-lg"></i>
                    </button>
                    <button id="authButton" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center">
                        <i class="fab fa-google mr-2"></i>Sign In with Google
                    </button>
                    <div id="userProfile" class="hidden flex items-center space-x-3">
                        <img id="userPhoto" class="w-8 h-8 rounded-full" alt="User">
                        <div class="flex flex-col">
                            <div class="flex items-center space-x-2">
                                <span id="userName" class="text-sm font-medium"></span>
                                <span id="premiumBadge" class="hidden bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs px-2 py-0.5 rounded-full font-semibold">
                                    <i class="fas fa-crown mr-1"></i>PRO
                                </span>
                            </div>
                            <button id="signOutButton" class="text-xs text-gray-600 hover:text-gray-800 text-left">Sign Out</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Mobile Navigation Menu -->
        <div id="mobileMenu" class="lg:hidden hidden bg-white border-t border-gray-200">
            <div class="px-4 py-3 space-y-1">
                <a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50" onclick="showSection('dashboard'); toggleMobileMenu()">
                    <i class="fas fa-chart-pie mr-3"></i>Dashboard
                </a>
                <a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50" onclick="showSection('companies'); toggleMobileMenu()">
                    <i class="fas fa-building mr-3"></i>Companies
                </a>
                <a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50" onclick="showSection('people'); toggleMobileMenu()">
                    <i class="fas fa-users mr-3"></i>People
                </a>
                <a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 relative" onclick="showSection('investors'); toggleMobileMenu()">
                    <i class="fas fa-handshake mr-3"></i>Investors
                    <span class="absolute top-1 right-3 bg-yellow-400 text-yellow-900 text-xs px-1 rounded-full">PRO</span>
                </a>
                <a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 relative" onclick="showSection('analytics'); toggleMobileMenu()">
                    <i class="fas fa-chart-line mr-3"></i>Analytics
                    <span class="absolute top-1 right-3 bg-yellow-400 text-yellow-900 text-xs px-1 rounded-full">PRO</span>
                </a>
            </div>
        </div>
        
        <!-- Mobile Search Overlay -->
        <div id="mobileSearchOverlay" class="md:hidden hidden fixed inset-0 bg-white z-50">
            <div class="flex items-center justify-between p-4 border-b">
                <h3 class="text-lg font-semibold">Search</h3>
                <button id="closeMobileSearch" class="p-2 text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div class="p-4">
                <div class="relative">
                    <input type="text" id="mobileGlobalSearch" placeholder="Search companies, people, investors..." class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg">
                    <i class="fas fa-search absolute left-3 top-4 text-gray-400"></i>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 sm:py-8">
        <!-- Dashboard Section -->
        <div id="dashboard" class="section">
            <div class="mb-6 sm:mb-8">
                <h2 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-2">Business Intelligence Dashboard</h2>
                <p class="text-sm sm:text-base text-gray-600">Comprehensive business data, funding insights, and market intelligence</p>
            </div>

            <!-- Stats Cards -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8">
                <div class="bg-white rounded-xl shadow-md p-4 sm:p-6 card-hover">
                    <div class="flex items-center">
                        <div class="p-2 sm:p-3 rounded-full bg-blue-100">
                            <i class="fas fa-building text-blue-600 text-lg sm:text-xl"></i>
                        </div>
                        <div class="ml-3 sm:ml-4">
                            <p class="text-xs sm:text-sm font-medium text-gray-600">Total Companies</p>
                            <p class="text-xl sm:text-2xl font-semibold text-gray-900" id="companyCount">0</p>
                            <p class="text-xs text-green-600">+12% this month</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-md p-4 sm:p-6 card-hover">
                    <div class="flex items-center">
                        <div class="p-2 sm:p-3 rounded-full bg-green-100">
                            <i class="fas fa-chart-line text-green-600 text-lg sm:text-xl"></i>
                        </div>
                        <div class="ml-3 sm:ml-4">
                            <p class="text-xs sm:text-sm font-medium text-gray-600">Total Funding</p>
                            <p class="text-xl sm:text-2xl font-semibold text-gray-900" id="totalFunding">$0</p>
                            <p class="text-xs text-green-600">+8% this quarter</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-md p-4 sm:p-6 card-hover">
                    <div class="flex items-center">
                        <div class="p-2 sm:p-3 rounded-full bg-purple-100">
                            <i class="fas fa-users text-purple-600 text-lg sm:text-xl"></i>
                        </div>
                        <div class="ml-3 sm:ml-4">
                            <p class="text-xs sm:text-sm font-medium text-gray-600">Active Professionals</p>
                            <p class="text-xl sm:text-2xl font-semibold text-gray-900" id="peopleCount">0</p>
                            <p class="text-xs text-green-600">+15% this month</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-md p-4 sm:p-6 card-hover">
                    <div class="flex items-center">
                        <div class="p-2 sm:p-3 rounded-full bg-orange-100">
                            <i class="fas fa-handshake text-orange-600 text-lg sm:text-xl"></i>
                        </div>
                        <div class="ml-3 sm:ml-4">
                            <p class="text-xs sm:text-sm font-medium text-gray-600">Investment Firms</p>
                            <p class="text-xl sm:text-2xl font-semibold text-gray-900" id="investorCount">0</p>
                            <p class="text-xs text-green-600">+5% this month</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Featured Companies -->
            <div class="bg-white rounded-xl shadow-md p-4 sm:p-6 mb-6 sm:mb-8">
                <div class="flex justify-between items-center mb-4 sm:mb-6">
                    <h3 class="text-lg sm:text-xl font-semibold text-gray-900">Featured Companies</h3>
                    <button onclick="showSection('companies')" class="text-blue-600 hover:text-blue-800 text-xs sm:text-sm font-medium">View All â†’</button>
                </div>
                <div id="featuredCompanies" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
                    <!-- Companies will be loaded here -->
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6">
                <div class="bg-white rounded-xl shadow-md p-4 sm:p-6">
                    <h3 class="text-lg sm:text-xl font-semibold text-gray-900 mb-3 sm:mb-4">Recent Funding Rounds</h3>
                    <div id="recentFunding" class="space-y-3 sm:space-y-4">
                        <!-- Recent funding will be loaded here -->
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-md p-4 sm:p-6">
                    <h3 class="text-lg sm:text-xl font-semibold text-gray-900 mb-3 sm:mb-4">Latest News & Updates</h3>
                    <div id="recentNews" class="space-y-3 sm:space-y-4">
                        <!-- Recent news will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Investors Section -->
        <div id="investors" class="section hidden">
            <div class="mb-6 sm:mb-8">
                <div class="flex items-center justify-between mb-4">
                    <div>
                        <h2 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-2">Investor Database</h2>
                        <p class="text-sm sm:text-base text-gray-600">Comprehensive database of investment firms, VCs, and angel investors</p>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs px-3 py-1 rounded-full font-semibold">
                            <i class="fas fa-crown mr-1"></i>PREMIUM
                        </span>
                    </div>
                </div>
            </div>

            <!-- Premium Stats Cards -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8">
                <div class="bg-white rounded-xl shadow-md p-4 sm:p-6 card-hover premium-blur cursor-pointer" onclick="showPremiumUpgrade('investor statistics')">
                    <div class="flex items-center">
                        <div class="p-2 sm:p-3 rounded-full bg-purple-100">
                            <i class="fas fa-handshake text-purple-600 text-lg sm:text-xl"></i>
                        </div>
                        <div class="ml-3 sm:ml-4">
                            <p class="text-xs sm:text-sm font-medium text-gray-600">Total Investors</p>
                            <p class="text-xl sm:text-2xl font-semibold text-gray-900">2,847</p>
                            <p class="text-xs text-green-600">+23% this quarter</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-md p-4 sm:p-6 card-hover premium-blur cursor-pointer" onclick="showPremiumUpgrade('investment statistics')">
                    <div class="flex items-center">
                        <div class="p-2 sm:p-3 rounded-full bg-green-100">
                            <i class="fas fa-dollar-sign text-green-600 text-lg sm:text-xl"></i>
                        </div>
                        <div class="ml-3 sm:ml-4">
                            <p class="text-xs sm:text-sm font-medium text-gray-600">Total AUM</p>
                            <p class="text-xl sm:text-2xl font-semibold text-gray-900">$847B</p>
                            <p class="text-xs text-green-600">+12% YoY</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-md p-4 sm:p-6 card-hover premium-blur cursor-pointer" onclick="showPremiumUpgrade('deal statistics')">
                    <div class="flex items-center">
                        <div class="p-2 sm:p-3 rounded-full bg-blue-100">
                            <i class="fas fa-chart-line text-blue-600 text-lg sm:text-xl"></i>
                        </div>
                        <div class="ml-3 sm:ml-4">
                            <p class="text-xs sm:text-sm font-medium text-gray-600">Active Deals</p>
                            <p class="text-xl sm:text-2xl font-semibold text-gray-900">1,234</p>
                            <p class="text-xs text-green-600">+18% this month</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-md p-4 sm:p-6 card-hover premium-blur cursor-pointer" onclick="showPremiumUpgrade('portfolio statistics')">
                    <div class="flex items-center">
                        <div class="p-2 sm:p-3 rounded-full bg-orange-100">
                            <i class="fas fa-briefcase text-orange-600 text-lg sm:text-xl"></i>
                        </div>
                        <div class="ml-3 sm:ml-4">
                            <p class="text-xs sm:text-sm font-medium text-gray-600">Portfolio Companies</p>
                            <p class="text-xl sm:text-2xl font-semibold text-gray-900">15,678</p>
                            <p class="text-xs text-green-600">+9% this quarter</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Premium Investor Filters -->
            <div class="bg-white rounded-xl shadow-md p-4 sm:p-6 mb-4 sm:mb-6 premium-overlay cursor-pointer" onclick="showPremiumUpgrade('advanced investor filters')">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Advanced Investor Filters</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 premium-blur">
                    <select class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                        <option value="">Investment Stage</option>
                        <option value="Pre-Seed">Pre-Seed</option>
                        <option value="Seed">Seed</option>
                        <option value="Series A">Series A</option>
                        <option value="Series B+">Series B+</option>
                        <option value="Growth">Growth</option>
                    </select>
                    <select class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                        <option value="">Investment Size</option>
                        <option value="$10K-$100K">$10K-$100K</option>
                        <option value="$100K-$1M">$100K-$1M</option>
                        <option value="$1M-$10M">$1M-$10M</option>
                        <option value="$10M+">$10M+</option>
                    </select>
                    <select class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                        <option value="">Geographic Focus</option>
                        <option value="North America">North America</option>
                        <option value="Europe">Europe</option>
                        <option value="Asia">Asia</option>
                        <option value="Global">Global</option>
                    </select>
                    <select class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                        <option value="">Sector Focus</option>
                        <option value="Technology">Technology</option>
                        <option value="Healthcare">Healthcare</option>
                        <option value="Fintech">Fintech</option>
                        <option value="Consumer">Consumer</option>
                    </select>
                </div>
            </div>

            <!-- Premium Investor Grid -->
            <div class="bg-white rounded-xl shadow-md p-6 premium-overlay cursor-pointer" onclick="showPremiumUpgrade('investor database access')">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-semibold text-gray-900">Top Investment Firms</h3>
                    <button class="text-blue-600 hover:text-blue-800 text-sm font-medium">View All â†’</button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 premium-blur">
                    <div class="p-4 border border-gray-200 rounded-lg">
                        <div class="flex items-center space-x-3 mb-3">
                            <div class="w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center">
                                <span class="text-white font-bold">A16Z</span>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-900">Andreessen Horowitz</h4>
                                <p class="text-sm text-gray-600">Venture Capital</p>
                            </div>
                        </div>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-600">AUM:</span>
                                <span class="font-medium">$35B</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Portfolio:</span>
                                <span class="font-medium">400+ companies</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Stage:</span>
                                <span class="font-medium">Seed to Growth</span>
                            </div>
                        </div>
                    </div>
                    <div class="p-4 border border-gray-200 rounded-lg">
                        <div class="flex items-center space-x-3 mb-3">
                            <div class="w-12 h-12 bg-red-600 rounded-lg flex items-center justify-center">
                                <span class="text-white font-bold">SV</span>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-900">Sequoia Capital</h4>
                                <p class="text-sm text-gray-600">Venture Capital</p>
                            </div>
                        </div>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-600">AUM:</span>
                                <span class="font-medium">$85B</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Portfolio:</span>
                                <span class="font-medium">500+ companies</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Stage:</span>
                                <span class="font-medium">Seed to IPO</span>
                            </div>
                        </div>
                    </div>
                    <div class="p-4 border border-gray-200 rounded-lg">
                        <div class="flex items-center space-x-3 mb-3">
                            <div class="w-12 h-12 bg-green-600 rounded-lg flex items-center justify-center">
                                <span class="text-white font-bold">KP</span>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-900">Kleiner Perkins</h4>
                                <p class="text-sm text-gray-600">Venture Capital</p>
                            </div>
                        </div>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-600">AUM:</span>
                                <span class="font-medium">$2B</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Portfolio:</span>
                                <span class="font-medium">900+ companies</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Stage:</span>
                                <span class="font-medium">Early to Growth</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analytics Section -->
        <div id="analytics" class="section hidden">
            <div class="mb-6 sm:mb-8">
                <div class="flex items-center justify-between mb-4">
                    <div>
                        <h2 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-2">Advanced Analytics</h2>
                        <p class="text-sm sm:text-base text-gray-600">Deep insights and market intelligence for data-driven decisions</p>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs px-3 py-1 rounded-full font-semibold">
                            <i class="fas fa-crown mr-1"></i>PREMIUM
                        </span>
                    </div>
                </div>
            </div>

            <!-- Premium Analytics Dashboard -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <!-- Market Trends Chart -->
                <div class="bg-white rounded-xl shadow-md p-6 premium-overlay cursor-pointer" onclick="showPremiumUpgrade('market trend analysis')">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Market Trends Analysis</h3>
                    <div class="premium-blur">
                        <div class="h-64 bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg flex items-center justify-center">
                            <div class="text-center">
                                <i class="fas fa-chart-line text-4xl text-blue-400 mb-2"></i>
                                <p class="text-gray-600">Interactive trend charts</p>
                                <p class="text-sm text-gray-500">Funding trends by sector</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Valuation Insights -->
                <div class="bg-white rounded-xl shadow-md p-6 premium-overlay cursor-pointer" onclick="showPremiumUpgrade('valuation insights')">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Valuation Insights</h3>
                    <div class="premium-blur">
                        <div class="h-64 bg-gradient-to-br from-green-50 to-teal-50 rounded-lg flex items-center justify-center">
                            <div class="text-center">
                                <i class="fas fa-dollar-sign text-4xl text-green-400 mb-2"></i>
                                <p class="text-gray-600">Valuation benchmarks</p>
                                <p class="text-sm text-gray-500">Industry comparisons</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Premium Analytics Features -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-md p-6 premium-overlay cursor-pointer" onclick="showPremiumUpgrade('funding flow analysis')">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mr-3">
                            <i class="fas fa-stream text-purple-600"></i>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900">Funding Flow Analysis</h3>
                    </div>
                    <div class="premium-blur">
                        <p class="text-gray-600 mb-4">Track capital flows between investors and startups</p>
                        <div class="space-y-2">
                            <div class="flex justify-between text-sm">
                                <span>Q4 2023 Total:</span>
                                <span class="font-medium">$45.2B</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span>Top Sector:</span>
                                <span class="font-medium">AI/ML</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span>Avg Deal Size:</span>
                                <span class="font-medium">$12.3M</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-md p-6 premium-overlay cursor-pointer" onclick="showPremiumUpgrade('competitive intelligence')">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mr-3">
                            <i class="fas fa-crosshairs text-red-600"></i>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900">Competitive Intelligence</h3>
                    </div>
                    <div class="premium-blur">
                        <p class="text-gray-600 mb-4">Monitor competitor activities and market positioning</p>
                        <div class="space-y-2">
                            <div class="flex justify-between text-sm">
                                <span>Companies Tracked:</span>
                                <span class="font-medium">2,847</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span>Weekly Updates:</span>
                                <span class="font-medium">156</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span>Alert Triggers:</span>
                                <span class="font-medium">23</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-md p-6 premium-overlay cursor-pointer" onclick="showPremiumUpgrade('predictive analytics')">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
                            <i class="fas fa-crystal-ball text-blue-600"></i>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900">Predictive Analytics</h3>
                    </div>
                    <div class="premium-blur">
                        <p class="text-gray-600 mb-4">AI-powered predictions for market trends</p>
                        <div class="space-y-2">
                            <div class="flex justify-between text-sm">
                                <span>Accuracy Rate:</span>
                                <span class="font-medium">87.3%</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span>Predictions Made:</span>
                                <span class="font-medium">1,234</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span>Success Rate:</span>
                                <span class="font-medium">92.1%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Premium Reports Section -->
            <div class="bg-white rounded-xl shadow-md p-6 premium-overlay cursor-pointer" onclick="showPremiumUpgrade('custom reports')">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-semibold text-gray-900">Custom Reports & Exports</h3>
                    <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm">
                        <i class="fas fa-download mr-2"></i>Generate Report
                    </button>
                </div>
                <div class="premium-blur">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                        <div class="p-4 border border-gray-200 rounded-lg text-center">
                            <i class="fas fa-file-pdf text-red-500 text-2xl mb-2"></i>
                            <h4 class="font-medium text-gray-900">PDF Reports</h4>
                            <p class="text-sm text-gray-600">Executive summaries</p>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg text-center">
                            <i class="fas fa-file-excel text-green-500 text-2xl mb-2"></i>
                            <h4 class="font-medium text-gray-900">Excel Exports</h4>
                            <p class="text-sm text-gray-600">Raw data analysis</p>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg text-center">
                            <i class="fas fa-chart-bar text-blue-500 text-2xl mb-2"></i>
                            <h4 class="font-medium text-gray-900">Interactive Dashboards</h4>
                            <p class="text-sm text-gray-600">Real-time insights</p>
                        </div>
                    </div>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h4 class="font-medium text-gray-900 mb-2">Available Report Types:</h4>
                        <div class="grid grid-cols-2 gap-2 text-sm text-gray-600">
                            <div>â€¢ Market Analysis Reports</div>
                            <div>â€¢ Investor Activity Reports</div>
                            <div>â€¢ Company Performance Reports</div>
                            <div>â€¢ Sector Trend Reports</div>
                            <div>â€¢ Funding Round Analysis</div>
                            <div>â€¢ Competitive Landscape</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- People Section -->
        <div id="people" class="section hidden">
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 sm:mb-6 gap-3">
                <h2 class="text-2xl sm:text-3xl font-bold text-gray-900">People Directory</h2>
                <button onclick="showAddPersonModal()" class="bg-blue-600 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm sm:text-base w-full sm:w-auto">
                    <i class="fas fa-plus mr-2"></i>Add Person
                </button>
            </div>

            <!-- People Filters -->
            <div class="bg-white rounded-xl shadow-md p-4 sm:p-6 mb-4 sm:mb-6">
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4">
                    <select id="roleFilter" class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                        <option value="">All Roles</option>
                        <option value="CEO">CEO</option>
                        <option value="CTO">CTO</option>
                        <option value="CFO">CFO</option>
                        <option value="Founder">Founder</option>
                        <option value="Engineer">Engineer</option>
                        <option value="Designer">Designer</option>
                        <option value="Marketing">Marketing</option>
                        <option value="Sales">Sales</option>
                    </select>
                    <select id="companyFilter" class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                        <option value="">All Companies</option>
                    </select>
                    <select id="experienceFilter" class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                        <option value="">All Experience</option>
                        <option value="0-2">0-2 years</option>
                        <option value="3-5">3-5 years</option>
                        <option value="6-10">6-10 years</option>
                        <option value="10+">10+ years</option>
                    </select>
                    <button onclick="applyPeopleFilters()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                        <i class="fas fa-filter mr-2"></i>Apply Filters
                    </button>
                </div>
            </div>

            <!-- People Grid -->
            <div id="peopleGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
                <!-- People will be loaded here -->
            </div>
        </div>

        <!-- Companies Section -->
        <div id="companies" class="section hidden">
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 sm:mb-6 gap-3">
                <h2 class="text-2xl sm:text-3xl font-bold text-gray-900">Companies Directory</h2>
                <button onclick="showAddCompanyModal()" class="bg-blue-600 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm sm:text-base w-full sm:w-auto">
                    <i class="fas fa-plus mr-2"></i>Add Company
                </button>
            </div>

            <!-- Advanced Filters -->
            <div class="bg-white rounded-xl shadow-md p-4 sm:p-6 mb-4 sm:mb-6">
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 sm:gap-4">
                    <select id="industryFilter" class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                        <option value="">All Industries</option>
                        <option value="Technology">Technology</option>
                        <option value="Healthcare">Healthcare</option>
                        <option value="Finance">Finance</option>
                        <option value="E-commerce">E-commerce</option>
                        <option value="SaaS">SaaS</option>
                        <option value="Fintech">Fintech</option>
                        <option value="Automotive">Automotive</option>
                        <option value="Education">Education</option>
                    </select>
                    <select id="locationFilter" class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                        <option value="">All Locations</option>
                        <option value="San Francisco">San Francisco</option>
                        <option value="New York">New York</option>
                        <option value="Austin">Austin</option>
                        <option value="London">London</option>
                        <option value="Berlin">Berlin</option>
                        <option value="Singapore">Singapore</option>
                    </select>
                    <select id="employeeFilter" class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                        <option value="">All Sizes</option>
                        <option value="1-10">1-10 employees</option>
                        <option value="11-50">11-50 employees</option>
                        <option value="51-200">51-200 employees</option>
                        <option value="201-1000">201-1000 employees</option>
                        <option value="1000+">1000+ employees</option>
                    </select>
                    <select id="statusFilter" class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                        <option value="">All Status</option>
                        <option value="Active">Active</option>
                        <option value="IPO">IPO'd</option>
                        <option value="Acquired">Acquired</option>
                        <option value="Closed">Closed</option>
                    </select>
                    <button onclick="applyFilters()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                        <i class="fas fa-filter mr-2"></i>Apply Filters
                    </button>
                </div>
            </div>

            <!-- Companies Grid -->
            <div id="companiesGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
                <!-- Companies will be loaded here -->
            </div>
        </div>

        <!-- Company Detail Modal -->
        <div id="companyModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 overflow-y-auto">
            <div class="flex items-start justify-center min-h-screen p-2 sm:p-4 pt-8 sm:pt-16">
                <div class="bg-white rounded-xl max-w-7xl w-full max-h-screen overflow-y-auto mx-2 sm:mx-0">
                    <!-- Company Header -->
                    <div class="bg-white border-b p-6">
                        <div class="flex justify-between items-start mb-4">
                            <div class="flex items-start space-x-4">
                                <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center overflow-hidden">
                                    <img id="modalCompanyLogoImg" class="w-full h-full object-contain hidden" alt="Company Logo">
                                    <span class="text-white font-bold text-xl" id="modalCompanyLogo">C</span>
                                </div>
                                <div class="flex-1">
                                    <div class="flex items-center space-x-3 mb-2">
                                        <h2 class="text-3xl font-bold text-gray-900" id="modalCompanyName">Company Name</h2>
                                        <span class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium" id="modalCompanyRank">#1 Rank</span>
                                        <button id="editCompanyBtn" class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium hover:bg-blue-200 hidden">
                                            <i class="fas fa-edit mr-1"></i>Edit
                                        </button>
                                    </div>
                                    <p class="text-lg text-gray-600 mb-3" id="modalCompanyTagline">Company tagline</p>
                                    <div class="flex flex-wrap gap-2 mb-3">
                                        <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm" id="modalCompanyIndustry">Industry</span>
                                        <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm" id="modalCompanyLocation">Location</span>
                                        <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm" id="modalCompanyFounded">Founded</span>
                                        <span class="px-3 py-1 rounded-full text-sm font-medium text-white" id="modalCompanyStatus">Status</span>
                                    </div>
                                    <div class="flex space-x-4">
                                        <a href="#" id="modalCompanyWebsite" class="text-blue-600 hover:text-blue-800" target="_blank">
                                            <i class="fas fa-globe mr-1"></i>Website
                                        </a>
                                        <a href="#" id="modalCompanyLinkedIn" class="text-blue-600 hover:text-blue-800" target="_blank">
                                            <i class="fab fa-linkedin mr-1"></i>LinkedIn
                                        </a>
                                        <a href="#" id="modalCompanyTwitter" class="text-blue-600 hover:text-blue-800" target="_blank">
                                            <i class="fab fa-twitter mr-1"></i>Twitter
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <button onclick="closeCompanyModal()" class="text-gray-400 hover:text-gray-600">
                                <i class="fas fa-times text-2xl"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Tabs Navigation -->
                    <div class="px-8 border-b bg-white sticky top-0 z-10">
                        <nav class="flex space-x-8 overflow-x-auto">
                            <button class="py-4 px-2 border-b-2 font-medium text-sm whitespace-nowrap tab-active" onclick="showTab('overview')">Overview</button>
                            <button class="py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm whitespace-nowrap" onclick="showTab('funding')">Funding & Financials</button>
                            <button class="py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm whitespace-nowrap" onclick="showTab('leadership')">Leadership & Team</button>
                            <button class="py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm whitespace-nowrap" onclick="showTab('acquisitions')">Acquisitions</button>
                            <button class="py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm whitespace-nowrap" onclick="showTab('technology')">Technology & Products</button>
                            <button class="py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm whitespace-nowrap" onclick="showTab('news')">News & Press</button>
                            <button class="py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm whitespace-nowrap" onclick="showTab('competitors')">Competitors</button>
                            <button class="py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm whitespace-nowrap" onclick="showTab('events')">Events & Milestones</button>
                            <button class="py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm whitespace-nowrap" onclick="showTab('contact')">Contact Info</button>
                        </nav>
                    </div>

                    <!-- Tab Content -->
                    <div class="p-8">
                        <!-- Overview Tab -->
                        <div id="overviewTab" class="tab-content">
                            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                                <div class="lg:col-span-2">
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Company Overview</h4>
                                    <p class="text-gray-600 mb-6 leading-relaxed" id="modalCompanyDescription">Detailed company description will appear here...</p>
                                    
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                                        <div class="bg-gray-50 rounded-lg p-4">
                                            <h5 class="font-semibold text-gray-900 mb-3">Company Details</h5>
                                            <div class="space-y-2">
                                                <div class="flex justify-between">
                                                    <span class="text-gray-600">Legal Name:</span>
                                                    <span class="font-medium" id="modalCompanyLegalName">-</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span class="text-gray-600">Company Type:</span>
                                                    <span class="font-medium" id="modalCompanyType">-</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span class="text-gray-600">Operating Status:</span>
                                                    <span class="font-medium" id="modalOperatingStatus">-</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span class="text-gray-600">Employees:</span>
                                                    <span class="font-medium" id="modalCompanyEmployees">-</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bg-gray-50 rounded-lg p-4">
                                            <h5 class="font-semibold text-gray-900 mb-3">Founders</h5>
                                            <div id="modalFounders" class="space-y-2">
                                                <!-- Founders will be populated here -->
                                            </div>
                                        </div>
                                    </div>

                                    <div class="bg-blue-50 rounded-lg p-4">
                                        <h5 class="font-semibold text-gray-900 mb-3">Alternate Names</h5>
                                        <div id="modalAlternateNames" class="flex flex-wrap gap-2">
                                            <!-- Alternate names will be populated here -->
                                        </div>
                                    </div>
                                </div>
                                
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Quick Stats</h4>
                                    <div class="space-y-4">
                                        <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg p-4">
                                            <div class="text-2xl font-bold" id="modalTotalFunding">$0</div>
                                            <div class="text-sm opacity-90">Total Funding Raised</div>
                                        </div>
                                        <div class="bg-gradient-to-r from-green-500 to-teal-600 text-white rounded-lg p-4">
                                            <div class="text-2xl font-bold" id="modalFundingRounds">0</div>
                                            <div class="text-sm opacity-90">Funding Rounds</div>
                                        </div>
                                        <div class="bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg p-4">
                                            <div class="text-2xl font-bold" id="modalValuation">-</div>
                                            <div class="text-sm opacity-90">Latest Valuation</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Funding Tab -->
                        <div id="fundingTab" class="tab-content hidden">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Funding Overview</h4>
                                    <div class="bg-gray-50 rounded-lg p-6">
                                        <canvas id="fundingChart" class="funding-chart"></canvas>
                                    </div>
                                </div>
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Key Metrics</h4>
                                    <div class="space-y-4">
                                        <div class="flex justify-between items-center p-4 bg-blue-50 rounded-lg">
                                            <span class="text-gray-600">Total Funding:</span>
                                            <span class="text-xl font-bold text-blue-600" id="fundingTotalAmount">$0</span>
                                        </div>
                                        <div class="flex justify-between items-center p-4 bg-green-50 rounded-lg">
                                            <span class="text-gray-600">Latest Round:</span>
                                            <span class="text-lg font-semibold text-green-600" id="fundingLatestRound">-</span>
                                        </div>
                                        <div class="flex justify-between items-center p-4 bg-purple-50 rounded-lg">
                                            <span class="text-gray-600">Latest Date:</span>
                                            <span class="text-lg font-semibold text-purple-600" id="fundingLatestDate">-</span>
                                        </div>
                                        <div class="flex justify-between items-center p-4 bg-orange-50 rounded-lg">
                                            <span class="text-gray-600">Lead Investors:</span>
                                            <span class="text-lg font-semibold text-orange-600" id="fundingLeadInvestors">-</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex justify-between items-center mb-4">
                                <h4 class="text-xl font-semibold text-gray-900">Funding History</h4>
                                <button id="addInvestmentBtn" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm hidden">
                                    <i class="fas fa-plus mr-2"></i>Add Investment
                                </button>
                            </div>
                            <div class="overflow-x-auto -mx-4 sm:mx-0">
                                <div class="inline-block min-w-full align-middle">
                                    <table class="min-w-full divide-y divide-gray-200 bg-white rounded-lg shadow">
                                        <thead class="bg-gray-50">
                                            <tr>
                                                <th class="px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Round</th>
                                                <th class="px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th>
                                                <th class="px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell">Date</th>
                                                <th class="px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell">Lead Investors</th>
                                                <th class="px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell">Valuation</th>
                                            </tr>
                                        </thead>
                                        <tbody id="fundingRoundsTable" class="bg-white divide-y divide-gray-200">
                                            <!-- Funding rounds will be populated here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div class="mt-8">
                                <h4 class="text-xl font-semibold text-gray-900 mb-4">Investments Made</h4>
                                <div id="investmentsMadeGrid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <!-- Investments made by this company will be populated here -->
                                </div>
                            </div>
                        </div>

                        <!-- Leadership Tab -->
                        <div id="leadershipTab" class="tab-content hidden">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Current Leadership</h4>
                                    <div id="currentLeadershipGrid" class="space-y-4">
                                        <!-- Current leadership will be populated here -->
                                    </div>
                                </div>
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Board Members & Advisors</h4>
                                    <div id="boardMembersGrid" class="space-y-4">
                                        <!-- Board members will be populated here -->
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mt-8">
                                <h4 class="text-xl font-semibold text-gray-900 mb-4">Past Leadership</h4>
                                <div id="pastLeadershipGrid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <!-- Past leadership will be populated here -->
                                </div>
                            </div>
                        </div>

                        <!-- Acquisitions Tab -->
                        <div id="acquisitionsTab" class="tab-content hidden">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Companies Acquired</h4>
                                    <div id="companiesAcquiredGrid" class="space-y-4">
                                        <!-- Acquired companies will be populated here -->
                                    </div>
                                </div>
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Acquisition Details</h4>
                                    <div id="acquisitionDetailsGrid" class="space-y-4">
                                        <!-- Acquisition details will be populated here -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Technology Tab -->
                        <div id="technologyTab" class="tab-content hidden">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Products & Services</h4>
                                    <div id="productsGrid" class="space-y-4">
                                        <!-- Products will be populated here -->
                                    </div>
                                </div>
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Technology Stack</h4>
                                    <div id="technologyStackGrid" class="space-y-4">
                                        <!-- Technology stack will be populated here -->
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mt-8">
                                <h4 class="text-xl font-semibold text-gray-900 mb-4">Notable Customers</h4>
                                <div id="customersGrid" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                    <!-- Customers will be populated here -->
                                </div>
                            </div>
                        </div>

                        <!-- News Tab -->
                        <div id="newsTab" class="tab-content hidden">
                            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                                <div class="lg:col-span-2">
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Latest News & Press</h4>
                                    <div id="newsGrid" class="space-y-6">
                                        <!-- News will be populated here -->
                                    </div>
                                </div>
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Press Releases</h4>
                                    <div id="pressReleasesGrid" class="space-y-4">
                                        <!-- Press releases will be populated here -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Competitors Tab -->
                        <div id="competitorsTab" class="tab-content hidden">
                            <h4 class="text-xl font-semibold text-gray-900 mb-4">Direct Competitors</h4>
                            <div id="competitorsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                                <!-- Competitors will be populated here -->
                            </div>
                            
                            <h4 class="text-xl font-semibold text-gray-900 mb-4">Similar Companies</h4>
                            <div id="similarCompaniesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <!-- Similar companies will be populated here -->
                            </div>
                        </div>

                        <!-- Events Tab -->
                        <div id="eventsTab" class="tab-content hidden">
                            <h4 class="text-xl font-semibold text-gray-900 mb-4">Company Timeline</h4>
                            <div id="timelineGrid" class="relative pl-8">
                                <!-- Timeline will be populated here -->
                            </div>
                        </div>

                        <!-- Contact Tab -->
                        <div id="contactTab" class="tab-content hidden">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Contact Information</h4>
                                    <div class="bg-gray-50 rounded-lg p-6 space-y-4">
                                        <div>
                                            <label class="text-sm font-medium text-gray-600">Headquarters Address</label>
                                            <p class="text-gray-900 mb-2" id="modalCompanyAddress">-</p>
                                            <a id="modalCompanyMapLink" href="#" target="_blank" class="inline-flex items-center text-blue-600 hover:text-blue-800 text-sm">
                                                <i class="fas fa-map-marker-alt mr-1"></i>View on Map
                                            </a>
                                        </div>
                                        <div>
                                            <label class="text-sm font-medium text-gray-600">Phone Number</label>
                                            <p class="text-gray-900" id="modalCompanyPhone">-</p>
                                        </div>
                                        <div>
                                            <label class="text-sm font-medium text-gray-600">General Inquiry Email</label>
                                            <p class="text-gray-900" id="modalCompanyEmail">-</p>
                                        </div>
                                        <div>
                                            <label class="text-sm font-medium text-gray-600">Investor Relations Email</label>
                                            <p class="text-gray-900" id="modalInvestorEmail">-</p>
                                        </div>
                                    </div>
                                    
                                    <!-- Map Preview -->
                                    <div class="mt-6">
                                        <h5 class="text-lg font-semibold text-gray-900 mb-3">Location</h5>
                                        <div class="bg-gray-200 rounded-lg h-48 flex items-center justify-center" id="mapContainer">
                                            <div class="text-center">
                                                <i class="fas fa-map text-gray-400 text-3xl mb-2"></i>
                                                <p class="text-gray-500">Map will load here</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Social Media & Links</h4>
                                    <div class="bg-gray-50 rounded-lg p-6" id="modalCompanySocial">
                                        <!-- Social links will be populated here -->
                                    </div>
                                    
                                    <!-- Profile Sharing -->
                                    <div class="mt-6">
                                        <h5 class="text-lg font-semibold text-gray-900 mb-3">Share Profile</h5>
                                        <div class="bg-blue-50 rounded-lg p-4">
                                            <label class="text-sm font-medium text-gray-600 mb-2 block">Profile URL</label>
                                            <div class="flex items-center space-x-2">
                                                <input type="text" id="profileShareUrl" readonly class="flex-1 bg-white border border-gray-300 rounded px-3 py-2 text-sm">
                                                <button onclick="copyProfileUrl()" class="px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm">
                                                    <i class="fas fa-copy"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Activity Stats -->
                                    <div class="mt-6">
                                        <h5 class="text-lg font-semibold text-gray-900 mb-3">Activity Stats</h5>
                                        <div class="grid grid-cols-2 gap-4">
                                            <div class="bg-green-50 rounded-lg p-4 text-center">
                                                <div class="text-2xl font-bold text-green-600" id="modalCompanyViews">0</div>
                                                <div class="text-sm text-green-800">Profile Views</div>
                                            </div>
                                            <div class="bg-blue-50 rounded-lg p-4 text-center">
                                                <div class="text-2xl font-bold text-blue-600" id="modalCompanyEdits">0</div>
                                                <div class="text-sm text-blue-800">Total Edits</div>
                                            </div>
                                            <div class="bg-purple-50 rounded-lg p-4 text-center">
                                                <div class="text-2xl font-bold text-purple-600" id="modalCompanyScore">0</div>
                                                <div class="text-sm text-purple-800">Activity Score</div>
                                            </div>
                                            <div class="bg-orange-50 rounded-lg p-4 text-center">
                                                <div class="text-sm font-medium text-orange-600" id="modalCompanyUpdated">-</div>
                                                <div class="text-sm text-orange-800">Last Updated</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Person Detail Modal -->
        <div id="personModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 overflow-y-auto">
            <div class="flex items-start justify-center min-h-screen p-2 sm:p-4 pt-4 sm:pt-16">
                <div class="bg-white rounded-xl max-w-4xl w-full max-h-screen overflow-y-auto mx-2 sm:mx-0">
                    <!-- Person Header -->
                    <div class="bg-white border-b p-4 sm:p-6">
                        <div class="flex justify-between items-start mb-4">
                            <div class="flex items-start space-x-3 sm:space-x-4 flex-1 min-w-0">
                                <div class="w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center flex-shrink-0">
                                    <span class="text-white font-bold text-lg sm:text-2xl" id="modalPersonInitials">JD</span>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex flex-col sm:flex-row sm:items-center sm:space-x-3 mb-2">
                                        <h2 class="text-xl sm:text-3xl font-bold text-gray-900 truncate" id="modalPersonName">Person Name</h2>
                                        <button id="editPersonBtn" class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs sm:text-sm font-medium hover:bg-blue-200 hidden mt-1 sm:mt-0 self-start">
                                            <i class="fas fa-edit mr-1"></i>Edit
                                        </button>
                                    </div>
                                    <p class="text-sm sm:text-lg text-gray-600 mb-1 sm:mb-2" id="modalPersonRole">Current Role</p>
                                    <p class="text-sm sm:text-md text-blue-600 mb-2 sm:mb-3 cursor-pointer" id="modalPersonCompany" onclick="showPremiumUpgrade('company details')">Company Name</p>
                                    <div class="flex flex-wrap gap-1 sm:gap-2 mb-2 sm:mb-3">
                                        <span class="px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs sm:text-sm" id="modalPersonLocation">Location</span>
                                        <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs sm:text-sm" id="modalPersonExperience">Experience</span>
                                        <span class="px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs sm:text-sm" id="modalPersonType">Type</span>
                                    </div>
                                    <div class="flex flex-wrap gap-2 sm:gap-4 text-sm">
                                        <a href="#" id="modalPersonLinkedIn" class="text-blue-600 hover:text-blue-800 flex items-center" target="_blank" onclick="return showPremiumUpgrade('LinkedIn access')">
                                            <i class="fab fa-linkedin mr-1"></i><span class="hidden sm:inline">LinkedIn</span>
                                        </a>
                                        <a href="#" id="modalPersonTwitter" class="text-blue-600 hover:text-blue-800 flex items-center" target="_blank" onclick="return showPremiumUpgrade('Twitter access')">
                                            <i class="fab fa-twitter mr-1"></i><span class="hidden sm:inline">Twitter</span>
                                        </a>
                                        <a href="#" id="modalPersonEmail" class="text-blue-600 hover:text-blue-800 flex items-center" onclick="return showPremiumUpgrade('email access')">
                                            <i class="fas fa-envelope mr-1"></i><span class="hidden sm:inline">Email</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <button onclick="closePersonModal()" class="text-gray-400 hover:text-gray-600 p-1 flex-shrink-0">
                                <i class="fas fa-times text-xl sm:text-2xl"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Person Tabs -->
                    <div class="px-4 sm:px-6 border-b bg-white sticky top-0 z-10">
                        <nav class="flex space-x-4 sm:space-x-8 overflow-x-auto scrollbar-hide">
                            <button class="py-3 sm:py-4 px-2 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap tab-active flex-shrink-0" onclick="showPersonTab('profile')">Profile</button>
                            <button class="py-3 sm:py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-xs sm:text-sm whitespace-nowrap flex-shrink-0" onclick="showPersonTab('experience')">Experience</button>
                            <button class="py-3 sm:py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-xs sm:text-sm whitespace-nowrap flex-shrink-0" onclick="showPersonTab('education')">Education</button>
                            <button class="py-3 sm:py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-xs sm:text-sm whitespace-nowrap flex-shrink-0" onclick="showPersonTab('achievements')">Achievements</button>
                            <button class="py-3 sm:py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-xs sm:text-sm whitespace-nowrap flex-shrink-0" onclick="showPersonTab('network')">Network</button>
                        </nav>
                    </div>

                    <!-- Person Tab Content -->
                    <div class="p-4 sm:p-6">
                        <!-- Profile Tab -->
                        <div id="profilePersonTab" class="person-tab-content">
                            <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6">
                                <div class="lg:col-span-2">
                                    <h4 class="text-lg sm:text-xl font-semibold text-gray-900 mb-3 sm:mb-4">About</h4>
                                    <p class="text-gray-600 mb-4 sm:mb-6 leading-relaxed text-sm sm:text-base" id="modalPersonBio">Person bio will appear here...</p>
                                    
                                    <h4 class="text-lg sm:text-xl font-semibold text-gray-900 mb-3 sm:mb-4">Skills & Expertise</h4>
                                    <div id="modalPersonSkills" class="flex flex-wrap gap-2 mb-4 sm:mb-6">
                                        <!-- Skills will be populated here -->
                                    </div>

                                    <h4 class="text-lg sm:text-xl font-semibold text-gray-900 mb-3 sm:mb-4">Responsibilities</h4>
                                    <div id="modalPersonResponsibilities" class="space-y-2">
                                        <!-- Responsibilities will be populated here -->
                                    </div>
                                </div>
                                
                                <div>
                                    <h4 class="text-lg sm:text-xl font-semibold text-gray-900 mb-3 sm:mb-4">Quick Info</h4>
                                    <div class="space-y-3 sm:space-y-4">
                                        <div class="bg-blue-50 rounded-lg p-3 sm:p-4">
                                            <div class="text-lg sm:text-xl font-bold text-blue-600" id="modalPersonYearsExp">0</div>
                                            <div class="text-xs sm:text-sm text-blue-800">Years Experience</div>
                                        </div>
                                        <div class="bg-green-50 rounded-lg p-3 sm:p-4">
                                            <div class="text-lg sm:text-xl font-bold text-green-600" id="modalPersonCompaniesWorked">0</div>
                                            <div class="text-xs sm:text-sm text-green-800">Companies Worked</div>
                                        </div>
                                        <div class="bg-purple-50 rounded-lg p-3 sm:p-4">
                                            <div class="text-lg sm:text-xl font-bold text-purple-600" id="modalPersonProjects">0</div>
                                            <div class="text-xs sm:text-sm text-purple-800">Notable Projects</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Experience Tab -->
                        <div id="experiencePersonTab" class="person-tab-content hidden">
                            <h4 class="text-xl font-semibold text-gray-900 mb-4">Work Experience</h4>
                            <div id="modalPersonExperienceList" class="space-y-4">
                                <!-- Experience will be populated here -->
                            </div>
                        </div>

                        <!-- Education Tab -->
                        <div id="educationPersonTab" class="person-tab-content hidden">
                            <h4 class="text-xl font-semibold text-gray-900 mb-4">Education History</h4>
                            <div id="modalPersonEducationList" class="space-y-4">
                                <!-- Education will be populated here -->
                            </div>
                        </div>

                        <!-- Achievements Tab -->
                        <div id="achievementsPersonTab" class="person-tab-content hidden">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Awards & Recognition</h4>
                                    <div id="modalPersonAwards" class="space-y-4">
                                        <!-- Awards will be populated here -->
                                    </div>
                                </div>
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Media Mentions</h4>
                                    <div id="modalPersonMentions" class="space-y-4">
                                        <!-- Media mentions will be populated here -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Network Tab -->
                        <div id="networkPersonTab" class="person-tab-content hidden">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Professional Network</h4>
                                    <div id="modalPersonNetwork" class="space-y-4">
                                        <!-- Network will be populated here -->
                                    </div>
                                </div>
                                <div>
                                    <h4 class="text-xl font-semibold text-gray-900 mb-4">Investments & Advisory</h4>
                                    <div id="modalPersonInvestments" class="space-y-4">
                                        <!-- Investments will be populated here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Person Modal -->
        <div id="addPersonModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 overflow-y-auto">
            <div class="flex items-start justify-center min-h-screen p-2 sm:p-4 pt-4 sm:pt-16">
                <div class="bg-white rounded-xl max-w-4xl w-full max-h-screen overflow-y-auto mx-2 sm:mx-0">
                    <div class="sticky top-0 bg-white border-b px-4 sm:px-6 py-3 sm:py-4 flex justify-between items-center rounded-t-xl">
                        <h3 class="text-lg sm:text-2xl font-bold text-gray-900">Add New Person</h3>
                        <button onclick="closeAddPersonModal()" class="text-gray-400 hover:text-gray-600 p-1">
                            <i class="fas fa-times text-lg sm:text-xl"></i>
                        </button>
                    </div>
                    <form id="addPersonForm" class="p-4 sm:p-6 space-y-4 sm:space-y-6">
                        <!-- Profile Type Management -->
                        <div>
                            <h4 class="text-lg font-semibold text-gray-900 mb-4">Manage Profile Type(s)</h4>
                            <p class="text-sm text-gray-600 mb-4">Please add any profile type(s) below that best describe this profile.</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                <label class="flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="checkbox" id="personProfileTypeIndividual" value="Individual Investor" checked class="text-blue-600">
                                    <span class="text-sm font-medium">Individual Investor</span>
                                </label>
                                <label class="flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="checkbox" id="personProfileTypeEmployee" value="Employee" class="text-blue-600">
                                    <span class="text-sm font-medium">Employee</span>
                                </label>
                            </div>
                        </div>

                        <!-- Basic Information -->
                        <div>
                            <h4 class="text-lg font-semibold text-gray-900 mb-4">Basic Information</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">First Name *</label>
                                    <input type="text" id="personFirstName" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Last Name *</label>
                                    <input type="text" id="personLastName" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Gender</label>
                                    <select id="personGender" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                        <option value="">Select Gender</option>
                                        <option value="Male">Male</option>
                                        <option value="Female">Female</option>
                                        <option value="Non-binary">Non-binary</option>
                                        <option value="Prefer not to say">Prefer not to say</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Also Known As</label>
                                    <input type="text" id="personAlsoKnownAs" placeholder="Nicknames, aliases" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Full Name *</label>
                                    <input type="text" id="personName" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                    <input type="email" id="personEmail" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Current Role *</label>
                                    <input type="text" id="personRole" required placeholder="e.g., CEO, CTO, Software Engineer" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Company *</label>
                                    <select id="personCompany" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                        <option value="">Select Company</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Location</label>
                                    <input type="text" id="personLocation" placeholder="City, Country" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Person Type</label>
                                    <select id="personType" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                        <option value="Employee">Employee</option>
                                        <option value="Founder">Founder</option>
                                        <option value="Advisor">Advisor</option>
                                        <option value="Investor">Investor</option>
                                        <option value="Board Member">Board Member</option>
                                    </select>
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Bio</label>
                                    <textarea id="personBio" rows="3" placeholder="Brief professional bio and background" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Professional Details -->
                        <div>
                            <h4 class="text-lg font-semibold text-gray-900 mb-4">Professional Details</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Years of Experience</label>
                                    <select id="personExperience" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                        <option value="">Select Experience</option>
                                        <option value="0-2">0-2 years</option>
                                        <option value="3-5">3-5 years</option>
                                        <option value="6-10">6-10 years</option>
                                        <option value="10+">10+ years</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Skills (comma separated)</label>
                                    <input type="text" id="personSkills" placeholder="JavaScript, React, Node.js, Leadership" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Key Responsibilities</label>
                                    <textarea id="personResponsibilities" rows="3" placeholder="Main responsibilities and achievements in current role" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Social Links -->
                        <div>
                            <h4 class="text-lg font-semibold text-gray-900 mb-4">Social Links</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">LinkedIn</label>
                                    <input type="url" id="personLinkedIn" placeholder="https://linkedin.com/in/..." class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Twitter</label>
                                    <input type="url" id="personTwitter" placeholder="https://twitter.com/..." class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                            </div>
                        </div>

                        <div class="flex justify-end space-x-3 pt-4 border-t">
                            <button type="button" onclick="closeAddPersonModal()" class="px-6 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300">Cancel</button>
                            <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Add Person</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Add Investment Modal -->
        <div id="addInvestmentModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 overflow-y-auto">
            <div class="flex items-start justify-center min-h-screen p-4 pt-16">
                <div class="bg-white rounded-xl max-w-2xl w-full">
                    <div class="sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center rounded-t-xl">
                        <h3 class="text-2xl font-bold text-gray-900">Add Investment</h3>
                        <button onclick="closeAddInvestmentModal()" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    <form id="addInvestmentForm" class="p-6 space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Target Company *</label>
                                <select id="investmentTargetCompany" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                    <option value="">Select Company to Invest In</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Investment Amount *</label>
                                <input type="text" id="investmentAmount" required placeholder="e.g., $10M, $500K" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Investment Round *</label>
                                <select id="investmentRound" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                    <option value="">Select Round</option>
                                    <option value="Pre-Seed">Pre-Seed</option>
                                    <option value="Seed">Seed</option>
                                    <option value="Series A">Series A</option>
                                    <option value="Series B">Series B</option>
                                    <option value="Series C">Series C</option>
                                    <option value="Series D">Series D</option>
                                    <option value="Series E">Series E</option>
                                    <option value="Bridge">Bridge</option>
                                    <option value="Growth">Growth</option>
                                    <option value="IPO">IPO</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Investment Date *</label>
                                <input type="date" id="investmentDate" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Valuation (Optional)</label>
                                <input type="text" id="investmentValuation" placeholder="e.g., $100M, $1B" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Investment Type</label>
                                <select id="investmentType" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                    <option value="Lead Investor">Lead Investor</option>
                                    <option value="Co-Investor">Co-Investor</option>
                                    <option value="Follow-on">Follow-on</option>
                                    <option value="Strategic">Strategic</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Investment Notes</label>
                            <textarea id="investmentNotes" rows="3" placeholder="Additional details about this investment..." class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500"></textarea>
                        </div>

                        <div class="flex justify-end space-x-3 pt-4 border-t">
                            <button type="button" onclick="closeAddInvestmentModal()" class="px-6 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300">Cancel</button>
                            <button type="submit" class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">Add Investment</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Add Company Modal -->
        <div id="addCompanyModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 overflow-y-auto">
            <div class="flex items-start justify-center min-h-screen p-2 sm:p-4 pt-4 sm:pt-16">
                <div class="bg-white rounded-xl max-w-4xl w-full max-h-screen overflow-y-auto mx-2 sm:mx-0">
                    <div class="sticky top-0 bg-white border-b px-4 sm:px-6 py-3 sm:py-4 flex justify-between items-center rounded-t-xl">
                        <h3 class="text-lg sm:text-2xl font-bold text-gray-900">Add New Company</h3>
                        <button onclick="closeAddCompanyModal()" class="text-gray-400 hover:text-gray-600 p-1">
                            <i class="fas fa-times text-lg sm:text-xl"></i>
                        </button>
                    </div>
                    <form id="addCompanyForm" class="p-4 sm:p-6 space-y-4 sm:space-y-6">
                        <!-- Profile Type Management -->
                        <div>
                            <h4 class="text-lg font-semibold text-gray-900 mb-4">Manage Profile Type(s)</h4>
                            <p class="text-sm text-gray-600 mb-4">Please add any profile type(s) below that best describe this profile. Profile types control which fields are available to be displayed on a profile.</p>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                                <label class="flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="checkbox" id="profileTypeCompany" value="Company" checked class="text-blue-600">
                                    <span class="text-sm font-medium">Company</span>
                                </label>
                                <label class="flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="checkbox" id="profileTypeInvestment" value="Investment Firm" class="text-blue-600">
                                    <span class="text-sm font-medium">Investment Firm</span>
                                </label>
                                <label class="flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="checkbox" id="profileTypeGovernment" value="Government Entity" class="text-blue-600">
                                    <span class="text-sm font-medium">Government Entity</span>
                                </label>
                                <label class="flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="checkbox" id="profileTypeSchool" value="School" class="text-blue-600">
                                    <span class="text-sm font-medium">School</span>
                                </label>
                            </div>
                        </div>

                        <!-- Basic Information -->
                        <div>
                            <h4 class="text-lg font-semibold text-gray-900 mb-4">Basic Information</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Company Name *</label>
                                    <input type="text" id="companyName" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Legal Name</label>
                                    <input type="text" id="companyLegalName" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Tagline</label>
                                    <input type="text" id="companyTagline" placeholder="Brief description of what the company does" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                                    <textarea id="companyDescription" rows="4" placeholder="Detailed company description, mission, and services" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Company Details -->
                        <div>
                            <h4 class="text-lg font-semibold text-gray-900 mb-4">Company Details</h4>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Industry</label>
                                    <select id="companyIndustry" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                        <option value="">Select Industry</option>
                                        <option value="Technology">Technology</option>
                                        <option value="Healthcare">Healthcare</option>
                                        <option value="Finance">Finance</option>
                                        <option value="E-commerce">E-commerce</option>
                                        <option value="SaaS">SaaS</option>
                                        <option value="Fintech">Fintech</option>
                                        <option value="Automotive">Automotive</option>
                                        <option value="Education">Education</option>
                                        <option value="Retail">Retail</option>
                                        <option value="Media">Media</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Founded Year</label>
                                    <input type="number" id="companyFounded" min="1800" max="2024" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Employee Range</label>
                                    <select id="companyEmployees" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                        <option value="">Select Range</option>
                                        <option value="1-10">1-10</option>
                                        <option value="11-50">11-50</option>
                                        <option value="51-200">51-200</option>
                                        <option value="201-1000">201-1000</option>
                                        <option value="1000+">1000+</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Company Type</label>
                                    <select id="companyType" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                        <option value="Private">Private</option>
                                        <option value="Public">Public</option>
                                        <option value="Non-profit">Non-profit</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                                    <select id="companyStatus" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                        <option value="Active">Active</option>
                                        <option value="IPO">IPO'd</option>
                                        <option value="Acquired">Acquired</option>
                                        <option value="Closed">Closed</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Location</label>
                                    <input type="text" id="companyLocation" placeholder="City, Country" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                            </div>
                        </div>

                        <!-- Headquarters -->
                        <div>
                            <h4 class="text-lg font-semibold text-gray-900 mb-4">Headquarters</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Full Address</label>
                                    <textarea id="companyAddress" rows="2" placeholder="1600 Amphitheatre Parkway, Mountain View, CA 94043, USA" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500"></textarea>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                                    <input type="tel" id="companyPhone" placeholder="510-555-5555" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Contact Email</label>
                                    <input type="email" id="companyContactEmail" placeholder="hello@company.com" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                            </div>
                        </div>

                        <!-- Industries & Diversity -->
                        <div>
                            <h4 class="text-lg font-semibold text-gray-900 mb-4">Industries & Diversity Spotlight</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Industries (comma separated)</label>
                                    <input type="text" id="companyIndustries" placeholder="E.g. 'RegTech', 'Account-based Marketing'" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Diversity Spotlight</label>
                                    <input type="text" id="companyDiversity" placeholder="E.g. 'Women-led', 'Minority-owned'" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                            </div>
                        </div>

                        <!-- Contact & Links -->
                        <div>
                            <h4 class="text-lg font-semibold text-gray-900 mb-4">Social Links</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Website</label>
                                    <input type="url" id="companyWebsite" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">LinkedIn</label>
                                    <input type="url" id="companyLinkedIn" placeholder="https://linkedin.com/company/..." class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Twitter</label>
                                    <input type="url" id="companyTwitter" placeholder="https://twitter.com/..." class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Facebook</label>
                                    <input type="url" id="companyFacebook" placeholder="https://facebook.com/..." class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                                </div>
                            </div>
                        </div>

                        <div class="flex justify-end space-x-3 pt-4 border-t">
                            <button type="button" onclick="closeAddCompanyModal()" class="px-6 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300">Cancel</button>
                            <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Add Company</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAl8eI-_8Ew9va0KPV8p4D2hc9WUTGiwuI",
            authDomain: "chat-d647c.firebaseapp.com",
            databaseURL: "https://chat-d647c-default-rtdb.firebaseio.com",
            projectId: "chat-d647c",
            storageBucket: "chat-d647c.firebasestorage.app",
            messagingSenderId: "123456789",
            appId: "1:123456789:web:7248a0983dcf0d45a87418",
            measurementId: "G-5RFLRYTLCN"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        // Global variables
        let currentUser = null;
        let companies = [];
        let people = [];
        let currentCompany = null;
        let currentPerson = null;
        let fundingChart = null;

        // Sample people data
        const samplePeople = [
            {
                id: 'elon-musk',
                name: 'Elon Musk',
                firstName: 'Elon',
                lastName: 'Musk',
                email: 'elon@tesla.com',
                role: 'CEO & Product Architect',
                company: 'Tesla Motors',
                companyId: 'tesla-motors',
                location: 'Austin, Texas, USA',
                type: 'Founder',
                experience: '10+',
                profileType: 'Individual Investor',
                gender: 'Male',
                profileUrl: 'elon-musk',
                profileImage: 'https://pbs.twimg.com/profile_images/1590968738358079488/IY9Gx6Ok_400x400.jpg',
                views: 25430,
                edits: 156,
                activityScore: 98,
                lastUpdated: '2024-01-14',
                bio: 'Entrepreneur and business magnate. CEO of Tesla and SpaceX, founder of Neuralink and The Boring Company. Previously co-founded PayPal and OpenAI.',
                skills: ['Leadership', 'Product Development', 'Engineering', 'Strategic Planning', 'Innovation'],
                responsibilities: [
                    'Leading Tesla\'s mission to accelerate sustainable transport',
                    'Overseeing product development and manufacturing',
                    'Strategic planning and company vision',
                    'Public representation and investor relations'
                ],
                yearsExperience: 25,
                companiesWorked: 6,
                notableProjects: 12,
                workExperience: [
                    { company: 'Tesla', role: 'CEO & Product Architect', duration: '2008 - Present', description: 'Leading electric vehicle revolution' },
                    { company: 'SpaceX', role: 'CEO & CTO', duration: '2002 - Present', description: 'Advancing space exploration' },
                    { company: 'PayPal', role: 'Co-founder', duration: '1999 - 2002', description: 'Online payment systems' }
                ],
                education: [
                    { institution: 'University of Pennsylvania', degree: 'BS in Economics', year: '1997' },
                    { institution: 'University of Pennsylvania', degree: 'BS in Physics', year: '1997' }
                ],
                awards: [
                    { title: 'Time Person of the Year', year: '2021', description: 'For advancing electric vehicles and space exploration' },
                    { title: 'Royal Aeronautical Society Gold Medal', year: '2012', description: 'For advancing commercial spaceflight' }
                ],
                mediaMentions: [
                    { title: 'Tesla CEO Announces New Gigafactory', source: 'TechCrunch', date: '2023-12-01' },
                    { title: 'SpaceX Successfully Launches Starship', source: 'Space News', date: '2023-11-15' }
                ],
                social: {
                    linkedin: 'https://linkedin.com/in/elonmusk',
                    twitter: 'https://twitter.com/elonmusk'
                },
                createdAt: '2023-01-01'
            },
            {
                id: 'sam-altman',
                name: 'Sam Altman',
                email: 'sam@openai.com',
                role: 'CEO',
                company: 'OpenAI',
                companyId: 'openai',
                location: 'San Francisco, California, USA',
                type: 'Founder',
                experience: '10+',
                bio: 'Entrepreneur and investor. CEO of OpenAI, former president of Y Combinator. Leading the development of artificial general intelligence.',
                skills: ['AI Strategy', 'Leadership', 'Venture Capital', 'Product Management', 'Fundraising'],
                responsibilities: [
                    'Leading OpenAI\'s mission to ensure AGI benefits humanity',
                    'Strategic partnerships and business development',
                    'Fundraising and investor relations',
                    'Public policy and AI safety advocacy'
                ],
                yearsExperience: 15,
                companiesWorked: 4,
                notableProjects: 8,
                workExperience: [
                    { company: 'OpenAI', role: 'CEO', duration: '2019 - Present', description: 'Leading AI research and development' },
                    { company: 'Y Combinator', role: 'President', duration: '2014 - 2019', description: 'Startup accelerator leadership' },
                    { company: 'Loopt', role: 'Co-founder & CEO', duration: '2005 - 2012', description: 'Location-based social networking' }
                ],
                education: [
                    { institution: 'Stanford University', degree: 'Computer Science (Dropped out)', year: '2005' }
                ],
                awards: [
                    { title: 'Time 100 Most Influential People', year: '2023', description: 'For leadership in AI development' },
                    { title: 'Forbes 30 Under 30', year: '2015', description: 'Technology category' }
                ],
                mediaMentions: [
                    { title: 'OpenAI CEO Discusses AI Safety', source: 'MIT Technology Review', date: '2023-11-20' },
                    { title: 'The Future of Artificial Intelligence', source: 'Wired', date: '2023-10-15' }
                ],
                social: {
                    linkedin: 'https://linkedin.com/in/sama',
                    twitter: 'https://twitter.com/sama'
                },
                createdAt: '2023-01-01'
            },
            {
                id: 'patrick-collison',
                name: 'Patrick Collison',
                email: 'patrick@stripe.com',
                role: 'CEO & Co-Founder',
                company: 'Stripe',
                companyId: 'stripe',
                location: 'San Francisco, California, USA',
                type: 'Founder',
                experience: '10+',
                bio: 'Irish-American entrepreneur. Co-founder and CEO of Stripe. Focused on building internet infrastructure for commerce.',
                skills: ['Fintech', 'Product Strategy', 'Engineering', 'Business Development', 'International Expansion'],
                responsibilities: [
                    'Leading Stripe\'s global expansion and product strategy',
                    'Building financial infrastructure for the internet',
                    'Regulatory compliance and partnerships',
                    'Engineering culture and technical vision'
                ],
                yearsExperience: 12,
                companiesWorked: 2,
                notableProjects: 6,
                workExperience: [
                    { company: 'Stripe', role: 'CEO & Co-Founder', duration: '2010 - Present', description: 'Building payment infrastructure' },
                    { company: 'Auctomatic', role: 'Co-founder', duration: '2007 - 2008', description: 'eBay auction management (acquired by Live Current Media)' }
                ],
                education: [
                    { institution: 'MIT', degree: 'Mathematics (Dropped out)', year: '2009' }
                ],
                awards: [
                    { title: 'Forbes 30 Under 30', year: '2016', description: 'Finance category' },
                    { title: 'Young Global Leader', year: '2018', description: 'World Economic Forum' }
                ],
                mediaMentions: [
                    { title: 'Stripe Expands Crypto Payment Support', source: 'Financial Times', date: '2023-10-12' },
                    { title: 'The Future of Digital Payments', source: 'Bloomberg', date: '2023-09-20' }
                ],
                social: {
                    linkedin: 'https://linkedin.com/in/patrickcollison',
                    twitter: 'https://twitter.com/patrickc'
                },
                createdAt: '2023-01-01'
            }
        ];

        // Sample data for testing
        const sampleCompanies = [
            {
                id: 'tesla-motors',
                name: 'Tesla Motors',
                legalName: 'Tesla, Inc.',
                tagline: 'Accelerating the world\'s transition to sustainable energy',
                description: 'Tesla, Inc. is an American electric vehicle and clean energy company based in Austin, Texas. Tesla designs and manufactures electric cars, battery energy storage from home to grid-scale, solar panels and solar roof tiles, and related products and services. Tesla is one of the world\'s most valuable companies and is among the most valuable automakers.',
                industry: 'Automotive',
                founded: 2003,
                employees: '1000+',
                location: 'Austin, Texas, USA',
                website: 'https://tesla.com',
                type: 'Public',
                status: 'IPO',
                rank: '#1',
                email: 'info@tesla.com',
                phone: '+1-512-516-8177',
                address: '1 Tesla Road, Austin, TX 78725, USA',
                investorEmail: 'ir@tesla.com',
                operatingStatus: 'Active',
                alternateNames: ['Tesla Inc', 'Tesla Motors Inc'],
                founders: ['Elon Musk', 'Martin Eberhard', 'Marc Tarpenning', 'JB Straubel', 'Ian Wright'],
                logoUrl: 'https://logo.clearbit.com/tesla.com',
                profileUrl: 'tesla-motors',
                profileType: 'Company',
                views: 15420,
                edits: 89,
                activityScore: 95,
                lastUpdated: '2024-01-15',
                diversitySpotlight: ['Electric Vehicles', 'Sustainable Energy', 'Autonomous Driving'],
                headquarters: {
                    address: '1 Tesla Road, Austin, TX 78725, USA',
                    coordinates: { lat: 30.2672, lng: -97.7431 },
                    mapUrl: 'https://maps.google.com/?q=1+Tesla+Road,+Austin,+TX+78725'
                },
                fundingRounds: [
                    { round: 'IPO', amount: '$226M', date: '2010-06-29', leadInvestors: 'Public Market', valuation: '$1.7B' },
                    { round: 'Series F', amount: '$50M', date: '2009-07-15', leadInvestors: 'Daimler AG', valuation: '$500M' },
                    { round: 'Series E', amount: '$40M', date: '2008-05-01', leadInvestors: 'Various VCs', valuation: '$300M' },
                    { round: 'Series D', amount: '$45M', date: '2007-05-01', leadInvestors: 'Valor Equity Partners', valuation: '$200M' }
                ],
                totalFunding: '$361M',
                latestValuation: '$800B+',
                leadership: [
                    { name: 'Elon Musk', position: 'CEO & Product Architect', type: 'current' },
                    { name: 'Drew Baglino', position: 'SVP, Powertrain & Energy Engineering', type: 'current' },
                    { name: 'Zachary Kirkhorn', position: 'Former CFO', type: 'past' },
                    { name: 'Vaibhav Taneja', position: 'CFO', type: 'current' }
                ],
                boardMembers: [
                    { name: 'Robyn Denholm', position: 'Chairwoman' },
                    { name: 'James Murdoch', position: 'Board Member' },
                    { name: 'Kimbal Musk', position: 'Board Member' }
                ],
                acquisitions: [
                    { company: 'SolarCity', amount: '$2.6B', date: '2016-11-21', description: 'Solar energy services company' },
                    { company: 'Maxwell Technologies', amount: '$218M', date: '2019-05-16', description: 'Ultracapacitor and battery technology' }
                ],
                products: [
                    { name: 'Model S', description: 'Luxury electric sedan' },
                    { name: 'Model 3', description: 'Mid-size electric sedan' },
                    { name: 'Model X', description: 'Electric SUV with falcon-wing doors' },
                    { name: 'Model Y', description: 'Compact electric SUV' },
                    { name: 'Cybertruck', description: 'Electric pickup truck' },
                    { name: 'Powerwall', description: 'Home battery energy storage' },
                    { name: 'Solar Roof', description: 'Solar panel roof tiles' }
                ],
                technologyStack: [
                    { name: 'Custom Silicon', description: 'In-house chip design' },
                    { name: 'Neural Networks', description: 'AI for autonomous driving' },
                    { name: 'Battery Technology', description: '4680 battery cells' },
                    { name: 'Supercharger Network', description: 'Fast charging infrastructure' }
                ],
                customers: ['Individual Consumers', 'Government Agencies', 'Commercial Fleets', 'Energy Companies'],
                news: [
                    { title: 'Tesla Reports Record Q4 2023 Deliveries', date: '2024-01-02', summary: 'Tesla delivered over 484,000 vehicles in Q4 2023, setting a new quarterly record.' },
                    { title: 'Cybertruck Production Begins', date: '2023-11-30', summary: 'Tesla begins production of the highly anticipated Cybertruck at Gigafactory Texas.' },
                    { title: 'Tesla Opens New Gigafactory in Mexico', date: '2023-10-15', summary: 'Construction begins on Tesla\'s new manufacturing facility in Nuevo LeÃ³n, Mexico.' }
                ],
                pressReleases: [
                    { title: 'Tesla Announces Full Self-Driving Beta Expansion', date: '2023-12-01' },
                    { title: 'Supercharger Network Reaches 50,000 Connectors Globally', date: '2023-11-15' }
                ],
                competitors: ['Rivian', 'Lucid Motors', 'Ford', 'General Motors', 'BYD'],
                similarCompanies: ['NIO', 'Xpeng', 'Li Auto', 'Fisker'],
                timeline: [
                    { date: '2003-07-01', event: 'Tesla Motors founded', type: 'founding' },
                    { date: '2008-02-01', event: 'First Roadster delivered', type: 'product' },
                    { date: '2010-06-29', event: 'IPO on NASDAQ', type: 'funding' },
                    { date: '2012-06-22', event: 'Model S production begins', type: 'product' },
                    { date: '2016-11-21', event: 'SolarCity acquisition completed', type: 'acquisition' },
                    { date: '2020-01-29', event: 'Market cap exceeds $100B', type: 'milestone' },
                    { date: '2023-11-30', event: 'Cybertruck deliveries begin', type: 'product' }
                ],
                social: {
                    linkedin: 'https://linkedin.com/company/tesla-motors',
                    twitter: 'https://twitter.com/tesla',
                    facebook: 'https://facebook.com/tesla',
                    instagram: 'https://instagram.com/teslamotors'
                }
            },
            {
                id: 'openai',
                name: 'OpenAI',
                legalName: 'OpenAI, L.P.',
                tagline: 'Creating safe artificial general intelligence that benefits all of humanity',
                description: 'OpenAI is an AI research and deployment company. Our mission is to ensure that artificial general intelligence (AGI) benefits all of humanity. We conduct research in AI safety and develop AI systems that are safe, beneficial, and understandable.',
                industry: 'Technology',
                founded: 2015,
                employees: '201-1000',
                location: 'San Francisco, California, USA',
                website: 'https://openai.com',
                type: 'Private',
                status: 'Active',
                rank: '#2',
                email: 'info@openai.com',
                phone: '+1-415-555-0123',
                address: '3180 18th St, San Francisco, CA 94110, USA',
                investorEmail: 'investors@openai.com',
                operatingStatus: 'Active',
                alternateNames: ['OpenAI LP', 'OpenAI Inc'],
                founders: ['Sam Altman', 'Elon Musk', 'Greg Brockman', 'Ilya Sutskever', 'Wojciech Zaremba'],
                logoUrl: 'https://logo.clearbit.com/openai.com',
                profileUrl: 'openai',
                profileType: 'Company',
                views: 12850,
                edits: 67,
                activityScore: 92,
                lastUpdated: '2024-01-12',
                diversitySpotlight: ['Artificial Intelligence', 'Machine Learning', 'AI Safety'],
                headquarters: {
                    address: '3180 18th St, San Francisco, CA 94110, USA',
                    coordinates: { lat: 37.7749, lng: -122.4194 },
                    mapUrl: 'https://maps.google.com/?q=3180+18th+St,+San+Francisco,+CA+94110'
                },
                fundingRounds: [
                    { round: 'Series C', amount: '$10B', date: '2023-01-23', leadInvestors: 'Microsoft', valuation: '$29B' },
                    { round: 'Series B', amount: '$1B', date: '2019-07-22', leadInvestors: 'Microsoft', valuation: '$1B' },
                    { round: 'Series A', amount: '$1B', date: '2015-12-11', leadInvestors: 'Various', valuation: '$1B' }
                ],
                totalFunding: '$12B',
                latestValuation: '$29B',
                leadership: [
                    { name: 'Sam Altman', position: 'CEO', type: 'current' },
                    { name: 'Greg Brockman', position: 'President & Co-Founder', type: 'current' },
                    { name: 'Ilya Sutskever', position: 'Chief Scientist', type: 'current' },
                    { name: 'Mira Murati', position: 'CTO', type: 'current' }
                ],
                boardMembers: [
                    { name: 'Bret Taylor', position: 'Chairman' },
                    { name: 'Adam D\'Angelo', position: 'Board Member' },
                    { name: 'Reid Hoffman', position: 'Board Member' }
                ],
                acquisitions: [],
                products: [
                    { name: 'ChatGPT', description: 'Conversational AI assistant' },
                    { name: 'GPT-4', description: 'Large language model' },
                    { name: 'DALL-E', description: 'AI image generation' },
                    { name: 'Whisper', description: 'Speech recognition system' },
                    { name: 'Codex', description: 'AI code generation' }
                ],
                technologyStack: [
                    { name: 'Transformer Architecture', description: 'Neural network architecture' },
                    { name: 'Reinforcement Learning', description: 'RLHF training methods' },
                    { name: 'Large Scale Computing', description: 'Distributed training systems' },
                    { name: 'Safety Research', description: 'AI alignment and safety' }
                ],
                customers: ['Microsoft', 'Individual Users', 'Developers', 'Enterprises'],
                news: [
                    { title: 'OpenAI Launches GPT-4 Turbo', date: '2023-11-06', summary: 'OpenAI announces GPT-4 Turbo with improved capabilities and lower costs.' },
                    { title: 'ChatGPT Reaches 100 Million Users', date: '2023-01-01', summary: 'ChatGPT becomes the fastest-growing consumer application in history.' }
                ],
                pressReleases: [
                    { title: 'OpenAI Announces Custom GPTs', date: '2023-11-06' },
                    { title: 'Partnership with Microsoft Expanded', date: '2023-01-23' }
                ],
                competitors: ['Google DeepMind', 'Anthropic', 'Cohere', 'AI21 Labs'],
                similarCompanies: ['Hugging Face', 'Stability AI', 'Midjourney', 'Character.AI'],
                timeline: [
                    { date: '2015-12-11', event: 'OpenAI founded', type: 'founding' },
                    { date: '2018-06-11', event: 'GPT-1 released', type: 'product' },
                    { date: '2019-02-14', event: 'GPT-2 announced', type: 'product' },
                    { date: '2020-06-11', event: 'GPT-3 released', type: 'product' },
                    { date: '2022-11-30', event: 'ChatGPT launched', type: 'product' },
                    { date: '2023-03-14', event: 'GPT-4 released', type: 'product' }
                ],
                social: {
                    linkedin: 'https://linkedin.com/company/openai',
                    twitter: 'https://twitter.com/openai',
                    facebook: 'https://facebook.com/openai',
                    instagram: 'https://instagram.com/openai'
                }
            },
            {
                id: 'stripe',
                name: 'Stripe',
                legalName: 'Stripe, Inc.',
                tagline: 'Financial infrastructure for the internet',
                description: 'Stripe is a financial services and software as a service (SaaS) company dual-headquartered in San Francisco, California and Dublin, Ireland. The company primarily offers payment processing software and application programming interfaces for e-commerce websites and mobile applications.',
                industry: 'Fintech',
                founded: 2010,
                employees: '1000+',
                location: 'San Francisco, California, USA',
                website: 'https://stripe.com',
                type: 'Private',
                status: 'Active',
                rank: '#3',
                email: 'info@stripe.com',
                phone: '+1-888-926-2289',
                address: '354 Oyster Point Blvd, South San Francisco, CA 94080, USA',
                investorEmail: 'investors@stripe.com',
                operatingStatus: 'Active',
                alternateNames: ['Stripe Inc', '/dev/payments'],
                founders: ['Patrick Collison', 'John Collison'],
                logoUrl: 'https://logo.clearbit.com/stripe.com',
                profileUrl: 'stripe',
                profileType: 'Company',
                views: 9870,
                edits: 45,
                activityScore: 88,
                lastUpdated: '2024-01-10',
                diversitySpotlight: ['Fintech', 'Payment Processing', 'Developer Tools'],
                headquarters: {
                    address: '354 Oyster Point Blvd, South San Francisco, CA 94080, USA',
                    coordinates: { lat: 37.6624, lng: -122.3892 },
                    mapUrl: 'https://maps.google.com/?q=354+Oyster+Point+Blvd,+South+San+Francisco,+CA+94080'
                },
                fundingRounds: [
                    { round: 'Series H', amount: '$600M', date: '2021-03-14', leadInvestors: 'Allianz X', valuation: '$95B' },
                    { round: 'Series G', amount: '$250M', date: '2020-04-16', leadInvestors: 'Andreessen Horowitz', valuation: '$36B' },
                    { round: 'Series F', amount: '$245M', date: '2019-09-19', leadInvestors: 'General Catalyst', valuation: '$35B' }
                ],
                totalFunding: '$2.2B',
                latestValuation: '$95B',
                leadership: [
                    { name: 'Patrick Collison', position: 'CEO & Co-Founder', type: 'current' },
                    { name: 'John Collison', position: 'President & Co-Founder', type: 'current' },
                    { name: 'David Singleton', position: 'CTO', type: 'current' },
                    { name: 'Dhivya Suryadevara', position: 'CFO', type: 'current' }
                ],
                boardMembers: [
                    { name: 'John Doerr', position: 'Board Member' },
                    { name: 'Diane Greene', position: 'Board Member' },
                    { name: 'Christa Davies', position: 'Board Member' }
                ],
                acquisitions: [
                    { company: 'Paystack', amount: '$200M+', date: '2020-10-15', description: 'African payments company' },
                    { company: 'Touchtech Payments', amount: 'Undisclosed', date: '2019-12-02', description: 'European payment processing' }
                ],
                products: [
                    { name: 'Payments', description: 'Online payment processing' },
                    { name: 'Billing', description: 'Subscription management' },
                    { name: 'Connect', description: 'Marketplace payments' },
                    { name: 'Radar', description: 'Fraud prevention' },
                    { name: 'Terminal', description: 'In-person payments' },
                    { name: 'Atlas', description: 'Company incorporation' }
                ],
                technologyStack: [
                    { name: 'Ruby on Rails', description: 'Backend framework' },
                    { name: 'Machine Learning', description: 'Fraud detection' },
                    { name: 'APIs', description: 'Developer-first approach' },
                    { name: 'Global Infrastructure', description: 'Multi-region deployment' }
                ],
                customers: ['Amazon', 'Google', 'Microsoft', 'Shopify', 'Lyft', 'Deliveroo'],
                news: [
                    { title: 'Stripe Launches Crypto Payments', date: '2023-10-12', summary: 'Stripe announces support for cryptocurrency payments for merchants.' },
                    { title: 'Stripe Expands to 50+ Countries', date: '2023-08-15', summary: 'Stripe continues global expansion with new market launches.' }
                ],
                pressReleases: [
                    { title: 'Stripe Announces New Banking-as-a-Service Features', date: '2023-09-20' },
                    { title: 'Partnership with OpenAI for Payment Processing', date: '2023-07-10' }
                ],
                competitors: ['PayPal', 'Square', 'Adyen', 'Braintree'],
                similarCompanies: ['Plaid', 'Checkout.com', 'Razorpay', 'Klarna'],
                timeline: [
                    { date: '2010-01-01', event: 'Stripe founded', type: 'founding' },
                    { date: '2011-09-01', event: 'Public beta launch', type: 'product' },
                    { date: '2012-02-01', event: 'Series A funding', type: 'funding' },
                    { date: '2016-11-25', event: 'Stripe Atlas launched', type: 'product' },
                    { date: '2020-10-15', event: 'Paystack acquisition', type: 'acquisition' },
                    { date: '2021-03-14', event: 'Series H at $95B valuation', type: 'funding' }
                ],
                social: {
                    linkedin: 'https://linkedin.com/company/stripe',
                    twitter: 'https://twitter.com/stripe',
                    facebook: 'https://facebook.com/stripe',
                    instagram: 'https://instagram.com/stripe'
                }
            }
        ];

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            initializeAuth();
            loadInitialData();
            setupEventListeners();
        });

        // Authentication
        function initializeAuth() {
            const authButton = document.getElementById('authButton');
            const userProfile = document.getElementById('userProfile');
            const signOutButton = document.getElementById('signOutButton');

            authButton.addEventListener('click', signInWithGoogle);
            signOutButton.addEventListener('click', signOut);

            auth.onAuthStateChanged(user => {
                if (user) {
                    currentUser = user;
                    authButton.classList.add('hidden');
                    userProfile.classList.remove('hidden');
                    document.getElementById('userName').textContent = user.displayName;
                    document.getElementById('userPhoto').src = user.photoURL;
                    
                    // Show premium badge if user has premium
                    if (checkPremiumAccess()) {
                        document.getElementById('premiumBadge').classList.remove('hidden');
                    } else {
                        document.getElementById('premiumBadge').classList.add('hidden');
                    }
                } else {
                    currentUser = null;
                    authButton.classList.remove('hidden');
                    userProfile.classList.add('hidden');
                }
            });
        }

        function signInWithGoogle() {
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider).catch(error => {
                console.error('Sign in error:', error);
                alert('Sign in failed: ' + error.message);
            });
        }

        function signOut() {
            auth.signOut();
        }

        // Data Loading
        function loadInitialData() {
            // Load sample companies into Firestore
            sampleCompanies.forEach(company => {
                db.collection('companies').doc(company.id).set(company).then(() => {
                    console.log(`${company.name} added to Firestore`);
                }).catch(error => {
                    console.error(`Error adding ${company.name}:`, error);
                });
            });

            // Load sample people into Firestore
            samplePeople.forEach(person => {
                db.collection('people').doc(person.id).set(person).then(() => {
                    console.log(`${person.name} added to Firestore`);
                }).catch(error => {
                    console.error(`Error adding ${person.name}:`, error);
                });
            });

            // Load data from Firestore
            loadCompanies();
            loadPeople();
        }

        function loadCompanies() {
            db.collection('companies').onSnapshot(snapshot => {
                companies = [];
                snapshot.forEach(doc => {
                    companies.push({ id: doc.id, ...doc.data() });
                });
                updateUI();
            }, error => {
                console.error('Error loading companies:', error);
                // Use fallback data
                companies = sampleCompanies;
                updateUI();
            });
        }

        function loadPeople() {
            db.collection('people').onSnapshot(snapshot => {
                people = [];
                snapshot.forEach(doc => {
                    people.push({ id: doc.id, ...doc.data() });
                });
                updatePeopleUI();
            }, error => {
                console.error('Error loading people:', error);
                // Use fallback data
                people = samplePeople;
                updatePeopleUI();
            });
        }

        // UI Updates
        function updateUI() {
            updateStats();
            updateFeaturedCompanies();
            updateCompaniesGrid();
            updateRecentActivity();
        }

        function updatePeopleUI() {
            updatePeopleGrid();
            updatePeopleFilters();
        }

        function updatePeopleGrid() {
            const container = document.getElementById('peopleGrid');
            container.innerHTML = '';
            
            people.forEach(person => {
                const card = createPersonCard(person);
                container.appendChild(card);
            });
        }

        function updatePeopleFilters() {
            // Update company filter dropdown
            const companyFilter = document.getElementById('companyFilter');
            const personCompanySelect = document.getElementById('personCompany');
            const investmentTargetSelect = document.getElementById('investmentTargetCompany');
            
            // Clear existing options (keep first option)
            while (companyFilter.children.length > 1) {
                companyFilter.removeChild(companyFilter.lastChild);
            }
            while (personCompanySelect && personCompanySelect.children.length > 1) {
                personCompanySelect.removeChild(personCompanySelect.lastChild);
            }
            while (investmentTargetSelect && investmentTargetSelect.children.length > 1) {
                investmentTargetSelect.removeChild(investmentTargetSelect.lastChild);
            }
            
            // Add company options
            companies.forEach(company => {
                const option1 = document.createElement('option');
                option1.value = company.name;
                option1.textContent = company.name;
                companyFilter.appendChild(option1);
                
                if (personCompanySelect) {
                    const option2 = document.createElement('option');
                    option2.value = company.id;
                    option2.textContent = company.name;
                    personCompanySelect.appendChild(option2);
                }
                
                if (investmentTargetSelect) {
                    const option3 = document.createElement('option');
                    option3.value = company.id;
                    option3.textContent = company.name;
                    investmentTargetSelect.appendChild(option3);
                }
            });
        }

        function createPersonCard(person) {
            const card = document.createElement('div');
            card.className = 'bg-white rounded-xl shadow-md p-6 card-hover cursor-pointer border border-gray-100';
            card.onclick = () => showPersonDetail(person);
            
            const initials = person.name.split(' ').map(n => n[0]).join('');
            
            card.innerHTML = `
                <div class="flex items-start space-x-4 mb-4">
                    <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center">
                        <span class="text-white font-bold text-lg">${initials}</span>
                    </div>
                    <div class="flex-1 min-w-0">
                        <h3 class="text-lg font-semibold text-gray-900 truncate">${person.name}</h3>
                        <p class="text-gray-600 text-sm mb-1">${person.role}</p>
                        <p class="text-blue-600 text-sm font-medium">${person.company}</p>
                    </div>
                </div>
                <p class="text-gray-600 text-sm mb-4 line-clamp-2">${person.bio || 'No bio available'}</p>
                <div class="flex flex-wrap gap-2 mb-4">
                    <span class="px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs">${person.type}</span>
                    <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">${person.experience} exp</span>
                    ${person.location ? `<span class="px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs">${person.location.split(',')[0]}</span>` : ''}
                </div>
                <div class="flex justify-between items-center text-sm">
                    <span class="text-gray-500">${person.yearsExperience || 0} years experience</span>
                    <span class="text-blue-600 font-medium">${person.skills ? person.skills.length : 0} skills</span>
                </div>
            `;
            
            return card;
        }

        function updateStats() {
            document.getElementById('companyCount').textContent = companies.length;
            
            const totalFunding = companies.reduce((sum, c) => {
                const funding = parseFloat(c.totalFunding?.replace(/[$BM]/g, '') || 0);
                return sum + (c.totalFunding?.includes('B') ? funding * 1000 : funding);
            }, 0);
            document.getElementById('totalFunding').textContent = `$${totalFunding.toFixed(1)}B`;
            
            const totalPeople = companies.reduce((sum, c) => sum + (c.leadership ? c.leadership.length : 0), 0);
            document.getElementById('peopleCount').textContent = totalPeople;
            
            document.getElementById('investorCount').textContent = '150+';
        }

        function updateFeaturedCompanies() {
            const container = document.getElementById('featuredCompanies');
            container.innerHTML = '';
            
            companies.slice(0, 3).forEach(company => {
                const card = createCompanyCard(company);
                container.appendChild(card);
            });
        }

        function updateCompaniesGrid() {
            const container = document.getElementById('companiesGrid');
            container.innerHTML = '';
            
            companies.forEach(company => {
                const card = createCompanyCard(company);
                container.appendChild(card);
            });
        }

        function updateRecentActivity() {
            // Update recent funding
            const fundingContainer = document.getElementById('recentFunding');
            fundingContainer.innerHTML = '';
            
            companies.forEach(company => {
                if (company.fundingRounds && company.fundingRounds.length > 0) {
                    const latestRound = company.fundingRounds[0];
                    const item = document.createElement('div');
                    item.className = 'flex items-center space-x-3 p-3 bg-gray-50 rounded-lg';
                    item.innerHTML = `
                        <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-dollar-sign text-green-600"></i>
                        </div>
                        <div class="flex-1">
                            <p class="font-medium text-gray-900">${company.name}</p>
                            <p class="text-sm text-gray-600">${latestRound.round} â€¢ ${latestRound.amount}</p>
                        </div>
                        <span class="text-xs text-gray-500">${latestRound.date}</span>
                    `;
                    fundingContainer.appendChild(item);
                }
            });

            // Update recent news
            const newsContainer = document.getElementById('recentNews');
            newsContainer.innerHTML = '';
            
            companies.forEach(company => {
                if (company.news && company.news.length > 0) {
                    company.news.slice(0, 2).forEach(article => {
                        const item = document.createElement('div');
                        item.className = 'p-3 bg-gray-50 rounded-lg';
                        item.innerHTML = `
                            <h5 class="font-medium text-gray-900 mb-1">${article.title}</h5>
                            <p class="text-sm text-gray-600 mb-2">${article.summary}</p>
                            <div class="flex justify-between items-center">
                                <span class="text-xs text-blue-600">${company.name}</span>
                                <span class="text-xs text-gray-500">${article.date}</span>
                            </div>
                        `;
                        newsContainer.appendChild(item);
                    });
                }
            });
        }

        function createCompanyCard(company) {
            const card = document.createElement('div');
            card.className = 'bg-white rounded-xl shadow-md p-6 card-hover cursor-pointer border border-gray-100';
            card.onclick = () => showCompanyDetail(company);
            
            const statusClass = {
                'Active': 'status-active',
                'IPO': 'status-ipo',
                'Acquired': 'status-acquired',
                'Closed': 'status-closed'
            }[company.status] || 'status-active';
            
            card.innerHTML = `
                <div class="flex items-start justify-between mb-4">
                    <div class="flex items-start space-x-4">
                        <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center overflow-hidden">
                            ${company.logoUrl ? 
                                `<img src="${company.logoUrl}" alt="${company.name}" class="w-full h-full object-contain" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                 <span class="text-white font-bold text-xl hidden">${company.name.charAt(0)}</span>` :
                                `<span class="text-white font-bold text-xl">${company.name.charAt(0)}</span>`
                            }
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center space-x-2 mb-1">
                                <h3 class="text-lg font-semibold text-gray-900 truncate">${company.name}</h3>
                                ${company.rank ? `<span class="rank-badge text-white text-xs px-2 py-1 rounded-full">${company.rank}</span>` : ''}
                            </div>
                            <p class="text-gray-600 text-sm mb-2">${company.tagline || 'No tagline available'}</p>
                        </div>
                    </div>
                    <span class="px-2 py-1 ${statusClass} text-white text-xs rounded-full">${company.status}</span>
                </div>
                <p class="text-gray-600 text-sm mb-4 line-clamp-2">${company.description || 'No description available'}</p>
                <div class="flex flex-wrap gap-2 mb-4">
                    ${company.industry ? `<span class="px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs">${company.industry}</span>` : ''}
                    ${company.location ? `<span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">${company.location.split(',')[0]}</span>` : ''}
                    ${company.employees ? `<span class="px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs">${company.employees}</span>` : ''}
                </div>
                <div class="flex justify-between items-center text-sm mb-2">
                    <span class="text-gray-500">Founded ${company.founded || 'N/A'}</span>
                    <span class="text-blue-600 font-medium">${company.totalFunding || 'No funding data'}</span>
                </div>
                <div class="flex justify-between items-center text-xs text-gray-500 pt-2 border-t">
                    <span><i class="fas fa-eye mr-1"></i>${company.views || 0} views</span>
                    <span><i class="fas fa-edit mr-1"></i>${company.edits || 0} edits</span>
                    <span class="flex items-center">
                        <i class="fas fa-star mr-1 text-yellow-500"></i>
                        <span class="font-medium">${company.activityScore || 0}</span>
                    </span>
                </div>
            `;
            
            return card;
        }

        // Person Detail Modal
        function showPersonDetail(person) {
            currentPerson = person;
            const modal = document.getElementById('personModal');
            
            // Update header information
            const initials = person.name.split(' ').map(n => n[0]).join('');
            document.getElementById('modalPersonInitials').textContent = initials;
            document.getElementById('modalPersonName').textContent = person.name;
            document.getElementById('modalPersonRole').textContent = person.role;
            document.getElementById('modalPersonCompany').textContent = person.company;
            document.getElementById('modalPersonLocation').textContent = person.location || 'N/A';
            document.getElementById('modalPersonExperience').textContent = person.experience || 'N/A';
            document.getElementById('modalPersonType').textContent = person.type;
            
            // Update links
            if (person.social?.linkedin) {
                const linkedinLink = document.getElementById('modalPersonLinkedIn');
                linkedinLink.href = person.social.linkedin;
                linkedinLink.style.display = 'inline';
            }
            
            if (person.social?.twitter) {
                const twitterLink = document.getElementById('modalPersonTwitter');
                twitterLink.href = person.social.twitter;
                twitterLink.style.display = 'inline';
            }
            
            if (person.email) {
                const emailLink = document.getElementById('modalPersonEmail');
                emailLink.href = `mailto:${person.email}`;
                emailLink.style.display = 'inline';
            }
            
            // Show edit button if user is signed in (allow all signed-in users to edit)
            if (currentUser) {
                document.getElementById('editPersonBtn').classList.remove('hidden');
            } else {
                document.getElementById('editPersonBtn').classList.add('hidden');
            }
            
            // Update all tab content
            updatePersonProfileTab(person);
            updatePersonExperienceTab(person);
            updatePersonEducationTab(person);
            updatePersonAchievementsTab(person);
            updatePersonNetworkTab(person);
            
            modal.classList.remove('hidden');
            showPersonTab('profile');
        }

        function updatePersonProfileTab(person) {
            document.getElementById('modalPersonBio').textContent = person.bio || 'No bio available';
            document.getElementById('modalPersonYearsExp').textContent = person.yearsExperience || 0;
            document.getElementById('modalPersonCompaniesWorked').textContent = person.companiesWorked || 0;
            document.getElementById('modalPersonProjects').textContent = person.notableProjects || 0;
            
            // Update skills
            const skillsContainer = document.getElementById('modalPersonSkills');
            skillsContainer.innerHTML = '';
            if (person.skills && person.skills.length > 0) {
                person.skills.forEach(skill => {
                    const skillElement = document.createElement('span');
                    skillElement.className = 'px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm';
                    skillElement.textContent = skill;
                    skillsContainer.appendChild(skillElement);
                });
            } else {
                skillsContainer.innerHTML = '<span class="text-gray-500">No skills listed</span>';
            }
            
            // Update responsibilities
            const responsibilitiesContainer = document.getElementById('modalPersonResponsibilities');
            responsibilitiesContainer.innerHTML = '';
            if (person.responsibilities && person.responsibilities.length > 0) {
                person.responsibilities.forEach(responsibility => {
                    const respElement = document.createElement('div');
                    respElement.className = 'text-sm text-gray-700 flex items-start';
                    respElement.innerHTML = `<i class="fas fa-check-circle text-green-500 mr-2 mt-1"></i>${responsibility}`;
                    responsibilitiesContainer.appendChild(respElement);
                });
            } else {
                responsibilitiesContainer.innerHTML = '<div class="text-gray-500">No responsibilities listed</div>';
            }
        }

        function updatePersonExperienceTab(person) {
            const container = document.getElementById('modalPersonExperienceList');
            container.innerHTML = '';
            
            if (person.workExperience && person.workExperience.length > 0) {
                person.workExperience.forEach(exp => {
                    const expCard = document.createElement('div');
                    expCard.className = 'p-4 bg-gray-50 rounded-lg';
                    expCard.innerHTML = `
                        <div class="flex justify-between items-start mb-2">
                            <h5 class="font-medium text-gray-900">${exp.role}</h5>
                            <span class="text-sm text-gray-500">${exp.duration}</span>
                        </div>
                        <p class="text-blue-600 text-sm mb-2">${exp.company}</p>
                        <p class="text-gray-600 text-sm">${exp.description}</p>
                    `;
                    container.appendChild(expCard);
                });
            } else {
                container.innerHTML = '<p class="text-gray-500">No work experience available</p>';
            }
        }

        function updatePersonEducationTab(person) {
            const container = document.getElementById('modalPersonEducationList');
            container.innerHTML = '';
            
            if (person.education && person.education.length > 0) {
                person.education.forEach(edu => {
                    const eduCard = document.createElement('div');
                    eduCard.className = 'p-4 bg-gray-50 rounded-lg';
                    eduCard.innerHTML = `
                        <div class="flex justify-between items-start mb-2">
                            <h5 class="font-medium text-gray-900">${edu.degree}</h5>
                            <span class="text-sm text-gray-500">${edu.year}</span>
                        </div>
                        <p class="text-blue-600 text-sm">${edu.institution}</p>
                    `;
                    container.appendChild(eduCard);
                });
            } else {
                container.innerHTML = '<p class="text-gray-500">No education information available</p>';
            }
        }

        function updatePersonAchievementsTab(person) {
            // Awards
            const awardsContainer = document.getElementById('modalPersonAwards');
            awardsContainer.innerHTML = '';
            
            if (person.awards && person.awards.length > 0) {
                person.awards.forEach(award => {
                    const awardCard = document.createElement('div');
                    awardCard.className = 'p-4 bg-yellow-50 rounded-lg';
                    awardCard.innerHTML = `
                        <div class="flex items-start">
                            <i class="fas fa-trophy text-yellow-600 mr-3 mt-1"></i>
                            <div>
                                <h5 class="font-medium text-gray-900">${award.title}</h5>
                                <p class="text-sm text-gray-600 mb-1">${award.year}</p>
                                <p class="text-sm text-gray-700">${award.description}</p>
                            </div>
                        </div>
                    `;
                    awardsContainer.appendChild(awardCard);
                });
            } else {
                awardsContainer.innerHTML = '<p class="text-gray-500">No awards available</p>';
            }
            
            // Media mentions
            const mentionsContainer = document.getElementById('modalPersonMentions');
            mentionsContainer.innerHTML = '';
            
            if (person.mediaMentions && person.mediaMentions.length > 0) {
                person.mediaMentions.forEach(mention => {
                    const mentionCard = document.createElement('div');
                    mentionCard.className = 'p-4 bg-blue-50 rounded-lg';
                    mentionCard.innerHTML = `
                        <h5 class="font-medium text-gray-900 mb-1">${mention.title}</h5>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-blue-600">${mention.source}</span>
                            <span class="text-sm text-gray-500">${mention.date}</span>
                        </div>
                    `;
                    mentionsContainer.appendChild(mentionCard);
                });
            } else {
                mentionsContainer.innerHTML = '<p class="text-gray-500">No media mentions available</p>';
            }
        }

        function updatePersonNetworkTab(person) {
            const networkContainer = document.getElementById('modalPersonNetwork');
            const investmentsContainer = document.getElementById('modalPersonInvestments');
            
            networkContainer.innerHTML = '<p class="text-gray-500">Professional network information coming soon</p>';
            investmentsContainer.innerHTML = '<p class="text-gray-500">Investment and advisory information coming soon</p>';
        }

        function closePersonModal() {
            document.getElementById('personModal').classList.add('hidden');
        }

        function showPersonTab(tabName) {
            // Hide all person tabs
            document.querySelectorAll('.person-tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            // Remove active class from all person tab buttons
            document.querySelectorAll('#personModal nav button').forEach(btn => {
                btn.classList.remove('tab-active');
                btn.classList.add('border-transparent', 'text-gray-500');
            });
            
            // Show selected tab
            document.getElementById(tabName + 'PersonTab').classList.remove('hidden');
            
            // Add active class to selected tab button
            event.target.classList.add('tab-active');
            event.target.classList.remove('border-transparent', 'text-gray-500');
        }

        // Company Detail Modal
        function showCompanyDetail(company) {
            currentCompany = company;
            const modal = document.getElementById('companyModal');
            
            // Increment view count
            incrementViewCount(company.id, 'companies');
            
            // Update header information
            document.getElementById('modalCompanyName').textContent = company.name;
            document.getElementById('modalCompanyTagline').textContent = company.tagline || 'No tagline available';
            document.getElementById('modalCompanyIndustry').textContent = company.industry || 'N/A';
            document.getElementById('modalCompanyLocation').textContent = company.location || 'N/A';
            document.getElementById('modalCompanyFounded').textContent = `Founded ${company.founded || 'N/A'}`;
            
            // Update logo
            const logoImg = document.getElementById('modalCompanyLogoImg');
            const logoText = document.getElementById('modalCompanyLogo');
            if (company.logoUrl) {
                logoImg.src = company.logoUrl;
                logoImg.classList.remove('hidden');
                logoText.classList.add('hidden');
                logoImg.onerror = function() {
                    this.classList.add('hidden');
                    logoText.classList.remove('hidden');
                    logoText.textContent = company.name.charAt(0);
                };
            } else {
                logoImg.classList.add('hidden');
                logoText.classList.remove('hidden');
                logoText.textContent = company.name.charAt(0);
            }
            
            const statusElement = document.getElementById('modalCompanyStatus');
            statusElement.textContent = company.status;
            statusElement.className = `px-3 py-1 rounded-full text-sm font-medium ${
                company.status === 'Active' ? 'status-active' :
                company.status === 'IPO' ? 'status-ipo' :
                company.status === 'Acquired' ? 'status-acquired' : 'status-closed'
            } text-white`;
            
            if (company.rank) {
                document.getElementById('modalCompanyRank').textContent = company.rank;
            }
            
            // Update profile URL
            const profileUrl = `https://community.oriontec.xyz/BizIntel.html#${company.profileUrl || company.id}`;
            document.getElementById('profileShareUrl').value = profileUrl;
            
            // Update links
            if (company.website) {
                const websiteLink = document.getElementById('modalCompanyWebsite');
                websiteLink.href = company.website;
                websiteLink.style.display = 'inline';
            }
            
            if (company.social?.linkedin) {
                const linkedinLink = document.getElementById('modalCompanyLinkedIn');
                linkedinLink.href = company.social.linkedin;
                linkedinLink.style.display = 'inline';
            }
            
            if (company.social?.twitter) {
                const twitterLink = document.getElementById('modalCompanyTwitter');
                twitterLink.href = company.social.twitter;
                twitterLink.style.display = 'inline';
            }
            
            // Show edit button if user is signed in (allow all signed-in users to edit)
            if (currentUser) {
                document.getElementById('editCompanyBtn').classList.remove('hidden');
                document.getElementById('addInvestmentBtn').classList.remove('hidden');
            } else {
                document.getElementById('editCompanyBtn').classList.add('hidden');
                document.getElementById('addInvestmentBtn').classList.add('hidden');
            }
            
            // Update all tab content
            updateOverviewTab(company);
            updateFundingTab(company);
            updateLeadershipTab(company);
            updateAcquisitionsTab(company);
            updateTechnologyTab(company);
            updateNewsTab(company);
            updateCompetitorsTab(company);
            updateEventsTab(company);
            updateContactTab(company);
            
            modal.classList.remove('hidden');
            showTab('overview');
        }

        function updateOverviewTab(company) {
            document.getElementById('modalCompanyDescription').textContent = company.description || 'No description available';
            document.getElementById('modalCompanyLegalName').textContent = company.legalName || company.name;
            document.getElementById('modalCompanyType').textContent = company.type || 'N/A';
            document.getElementById('modalOperatingStatus').textContent = company.operatingStatus || 'N/A';
            document.getElementById('modalCompanyEmployees').textContent = company.employees || 'N/A';
            document.getElementById('modalTotalFunding').textContent = company.totalFunding || '$0';
            document.getElementById('modalFundingRounds').textContent = company.fundingRounds ? company.fundingRounds.length : '0';
            document.getElementById('modalValuation').textContent = company.latestValuation || 'N/A';
            
            // Update founders
            const foundersContainer = document.getElementById('modalFounders');
            foundersContainer.innerHTML = '';
            if (company.founders && company.founders.length > 0) {
                company.founders.forEach(founder => {
                    const founderElement = document.createElement('div');
                    founderElement.className = 'text-sm text-gray-900';
                    founderElement.textContent = founder;
                    foundersContainer.appendChild(founderElement);
                });
            } else {
                foundersContainer.innerHTML = '<div class="text-sm text-gray-500">No founder information available</div>';
            }
            
            // Update alternate names
            const alternateNamesContainer = document.getElementById('modalAlternateNames');
            alternateNamesContainer.innerHTML = '';
            if (company.alternateNames && company.alternateNames.length > 0) {
                company.alternateNames.forEach(name => {
                    const nameElement = document.createElement('span');
                    nameElement.className = 'px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs';
                    nameElement.textContent = name;
                    alternateNamesContainer.appendChild(nameElement);
                });
            } else {
                alternateNamesContainer.innerHTML = '<span class="text-sm text-gray-500">No alternate names</span>';
            }
        }

        function updateFundingTab(company) {
            // Update funding metrics
            document.getElementById('fundingTotalAmount').textContent = company.totalFunding || '$0';
            
            if (company.fundingRounds && company.fundingRounds.length > 0) {
                const latestRound = company.fundingRounds[0];
                document.getElementById('fundingLatestRound').textContent = latestRound.round;
                document.getElementById('fundingLatestDate').textContent = latestRound.date;
                document.getElementById('fundingLeadInvestors').textContent = latestRound.leadInvestors;
            }
            
            // Update funding table
            const table = document.getElementById('fundingRoundsTable');
            table.innerHTML = '';
            
            if (company.fundingRounds && company.fundingRounds.length > 0) {
                company.fundingRounds.forEach(round => {
                    const row = document.createElement('tr');
                    const isPremium = checkPremiumAccess();
                    const leadInvestors = isPremium ? round.leadInvestors : maskContactInfo(round.leadInvestors, 'investor');
                    
                    row.innerHTML = `
                        <td class="px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap text-xs sm:text-sm font-medium text-gray-900">${round.round}</td>
                        <td class="px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900">${round.amount}</td>
                        <td class="px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900 hidden sm:table-cell">${round.date}</td>
                        <td class="px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900 hidden md:table-cell ${!isPremium ? 'premium-blur cursor-pointer' : ''}" ${!isPremium ? 'onclick="showPremiumUpgrade(\'investor details\')"' : ''}>${leadInvestors}</td>
                        <td class="px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900 hidden lg:table-cell">${round.valuation || 'N/A'}</td>
                    `;
                    table.appendChild(row);
                });
            } else {
                const row = document.createElement('tr');
                row.innerHTML = '<td colspan="5" class="px-3 sm:px-6 py-3 sm:py-4 text-center text-gray-500 text-xs sm:text-sm">No funding rounds available</td>';
                table.appendChild(row);
            }
            
            // Update funding chart
            updateFundingChart(company);
        }

        function updateFundingChart(company) {
            const ctx = document.getElementById('fundingChart').getContext('2d');
            
            if (fundingChart) {
                fundingChart.destroy();
            }
            
            if (company.fundingRounds && company.fundingRounds.length > 0) {
                const labels = company.fundingRounds.map(round => round.round).reverse();
                const data = company.fundingRounds.map(round => {
                    const amount = parseFloat(round.amount.replace(/[$BM]/g, ''));
                    return round.amount.includes('B') ? amount * 1000 : amount;
                }).reverse();
                
                fundingChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Funding Amount (M)',
                            data: data,
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return '$' + value + 'M';
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }

        function updateLeadershipTab(company) {
            // Current leadership
            const currentContainer = document.getElementById('currentLeadershipGrid');
            currentContainer.innerHTML = '';
            
            if (company.leadership) {
                const currentLeaders = company.leadership.filter(leader => leader.type === 'current');
                currentLeaders.forEach(leader => {
                    const card = createLeaderCard(leader);
                    currentContainer.appendChild(card);
                });
            }
            
            // Board members
            const boardContainer = document.getElementById('boardMembersGrid');
            boardContainer.innerHTML = '';
            
            if (company.boardMembers) {
                company.boardMembers.forEach(member => {
                    const card = createLeaderCard(member);
                    boardContainer.appendChild(card);
                });
            }
            
            // Past leadership
            const pastContainer = document.getElementById('pastLeadershipGrid');
            pastContainer.innerHTML = '';
            
            if (company.leadership) {
                const pastLeaders = company.leadership.filter(leader => leader.type === 'past');
                pastLeaders.forEach(leader => {
                    const card = createLeaderCard(leader);
                    pastContainer.appendChild(card);
                });
            }
        }

        function createLeaderCard(leader) {
            const card = document.createElement('div');
            card.className = 'flex items-center space-x-3 p-4 bg-gray-50 rounded-lg';
            card.innerHTML = `
                <div class="w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center">
                    <span class="text-white font-semibold text-sm">${leader.name.split(' ').map(n => n[0]).join('')}</span>
                </div>
                <div>
                    <h5 class="font-medium text-gray-900">${leader.name}</h5>
                    <p class="text-sm text-gray-600">${leader.position}</p>
                </div>
            `;
            return card;
        }

        function updateAcquisitionsTab(company) {
            const acquiredContainer = document.getElementById('companiesAcquiredGrid');
            const detailsContainer = document.getElementById('acquisitionDetailsGrid');
            
            acquiredContainer.innerHTML = '';
            detailsContainer.innerHTML = '';
            
            if (company.acquisitions && company.acquisitions.length > 0) {
                company.acquisitions.forEach(acquisition => {
                    // Company card
                    const companyCard = document.createElement('div');
                    companyCard.className = 'p-4 bg-gray-50 rounded-lg';
                    companyCard.innerHTML = `
                        <h5 class="font-medium text-gray-900 mb-2">${acquisition.company}</h5>
                        <p class="text-sm text-gray-600 mb-2">${acquisition.description}</p>
                        <p class="text-xs text-gray-500">${acquisition.date}</p>
                    `;
                    acquiredContainer.appendChild(companyCard);
                    
                    // Details card
                    const detailCard = document.createElement('div');
                    detailCard.className = 'p-4 bg-blue-50 rounded-lg';
                    detailCard.innerHTML = `
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm font-medium text-gray-600">Amount:</span>
                            <span class="text-sm font-semibold text-blue-600">${acquisition.amount}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm font-medium text-gray-600">Date:</span>
                            <span class="text-sm text-gray-900">${acquisition.date}</span>
                        </div>
                    `;
                    detailsContainer.appendChild(detailCard);
                });
            } else {
                acquiredContainer.innerHTML = '<p class="text-gray-500">No acquisitions available</p>';
                detailsContainer.innerHTML = '<p class="text-gray-500">No acquisition details available</p>';
            }
        }

        function updateTechnologyTab(company) {
            // Products
            const productsContainer = document.getElementById('productsGrid');
            productsContainer.innerHTML = '';
            
            if (company.products && company.products.length > 0) {
                company.products.forEach(product => {
                    const card = document.createElement('div');
                    card.className = 'p-4 bg-gray-50 rounded-lg';
                    card.innerHTML = `
                        <h5 class="font-medium text-gray-900 mb-2">${product.name}</h5>
                        <p class="text-sm text-gray-600">${product.description}</p>
                    `;
                    productsContainer.appendChild(card);
                });
            } else {
                productsContainer.innerHTML = '<p class="text-gray-500">No products information available</p>';
            }
            
            // Technology stack
            const techContainer = document.getElementById('technologyStackGrid');
            techContainer.innerHTML = '';
            
            if (company.technologyStack && company.technologyStack.length > 0) {
                company.technologyStack.forEach(tech => {
                    const card = document.createElement('div');
                    card.className = 'p-4 bg-blue-50 rounded-lg';
                    card.innerHTML = `
                        <h5 class="font-medium text-gray-900 mb-2">${tech.name}</h5>
                        <p class="text-sm text-gray-600">${tech.description}</p>
                    `;
                    techContainer.appendChild(card);
                });
            } else {
                techContainer.innerHTML = '<p class="text-gray-500">No technology stack information available</p>';
            }
            
            // Customers
            const customersContainer = document.getElementById('customersGrid');
            customersContainer.innerHTML = '';
            
            if (company.customers && company.customers.length > 0) {
                company.customers.forEach(customer => {
                    const card = document.createElement('div');
                    card.className = 'p-3 bg-green-50 rounded-lg text-center';
                    card.innerHTML = `<span class="text-sm font-medium text-green-800">${customer}</span>`;
                    customersContainer.appendChild(card);
                });
            } else {
                customersContainer.innerHTML = '<p class="text-gray-500 col-span-4">No customer information available</p>';
            }
        }

        function updateNewsTab(company) {
            // News articles
            const newsContainer = document.getElementById('newsGrid');
            newsContainer.innerHTML = '';
            
            if (company.news && company.news.length > 0) {
                company.news.forEach(article => {
                    const card = document.createElement('div');
                    card.className = 'p-6 bg-gray-50 rounded-lg';
                    card.innerHTML = `
                        <h5 class="font-medium text-gray-900 mb-2">${article.title}</h5>
                        <p class="text-sm text-gray-600 mb-3">${article.summary}</p>
                        <p class="text-xs text-gray-500">${article.date}</p>
                    `;
                    newsContainer.appendChild(card);
                });
            } else {
                newsContainer.innerHTML = '<p class="text-gray-500">No news articles available</p>';
            }
            
            // Press releases
            const pressContainer = document.getElementById('pressReleasesGrid');
            pressContainer.innerHTML = '';
            
            if (company.pressReleases && company.pressReleases.length > 0) {
                company.pressReleases.forEach(release => {
                    const card = document.createElement('div');
                    card.className = 'p-4 bg-blue-50 rounded-lg';
                    card.innerHTML = `
                        <h5 class="font-medium text-gray-900 mb-2">${release.title}</h5>
                        <p class="text-xs text-gray-500">${release.date}</p>
                    `;
                    pressContainer.appendChild(card);
                });
            } else {
                pressContainer.innerHTML = '<p class="text-gray-500">No press releases available</p>';
            }
        }

        function updateCompetitorsTab(company) {
            // Direct competitors
            const competitorsContainer = document.getElementById('competitorsGrid');
            competitorsContainer.innerHTML = '';
            
            if (company.competitors && company.competitors.length > 0) {
                company.competitors.forEach(competitor => {
                    const card = document.createElement('div');
                    card.className = 'p-4 bg-red-50 rounded-lg text-center';
                    card.innerHTML = `
                        <div class="w-12 h-12 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-2">
                            <span class="text-white font-semibold">${competitor.charAt(0)}</span>
                        </div>
                        <h5 class="font-medium text-gray-900">${competitor}</h5>
                        <p class="text-xs text-gray-500">Direct Competitor</p>
                    `;
                    competitorsContainer.appendChild(card);
                });
            } else {
                competitorsContainer.innerHTML = '<p class="text-gray-500 col-span-3">No competitors information available</p>';
            }
            
            // Similar companies
            const similarContainer = document.getElementById('similarCompaniesGrid');
            similarContainer.innerHTML = '';
            
            if (company.similarCompanies && company.similarCompanies.length > 0) {
                company.similarCompanies.forEach(similar => {
                    const card = document.createElement('div');
                    card.className = 'p-4 bg-orange-50 rounded-lg text-center';
                    card.innerHTML = `
                        <div class="w-12 h-12 bg-orange-500 rounded-full flex items-center justify-center mx-auto mb-2">
                            <span class="text-white font-semibold">${similar.charAt(0)}</span>
                        </div>
                        <h5 class="font-medium text-gray-900">${similar}</h5>
                        <p class="text-xs text-gray-500">Similar Company</p>
                    `;
                    similarContainer.appendChild(card);
                });
            } else {
                similarContainer.innerHTML = '<p class="text-gray-500 col-span-3">No similar companies information available</p>';
            }
        }

        function updateEventsTab(company) {
            const timelineContainer = document.getElementById('timelineGrid');
            timelineContainer.innerHTML = '';
            
            if (company.timeline && company.timeline.length > 0) {
                company.timeline.forEach((event, index) => {
                    const item = document.createElement('div');
                    item.className = 'relative pb-8 timeline-item';
                    
                    const typeColors = {
                        'founding': 'bg-green-500',
                        'product': 'bg-blue-500',
                        'funding': 'bg-purple-500',
                        'acquisition': 'bg-orange-500',
                        'milestone': 'bg-red-500'
                    };
                    
                    item.innerHTML = `
                        <div class="timeline-dot ${typeColors[event.type] || 'bg-gray-500'}"></div>
                        <div class="ml-8">
                            <div class="flex items-center space-x-2 mb-1">
                                <h5 class="font-medium text-gray-900">${event.event}</h5>
                                <span class="px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs capitalize">${event.type}</span>
                            </div>
                            <p class="text-sm text-gray-500">${event.date}</p>
                        </div>
                    `;
                    
                    if (index === company.timeline.length - 1) {
                        item.classList.remove('timeline-item');
                    }
                    
                    timelineContainer.appendChild(item);
                });
            } else {
                timelineContainer.innerHTML = '<p class="text-gray-500">No timeline events available</p>';
            }
        }

        function updateContactTab(company) {
            const isPremium = checkPremiumAccess();
            
            // Apply premium masking to contact information
            const address = company.headquarters?.address || company.address || 'N/A';
            const phone = company.phone || 'N/A';
            const email = company.email || 'N/A';
            const investorEmail = company.investorEmail || 'N/A';
            
            document.getElementById('modalCompanyAddress').textContent = isPremium ? address : maskContactInfo(address, 'address');
            document.getElementById('modalCompanyPhone').textContent = isPremium ? phone : maskContactInfo(phone, 'phone');
            document.getElementById('modalCompanyEmail').textContent = isPremium ? email : maskContactInfo(email, 'email');
            document.getElementById('modalInvestorEmail').textContent = isPremium ? investorEmail : maskContactInfo(investorEmail, 'email');
            
            // Add premium overlay if not premium user
            if (!isPremium) {
                const contactElements = [
                    document.getElementById('modalCompanyAddress').parentElement,
                    document.getElementById('modalCompanyPhone').parentElement,
                    document.getElementById('modalCompanyEmail').parentElement,
                    document.getElementById('modalInvestorEmail').parentElement
                ];
                
                contactElements.forEach(element => {
                    element.classList.add('premium-overlay');
                    element.style.cursor = 'pointer';
                    element.onclick = () => showPremiumUpgrade('full contact information');
                });
            }
            
            // Update map link
            if (company.headquarters?.mapUrl) {
                const mapLink = document.getElementById('modalCompanyMapLink');
                mapLink.href = company.headquarters.mapUrl;
                mapLink.style.display = 'inline-flex';
            }
            
            // Update activity stats
            document.getElementById('modalCompanyViews').textContent = company.views || 0;
            document.getElementById('modalCompanyEdits').textContent = company.edits || 0;
            document.getElementById('modalCompanyScore').textContent = company.activityScore || 0;
            document.getElementById('modalCompanyUpdated').textContent = company.lastUpdated || 'Never';
            
            // Social media links
            const socialContainer = document.getElementById('modalCompanySocial');
            socialContainer.innerHTML = '';
            
            if (company.social) {
                Object.entries(company.social).forEach(([platform, url]) => {
                    const link = document.createElement('div');
                    link.className = 'flex items-center space-x-2 mb-2';
                    
                    const iconClass = {
                        'linkedin': 'fab fa-linkedin text-blue-600',
                        'twitter': 'fab fa-twitter text-blue-400',
                        'facebook': 'fab fa-facebook text-blue-800',
                        'instagram': 'fab fa-instagram text-pink-600'
                    }[platform] || 'fas fa-link text-gray-600';
                    
                    link.innerHTML = `
                        <i class="${iconClass}"></i>
                        <a href="${url}" target="_blank" class="text-blue-600 hover:text-blue-800 text-sm">${platform.charAt(0).toUpperCase() + platform.slice(1)}</a>
                    `;
                    socialContainer.appendChild(link);
                });
            } else {
                socialContainer.innerHTML = '<p class="text-gray-500">No social media links available</p>';
            }
        }

        // Utility Functions
        function incrementViewCount(id, collection) {
            if (!currentUser) return;
            
            db.collection(collection).doc(id).update({
                views: firebase.firestore.FieldValue.increment(1),
                lastViewed: new Date().toISOString()
            }).catch(error => {
                console.log('Error updating view count:', error);
            });
        }

        function isUserAuthorizedToEdit(company) {
            // Check if user is a founder or current leadership
            if (company.leadership) {
                return company.leadership.some(leader => 
                    leader.type === 'current' && 
                    currentUser.email && 
                    (leader.name.toLowerCase().includes(currentUser.displayName?.toLowerCase() || '') ||
                     currentUser.email.includes(leader.name.toLowerCase().replace(' ', '.')))
                );
            }
            return false;
        }

        function copyProfileUrl() {
            const urlInput = document.getElementById('profileShareUrl');
            urlInput.select();
            urlInput.setSelectionRange(0, 99999);
            
            try {
                document.execCommand('copy');
                // Show success message
                const button = event.target.closest('button');
                const originalHTML = button.innerHTML;
                button.innerHTML = '<i class="fas fa-check"></i>';
                button.classList.add('bg-green-600');
                button.classList.remove('bg-blue-600');
                
                setTimeout(() => {
                    button.innerHTML = originalHTML;
                    button.classList.remove('bg-green-600');
                    button.classList.add('bg-blue-600');
                }, 2000);
            } catch (err) {
                console.error('Failed to copy URL:', err);
            }
        }

        function calculateActivityScore(company) {
            let score = 0;
            
            // Base score for having complete profile
            if (company.description) score += 10;
            if (company.website) score += 5;
            if (company.social && Object.keys(company.social).length > 0) score += 5;
            
            // Views contribution (max 30 points)
            const viewScore = Math.min(30, (company.views || 0) / 100);
            score += viewScore;
            
            // Edits contribution (max 20 points)
            const editScore = Math.min(20, (company.edits || 0) * 2);
            score += editScore;
            
            // Recent activity bonus (max 15 points)
            if (company.lastUpdated) {
                const daysSinceUpdate = (new Date() - new Date(company.lastUpdated)) / (1000 * 60 * 60 * 24);
                if (daysSinceUpdate < 7) score += 15;
                else if (daysSinceUpdate < 30) score += 10;
                else if (daysSinceUpdate < 90) score += 5;
            }
            
            // Funding data bonus (max 10 points)
            if (company.fundingRounds && company.fundingRounds.length > 0) score += 10;
            
            return Math.min(100, Math.round(score));
        }

        function updateCompanyRanking() {
            // Calculate activity scores and update rankings
            companies.forEach(company => {
                company.activityScore = calculateActivityScore(company);
            });
            
            // Sort by activity score
            companies.sort((a, b) => (b.activityScore || 0) - (a.activityScore || 0));
            
            // Update rankings
            companies.forEach((company, index) => {
                company.rank = `#${index + 1}`;
                
                // Update in Firestore
                db.collection('companies').doc(company.id).update({
                    rank: company.rank,
                    activityScore: company.activityScore
                }).catch(error => {
                    console.log('Error updating ranking:', error);
                });
            });
        }

        function closeCompanyModal() {
            document.getElementById('companyModal').classList.add('hidden');
            if (fundingChart) {
                fundingChart.destroy();
                fundingChart = null;
            }
        }

        // Tab Management
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            // Remove active class from all tab buttons
            document.querySelectorAll('nav button').forEach(btn => {
                btn.classList.remove('tab-active');
                btn.classList.add('border-transparent', 'text-gray-500');
            });
            
            // Show selected tab
            document.getElementById(tabName + 'Tab').classList.remove('hidden');
            
            // Add active class to selected tab button
            event.target.classList.add('tab-active');
            event.target.classList.remove('border-transparent', 'text-gray-500');
        }

        // Modal Management
        function showAddPersonModal() {
            if (!currentUser) {
                alert('Please sign in with Google to add people');
                return;
            }
            document.getElementById('addPersonModal').classList.remove('hidden');
        }

        function closeAddPersonModal() {
            document.getElementById('addPersonModal').classList.add('hidden');
            document.getElementById('addPersonForm').reset();
            // Reset modal title
            document.querySelector('#addPersonModal h3').textContent = 'Add New Person';
            document.querySelector('#addPersonForm button[type="submit"]').textContent = 'Add Person';
        }
        
        function editPerson(person) {
            // Populate form with existing data
            document.getElementById('personFirstName').value = person.firstName || person.name?.split(' ')[0] || '';
            document.getElementById('personLastName').value = person.lastName || person.name?.split(' ').slice(1).join(' ') || '';
            document.getElementById('personName').value = person.name || '';
            document.getElementById('personEmail').value = person.email || '';
            document.getElementById('personRole').value = person.role || '';
            document.getElementById('personCompany').value = person.companyId || '';
            document.getElementById('personLocation').value = person.location || '';
            document.getElementById('personType').value = person.type || 'Employee';
            document.getElementById('personExperience').value = person.experience || '';
            document.getElementById('personBio').value = person.bio || '';
            document.getElementById('personSkills').value = person.skills?.join(', ') || '';
            document.getElementById('personResponsibilities').value = person.responsibilities?.join('\n') || '';
            document.getElementById('personLinkedIn').value = person.social?.linkedin || '';
            document.getElementById('personTwitter').value = person.social?.twitter || '';
            document.getElementById('personGender').value = person.gender || '';
            document.getElementById('personAlsoKnownAs').value = person.alsoKnownAs || '';
            
            // Update modal title and button
            document.querySelector('#addPersonModal h3').textContent = 'Edit Person';
            document.querySelector('#addPersonForm button[type="submit"]').textContent = 'Update Person';
            
            // Show modal
            document.getElementById('addPersonModal').classList.remove('hidden');
        }

        function showAddInvestmentModal() {
            if (!currentUser) {
                alert('Please sign in to add investments');
                return;
            }
            document.getElementById('addInvestmentModal').classList.remove('hidden');
        }

        function closeAddInvestmentModal() {
            document.getElementById('addInvestmentModal').classList.add('hidden');
            document.getElementById('addInvestmentForm').reset();
        }

        function showAddCompanyModal() {
            if (!currentUser) {
                alert('Please sign in with Google to add companies');
                return;
            }
            // Update company dropdown in person form
            updatePeopleFilters();
            document.getElementById('addCompanyModal').classList.remove('hidden');
        }

        function closeAddCompanyModal() {
            document.getElementById('addCompanyModal').classList.add('hidden');
            document.getElementById('addCompanyForm').reset();
            // Reset modal title
            document.querySelector('#addCompanyModal h3').textContent = 'Add New Company';
            document.querySelector('#addCompanyForm button[type="submit"]').textContent = 'Add Company';
        }
        
        function editCompany(company) {
            // Populate form with existing data
            document.getElementById('companyName').value = company.name || '';
            document.getElementById('companyLegalName').value = company.legalName || '';
            document.getElementById('companyTagline').value = company.tagline || '';
            document.getElementById('companyDescription').value = company.description || '';
            document.getElementById('companyIndustry').value = company.industry || '';
            document.getElementById('companyFounded').value = company.founded || '';
            document.getElementById('companyEmployees').value = company.employees || '';
            document.getElementById('companyLocation').value = company.location || '';
            document.getElementById('companyWebsite').value = company.website || '';
            document.getElementById('companyContactEmail').value = company.email || '';
            document.getElementById('companyPhone').value = company.phone || '';
            document.getElementById('companyType').value = company.type || 'Private';
            document.getElementById('companyStatus').value = company.status || 'Active';
            document.getElementById('companyAddress').value = company.headquarters?.address || company.address || '';
            document.getElementById('companyDiversity').value = company.diversitySpotlight?.join(', ') || '';
            document.getElementById('companyLinkedIn').value = company.social?.linkedin || '';
            document.getElementById('companyTwitter').value = company.social?.twitter || '';
            document.getElementById('companyFacebook').value = company.social?.facebook || '';
            
            // Update modal title and button
            document.querySelector('#addCompanyModal h3').textContent = 'Edit Company';
            document.querySelector('#addCompanyForm button[type="submit"]').textContent = 'Update Company';
            
            // Show modal
            document.getElementById('addCompanyModal').classList.remove('hidden');
        }

        // Section Management
        function showSection(sectionName) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            document.getElementById(sectionName).classList.remove('hidden');
        }

        // People filtering functions
        function applyPeopleFilters() {
            const role = document.getElementById('roleFilter').value;
            const company = document.getElementById('companyFilter').value;
            const experience = document.getElementById('experienceFilter').value;
            
            let filteredPeople = people;
            
            if (role) {
                filteredPeople = filteredPeople.filter(p => p.role.toLowerCase().includes(role.toLowerCase()));
            }
            
            if (company) {
                filteredPeople = filteredPeople.filter(p => p.company === company);
            }
            
            if (experience) {
                filteredPeople = filteredPeople.filter(p => p.experience === experience);
            }
            
            const container = document.getElementById('peopleGrid');
            container.innerHTML = '';
            
            if (filteredPeople.length > 0) {
                filteredPeople.forEach(person => {
                    const card = createPersonCard(person);
                    container.appendChild(card);
                });
            } else {
                container.innerHTML = '<div class="col-span-full text-center py-12"><i class="fas fa-users text-4xl text-gray-300 mb-4"></i><p class="text-gray-500">No people found matching your filters.</p></div>';
            }
        }

        // Event Listeners
        function setupEventListeners() {
            // Add Person Form
            document.getElementById('addPersonForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (!currentUser) {
                    alert('Please sign in to add people');
                    return;
                }
                
                // Check if this is an edit or new person
                const isEdit = document.querySelector('#addPersonForm button[type="submit"]').textContent === 'Update Person';
                
                const personData = {
                    name: document.getElementById('personName').value,
                    firstName: document.getElementById('personFirstName').value,
                    lastName: document.getElementById('personLastName').value,
                    email: document.getElementById('personEmail').value,
                    role: document.getElementById('personRole').value,
                    companyId: document.getElementById('personCompany').value,
                    company: companies.find(c => c.id === document.getElementById('personCompany').value)?.name || '',
                    location: document.getElementById('personLocation').value,
                    type: document.getElementById('personType').value,
                    experience: document.getElementById('personExperience').value,
                    bio: document.getElementById('personBio').value,
                    skills: document.getElementById('personSkills').value.split(',').map(s => s.trim()).filter(s => s),
                    responsibilities: document.getElementById('personResponsibilities').value.split('\n').filter(r => r.trim()),
                    social: {
                        linkedin: document.getElementById('personLinkedIn').value,
                        twitter: document.getElementById('personTwitter').value
                    },
                    gender: document.getElementById('personGender').value,
                    alsoKnownAs: document.getElementById('personAlsoKnownAs').value,
                    yearsExperience: parseInt(document.getElementById('personExperience').value?.split('-')[0]) || 0,
                    companiesWorked: 1,
                    notableProjects: 0,
                    lastUpdated: new Date().toISOString()
                };
                
                if (isEdit && currentPerson) {
                    // Update existing person
                    db.collection('people').doc(currentPerson.id).update(personData).then(() => {
                        alert('Person updated successfully!');
                        closeAddPersonModal();
                        closePersonModal();
                    }).catch(error => {
                        console.error('Error updating person:', error);
                        alert('Error updating person: ' + error.message);
                    });
                } else {
                    // Add new person
                    personData.createdBy = currentUser.uid;
                    personData.createdAt = new Date().toISOString();
                    
                    db.collection('people').add(personData).then(() => {
                        alert('Person added successfully!');
                        closeAddPersonModal();
                    }).catch(error => {
                        console.error('Error adding person:', error);
                        alert('Error adding person: ' + error.message);
                    });
                }
            });

            // Add Investment Form
            document.getElementById('addInvestmentForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (!currentUser || !currentCompany) {
                    alert('Please sign in and select a company');
                    return;
                }
                
                const targetCompanyId = document.getElementById('investmentTargetCompany').value;
                const targetCompany = companies.find(c => c.id === targetCompanyId);
                
                if (!targetCompany) {
                    alert('Please select a valid target company');
                    return;
                }
                
                const investmentData = {
                    round: document.getElementById('investmentRound').value,
                    amount: document.getElementById('investmentAmount').value,
                    date: document.getElementById('investmentDate').value,
                    leadInvestors: currentCompany.name,
                    valuation: document.getElementById('investmentValuation').value || 'N/A',
                    type: document.getElementById('investmentType').value,
                    notes: document.getElementById('investmentNotes').value
                };
                
                // Add to target company's funding rounds
                const updatedFundingRounds = [...(targetCompany.fundingRounds || []), investmentData];
                
                // Update target company
                db.collection('companies').doc(targetCompanyId).update({
                    fundingRounds: updatedFundingRounds
                }).then(() => {
                    // Add to current company's investments made
                    const investmentMade = {
                        targetCompany: targetCompany.name,
                        targetCompanyId: targetCompanyId,
                        ...investmentData,
                        createdAt: new Date().toISOString()
                    };
                    
                    const updatedInvestments = [...(currentCompany.investmentsMade || []), investmentMade];
                    
                    return db.collection('companies').doc(currentCompany.id).update({
                        investmentsMade: updatedInvestments
                    });
                }).then(() => {
                    alert('Investment added successfully!');
                    closeAddInvestmentModal();
                    // Refresh the current company view
                    showCompanyDetail(currentCompany);
                }).catch(error => {
                    console.error('Error adding investment:', error);
                    alert('Error adding investment: ' + error.message);
                });
            });

            // Add Company Form
            document.getElementById('addCompanyForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (!currentUser) {
                    alert('Please sign in to add companies');
                    return;
                }
                
                // Check if this is an edit or new company
                const isEdit = document.querySelector('#addCompanyForm button[type="submit"]').textContent === 'Update Company';
                
                // Get profile types
                const profileTypes = [];
                if (document.getElementById('profileTypeCompany').checked) profileTypes.push('Company');
                if (document.getElementById('profileTypeInvestment').checked) profileTypes.push('Investment Firm');
                if (document.getElementById('profileTypeGovernment').checked) profileTypes.push('Government Entity');
                if (document.getElementById('profileTypeSchool').checked) profileTypes.push('School');
                
                // Generate profile URL
                const profileUrl = document.getElementById('companyName').value.toLowerCase()
                    .replace(/[^a-z0-9]/g, '-')
                    .replace(/-+/g, '-')
                    .replace(/^-|-$/g, '');
                
                const companyData = {
                    name: document.getElementById('companyName').value,
                    legalName: document.getElementById('companyLegalName').value || document.getElementById('companyName').value,
                    tagline: document.getElementById('companyTagline').value,
                    description: document.getElementById('companyDescription').value,
                    industry: document.getElementById('companyIndustry').value,
                    founded: parseInt(document.getElementById('companyFounded').value) || null,
                    employees: document.getElementById('companyEmployees').value,
                    location: document.getElementById('companyLocation').value,
                    website: document.getElementById('companyWebsite').value,
                    email: document.getElementById('companyContactEmail').value,
                    phone: document.getElementById('companyPhone').value,
                    type: document.getElementById('companyType').value,
                    status: document.getElementById('companyStatus').value,
                    operatingStatus: 'Active',
                    profileTypes: profileTypes,
                    profileUrl: profileUrl,
                    headquarters: {
                        address: document.getElementById('companyAddress').value,
                        mapUrl: document.getElementById('companyAddress').value ? 
                            `https://maps.google.com/?q=${encodeURIComponent(document.getElementById('companyAddress').value)}` : null
                    },
                    diversitySpotlight: document.getElementById('companyDiversity').value.split(',').map(s => s.trim()).filter(s => s),
                    social: {
                        linkedin: document.getElementById('companyLinkedIn').value,
                        twitter: document.getElementById('companyTwitter').value,
                        facebook: document.getElementById('companyFacebook').value
                    },
                    lastUpdated: new Date().toISOString()
                };
                
                if (isEdit && currentCompany) {
                    // Update existing company
                    companyData.edits = (currentCompany.edits || 0) + 1;
                    companyData.activityScore = calculateActivityScore({...currentCompany, ...companyData});
                    
                    db.collection('companies').doc(currentCompany.id).update(companyData).then(() => {
                        alert('Company updated successfully!');
                        closeAddCompanyModal();
                        closeCompanyModal();
                        setTimeout(updateCompanyRanking, 1000);
                    }).catch(error => {
                        console.error('Error updating company:', error);
                        alert('Error updating company: ' + error.message);
                    });
                } else {
                    // Add new company
                    companyData.createdBy = currentUser.uid;
                    companyData.createdAt = new Date().toISOString();
                    companyData.views = 0;
                    companyData.edits = 1;
                    companyData.activityScore = 0;
                    companyData.fundingRounds = [];
                    companyData.leadership = [];
                    companyData.news = [];
                    companyData.timeline = [
                        {
                            date: new Date().toISOString().split('T')[0],
                            event: 'Company added to BizIntel Pro',
                            type: 'milestone'
                        }
                    ];
                    
                    companyData.activityScore = calculateActivityScore(companyData);
                    
                    db.collection('companies').add(companyData).then(() => {
                        alert('Company added successfully!');
                        closeAddCompanyModal();
                        setTimeout(updateCompanyRanking, 1000);
                    }).catch(error => {
                        console.error('Error adding company:', error);
                        alert('Error adding company: ' + error.message);
                    });
                }
            });

            // Investment button
            document.getElementById('addInvestmentBtn').addEventListener('click', showAddInvestmentModal);
            
            // Edit company button
            document.getElementById('editCompanyBtn').addEventListener('click', function() {
                if (!currentUser || !currentCompany) {
                    alert('Please sign in to edit companies');
                    return;
                }
                editCompany(currentCompany);
            });
            
            // Edit person button
            document.getElementById('editPersonBtn').addEventListener('click', function() {
                if (!currentUser || !currentPerson) {
                    alert('Please sign in to edit people');
                    return;
                }
                editPerson(currentPerson);
            });

            // Global Search
            document.getElementById('globalSearch').addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                if (searchTerm.length > 2) {
                    performSearch(searchTerm);
                } else if (searchTerm.length === 0) {
                    updateCompaniesGrid();
                }
            });



            // Auto-generate full name
            document.getElementById('personFirstName').addEventListener('input', updateFullName);
            document.getElementById('personLastName').addEventListener('input', updateFullName);
            
            function updateFullName() {
                const firstName = document.getElementById('personFirstName').value;
                const lastName = document.getElementById('personLastName').value;
                const fullName = `${firstName} ${lastName}`.trim();
                document.getElementById('personName').value = fullName;
            }

            // Update company ranking periodically
            setInterval(updateCompanyRanking, 300000); // Every 5 minutes
        }

        function performSearch(searchTerm) {
            const filteredCompanies = companies.filter(company => 
                company.name.toLowerCase().includes(searchTerm) ||
                (company.description && company.description.toLowerCase().includes(searchTerm)) ||
                (company.industry && company.industry.toLowerCase().includes(searchTerm)) ||
                (company.tagline && company.tagline.toLowerCase().includes(searchTerm)) ||
                (company.location && company.location.toLowerCase().includes(searchTerm))
            );
            
            const container = document.getElementById('companiesGrid');
            container.innerHTML = '';
            
            if (filteredCompanies.length > 0) {
                filteredCompanies.forEach(company => {
                    const card = createCompanyCard(company);
                    container.appendChild(card);
                });
            } else {
                container.innerHTML = '<div class="col-span-full text-center py-12"><i class="fas fa-search text-4xl text-gray-300 mb-4"></i><p class="text-gray-500">No companies found matching your search.</p></div>';
            }
        }

        function applyFilters() {
            const industry = document.getElementById('industryFilter').value;
            const location = document.getElementById('locationFilter').value;
            const employeeRange = document.getElementById('employeeFilter').value;
            const status = document.getElementById('statusFilter').value;
            
            let filteredCompanies = companies;
            
            if (industry) {
                filteredCompanies = filteredCompanies.filter(c => c.industry === industry);
            }
            
            if (location) {
                filteredCompanies = filteredCompanies.filter(c => c.location && c.location.includes(location));
            }
            
            if (employeeRange) {
                filteredCompanies = filteredCompanies.filter(c => c.employees === employeeRange);
            }
            
            if (status) {
                filteredCompanies = filteredCompanies.filter(c => c.status === status);
            }
            
            const container = document.getElementById('companiesGrid');
            container.innerHTML = '';
            
            if (filteredCompanies.length > 0) {
                filteredCompanies.forEach(company => {
                    const card = createCompanyCard(company);
                    container.appendChild(card);
                });
            } else {
                container.innerHTML = '<div class="col-span-full text-center py-12"><i class="fas fa-filter text-4xl text-gray-300 mb-4"></i><p class="text-gray-500">No companies found matching your filters.</p></div>';
            }
        }

        // Mobile menu functionality
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('hidden');
        }

        function toggleMobileSearch() {
            const overlay = document.getElementById('mobileSearchOverlay');
            overlay.classList.toggle('hidden');
            if (!overlay.classList.contains('hidden')) {
                document.getElementById('mobileGlobalSearch').focus();
            }
        }

        // Mobile menu event listeners
        document.getElementById('mobileMenuBtn').addEventListener('click', toggleMobileMenu);
        document.getElementById('mobileSearchBtn').addEventListener('click', toggleMobileSearch);
        document.getElementById('closeMobileSearch').addEventListener('click', toggleMobileSearch);

        // Mobile search functionality
        document.getElementById('mobileGlobalSearch').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            if (searchTerm.length > 2) {
                performSearch(searchTerm);
                toggleMobileSearch(); // Close search overlay
                showSection('companies'); // Show companies section
            }
        });

        // Touch gesture support for tab navigation
        let touchStartX = 0;
        let touchEndX = 0;

        function handleTabSwipe() {
            const swipeThreshold = 50;
            const swipeDistance = touchEndX - touchStartX;
            
            if (Math.abs(swipeDistance) > swipeThreshold) {
                const activeTab = document.querySelector('.tab-active');
                if (activeTab) {
                    const tabs = Array.from(activeTab.parentElement.children);
                    const currentIndex = tabs.indexOf(activeTab);
                    
                    if (swipeDistance > 0 && currentIndex > 0) {
                        // Swipe right - previous tab
                        tabs[currentIndex - 1].click();
                    } else if (swipeDistance < 0 && currentIndex < tabs.length - 1) {
                        // Swipe left - next tab
                        tabs[currentIndex + 1].click();
                    }
                }
            }
        }

        // Add touch event listeners to modal content
        document.addEventListener('touchstart', function(e) {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', function(e) {
            touchEndX = e.changedTouches[0].screenX;
            if (document.getElementById('companyModal').classList.contains('hidden') === false ||
                document.getElementById('personModal').classList.contains('hidden') === false) {
                handleTabSwipe();
            }
        });

        // Premium system functions
        function checkPremiumAccess() {
            if (!currentUser) return false;
            return currentUser.customClaims?.premium === true || 
                   localStorage.getItem(`premium_${currentUser.uid}`) === 'true';
        }

        function maskContactInfo(info, type = 'email') {
            if (checkPremiumAccess()) return info;
            
            if (type === 'email') {
                const [username, domain] = info.split('@');
                return `${username.substring(0, 2)}***@${domain}`;
            } else if (type === 'phone') {
                return info.replace(/\d(?=\d{4})/g, '*');
            } else {
                return info.substring(0, 3) + '***';
            }
        }

        function showPremiumUpgrade(feature) {
            if (checkPremiumAccess()) return true;
            
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-xl max-w-md w-full p-6 text-center">
                    <div class="w-16 h-16 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-crown text-white text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-2">Premium Feature</h3>
                    <p class="text-gray-600 mb-4">Unlock ${feature} and advanced analytics with BizIntel Pro Premium</p>
                    
                    <div class="bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-4 mb-4 border-2 border-green-200">
                        <div class="flex items-center justify-center mb-2">
                            <span class="text-2xl font-bold text-green-600">$56</span>
                            <span class="text-lg text-gray-500 line-through ml-2">$99</span>
                            <span class="bg-red-500 text-white text-xs px-2 py-1 rounded-full ml-2">43% OFF</span>
                        </div>
                        <p class="text-sm text-gray-600">Limited Time Offer - Annual Plan</p>
                    </div>
                    
                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4 mb-4">
                        <h4 class="font-semibold text-gray-900 mb-2">Premium Features Include:</h4>
                        <ul class="text-sm text-gray-700 space-y-1">
                            <li>â€¢ Full contact information access</li>
                            <li>â€¢ Advanced company analytics</li>
                            <li>â€¢ Export data to CSV/PDF</li>
                            <li>â€¢ Priority customer support</li>
                            <li>â€¢ API access for integrations</li>
                            <li>â€¢ Custom reports and insights</li>
                        </ul>
                    </div>
                    <div class="flex space-x-3">
                        <button onclick="this.closest('.fixed').remove()" class="flex-1 px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300">
                            Maybe Later
                        </button>
                        <button onclick="upgradeToPremium()" class="flex-1 px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700">
                            Upgrade Now
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            return false;
        }

        function upgradeToPremium() {
            if (!currentUser) {
                alert('Please sign in first');
                return;
            }
            
            // Close current modal
            document.querySelector('.fixed.inset-0').remove();
            
            // Show not eligible message
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-xl max-w-md w-full p-6 text-center">
                    <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-times text-red-600 text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-2">Not Eligible</h3>
                    <p class="text-gray-600 mb-4">Sorry, you are not eligible for premium upgrade at this time.</p>
                    <p class="text-sm text-gray-500 mb-6">Please contact support for more information about premium eligibility requirements.</p>
                    <button onclick="this.closest('.fixed').remove()" class="w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700">
                        Close
                    </button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Close modals when clicking outside
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('fixed')) {
                if (e.target.id === 'companyModal') closeCompanyModal();
                if (e.target.id === 'personModal') closePersonModal();
                if (e.target.id === 'addCompanyModal') closeAddCompanyModal();
                if (e.target.id === 'addPersonModal') closeAddPersonModal();
                if (e.target.id === 'addInvestmentModal') closeAddInvestmentModal();
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeCompanyModal();
                closePersonModal();
                closeAddCompanyModal();
                closeAddPersonModal();
                closeAddInvestmentModal();
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96fec0613302c617',t:'MTc1NTMyNDQ0Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
